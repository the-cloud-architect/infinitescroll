import{a as $,b as Me,c as qe,d as He,e as ne,f as Cr,g as Rr,h as Ir,i as Or,j as Ar,k as kr,l as Nr,m as Pr,o as Fr}from"/build/_shared/chunk-MM4ZZK5Z.js";import{a as ts}from"/build/_shared/chunk-H3RZE2CH.js";import{a as es,b as ke,c as Rt,d as B,e as Te,f as _e}from"/build/_shared/chunk-OIX5OCDU.js";import{b as Tr,e as _r,j as Mr}from"/build/_shared/chunk-B7FGBX3E.js";import{g as vr,k as wr}from"/build/_shared/chunk-25BYIYGU.js";import{b as Er,d as Sr}from"/build/_shared/chunk-WQPAJ64N.js";import{a as fe,b as O}from"/build/_shared/chunk-2Z2BTQU4.js";import{d as E}from"/build/_shared/chunk-ZT4QWOFN.js";var Yn=E(es(),1);var qi=E(ts(),1);var Dr=E(O(),1);function Ur({className:e,...t}){return(0,Dr.jsx)("textarea",{"data-slot":"textarea",className:B("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}var U=E(O(),1);function jr({...e}){return(0,U.jsx)(Ir,{"data-slot":"dialog",...e})}function Lr({...e}){return(0,U.jsx)(Or,{"data-slot":"dialog-trigger",...e})}function rs({...e}){return(0,U.jsx)(Ar,{"data-slot":"dialog-portal",...e})}function os({className:e,...t}){return(0,U.jsx)(kr,{"data-slot":"dialog-overlay",className:B("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function zr({className:e,children:t,...r}){return(0,U.jsxs)(rs,{"data-slot":"dialog-portal",children:[(0,U.jsx)(os,{}),(0,U.jsxs)(Nr,{"data-slot":"dialog-content",className:B("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...r,children:[t,(0,U.jsxs)(Fr,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,U.jsx)(Mr,{}),(0,U.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function Br({className:e,...t}){return(0,U.jsx)("div",{"data-slot":"dialog-header",className:B("flex flex-col gap-2 text-center sm:text-left",e),...t})}function $r({className:e,...t}){return(0,U.jsx)(Pr,{"data-slot":"dialog-title",className:B("text-lg leading-none font-semibold",e),...t})}var Sn=E(O(),1);var Vr=e=>typeof e=="function",w=function(e,t){if(typeof e=="function")return function(){return e(arguments)?t.apply(this,arguments):r=>t(r,...arguments)};switch(e){case 0:case 1:throw new RangeError(`Invalid arity ${e}`);case 2:return function(r,o){return arguments.length>=2?t(r,o):function(s){return t(s,r)}};case 3:return function(r,o,s){return arguments.length>=3?t(r,o,s):function(n){return t(n,r,o)}};case 4:return function(r,o,s,n){return arguments.length>=4?t(r,o,s,n):function(i){return t(i,r,o,s)}};case 5:return function(r,o,s,n,i){return arguments.length>=5?t(r,o,s,n,i):function(a){return t(a,r,o,s,n)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);let r=arguments;return function(o){return t(o,...r)}}}};var V=e=>e;var Ke=V,ns=e=>()=>e;var ss=ns(void 0),Gr=ss;function Wr(e,t,r,o,s,n,i,a,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return r(t(e));case 4:return o(r(t(e)));case 5:return s(o(r(t(e))));case 6:return n(s(o(r(t(e)))));case 7:return i(n(s(o(r(t(e))))));case 8:return a(i(n(s(o(r(t(e)))))));case 9:return c(a(i(n(s(o(r(t(e))))))));default:{let p=arguments[0];for(let u=1;u<arguments.length;u++)p=arguments[u](p);return p}}}var is="3.14.21",Je=()=>is;var Hr=`effect/GlobalValue/globalStoreId/${Je()}`,Ne,H=(e,t)=>(Ne||(globalThis[Hr]??=new Map,Ne=globalThis[Hr]),Ne.has(e)||Ne.set(e,t()),Ne.get(e));var It=e=>typeof e=="string",Kr=e=>typeof e=="number";var Ot=Vr;var Jr=e=>typeof e=="object"&&e!==null,as=e=>Jr(e)||Ot(e),D=w(2,(e,t)=>as(e)&&t in e),Yr=w(2,(e,t)=>D(e,"_tag")&&e._tag===t);var Pe=e=>Jr(e)&&!Array.isArray(e);var Xr=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;var Qr=Symbol.for("effect/Gen/GenKind");var Zr=class{value;constructor(t){this.value=t}get _F(){return V}get _R(){return t=>t}get _O(){return t=>t}get _E(){return t=>t}[Qr]=Qr;[Symbol.iterator](){return new J(this)}},J=class{self;called=!1;constructor(t){this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new J(this.self)}};var ca=1481765933>>>0,ua=1284865837>>>0;var At=Symbol.for("effect/Utils/YieldWrap"),Ce=class{#e;constructor(t){this.#e=t}[At](){return this.#e}};function eo(e){if(typeof e=="object"&&e!==null&&At in e)return e[At]();throw new Error(Xr("yieldWrapGet"))}var j=H("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0}));var to={effect_internal_function:e=>e()},us={effect_internal_function:e=>{try{return e()}finally{}}},ls=to.effect_internal_function(()=>new Error().stack)?.includes("effect_internal_function")===!0,la=ls?to.effect_internal_function:us.effect_internal_function,pa=function*(){}.constructor;var kt=H(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),G=Symbol.for("effect/Hash"),se=e=>{if(j.enabled===!0)return 0;switch(typeof e){case"number":return Ye(e);case"bigint":return Y(e.toString(10));case"boolean":return Y(String(e));case"symbol":return Y(String(e));case"string":return Y(e);case"undefined":return Y("undefined");case"function":case"object":return e===null?Y("null"):e instanceof Date?se(e.toISOString()):e instanceof URL?se(e.href):ps(e)?e[G]():Nt(e);default:throw new Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},Nt=e=>(kt.has(e)||kt.set(e,Ye(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),kt.get(e)),Pt=e=>t=>t*53^e,Ft=e=>e&3221225471|e>>>1&1073741824,ps=e=>D(e,G),Ye=e=>{if(e!==e||e===1/0)return 0;let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return Ft(t)},Y=e=>{let t=5381,r=e.length;for(;r;)t=t*33^e.charCodeAt(--r);return Ft(t)},ds=(e,t)=>{let r=12289;for(let o=0;o<t.length;o++)r^=Wr(Y(t[o]),Pt(se(e[t[o]])));return Ft(r)},ro=e=>ds(e,Object.keys(e));var me=function(){if(arguments.length===1){let r=arguments[0];return function(o){return Object.defineProperty(r,G,{value(){return o},enumerable:!1}),o}}let e=arguments[0],t=arguments[1];return Object.defineProperty(e,G,{value(){return t},enumerable:!1}),t};var X=Symbol.for("effect/Equal");function Re(){return arguments.length===1?e=>Qe(e,arguments[0]):Qe(arguments[0],arguments[1])}function Qe(e,t){if(e===t)return!0;let r=typeof e;if(r!==typeof t)return!1;if(r==="object"||r==="function"){if(e!==null&&t!==null){if(oo(e)&&oo(t))return se(e)===se(t)&&e[X](t)?!0:j.enabled&&j.tester?j.tester(e,t):!1;if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString();if(e instanceof URL&&t instanceof URL)return e.href===t.href}if(j.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((o,s)=>Qe(o,t[s]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){let o=Object.keys(e),s=Object.keys(t);if(o.length===s.length){for(let n of o)if(!(n in t&&Qe(e[n],t[n])))return j.tester?j.tester(e,t):!1;return!0}}return j.tester?j.tester(e,t):!1}}return j.enabled&&j.tester?j.tester(e,t):!1}var oo=e=>D(e,X);var Q=Symbol.for("nodejs.util.inspect.custom"),et=e=>{try{if(D(e,"toJSON")&&Ot(e.toJSON)&&e.toJSON.length===0)return e.toJSON();if(Array.isArray(e))return e.map(et)}catch{return{}}return ms(e)},ie=e=>JSON.stringify(e,null,2),wa={toJSON(){return et(this)},[Q](){return this.toJSON()},toString(){return ie(this.toJSON())}},no=class{[Q](){return this.toJSON()}toString(){return ie(this.toJSON())}},so=(e,t=2)=>{if(typeof e=="string")return e;try{return typeof e=="object"?fs(e,t):String(e)}catch{return String(e)}},fs=(e,t)=>{let r=[],o=JSON.stringify(e,(s,n)=>typeof n=="object"&&n!==null?r.includes(n)?void 0:r.push(n)&&(Ze.fiberRefs!==void 0&&io(n)?n[Dt](Ze.fiberRefs):n):n,t);return r=void 0,o},Dt=Symbol.for("effect/Inspectable/Redactable"),io=e=>typeof e=="object"&&e!==null&&Dt in e,Ze=H("effect/Inspectable/redactableState",()=>({fiberRefs:void 0}));var ms=e=>io(e)&&Ze.fiberRefs!==void 0?e[Dt](Ze.fiberRefs):e;var he=(e,t)=>{switch(t.length){case 0:return e;case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let r=e;for(let o=0,s=t.length;o<s;o++)r=t[o](r);return r}}};var ao="Commit";var co=Symbol.for("effect/Effect"),uo=Symbol.for("effect/Stream"),lo=Symbol.for("effect/Sink"),po=Symbol.for("effect/Channel"),tt={_R:e=>e,_E:e=>e,_A:e=>e,_V:Je()},xs={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},gs={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},Fe={[co]:tt,[uo]:tt,[lo]:xs,[po]:gs,[X](e){return this===e},[G](){return me(this,Nt(this))},[Symbol.iterator](){return new J(new Ce(this))},pipe(){return he(this,arguments)}},jt={[G](){return me(this,ro(this))},[X](e){let t=Object.keys(this),r=Object.keys(e);if(t.length!==r.length)return!1;for(let o of t)if(!(o in e&&Re(this[o],e[o])))return!1;return!0}},fo={...Fe,_op:ao},bs={...fo,...jt};var mo=e=>Array.isArray(e)?e:Array.from(e),rt=e=>Array.isArray(e)?e:[e];var Ma=Array.isArray;var xo=Symbol.for("effect/Context/Tag"),ot=Symbol.for("effect/Context/Reference"),vs="effect/STM",ws=Symbol.for(vs),go={...Fe,_op:"Tag",[ws]:tt,[xo]:{_Service:e=>e,_Identifier:e=>e},toString(){return ie(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[Q](){return this.toJSON()},of(e){return e},context(e){return wo(this,e)}},Es={...go,[ot]:ot};var bo=e=>()=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let r=new Error;Error.stackTraceLimit=t;function o(){}return Object.setPrototypeOf(o,go),o.key=e,Object.defineProperty(o,"stack",{get(){return r.stack}}),o},yo=()=>(e,t)=>{let r=Error.stackTraceLimit;Error.stackTraceLimit=2;let o=new Error;Error.stackTraceLimit=r;function s(){}return Object.setPrototypeOf(s,Es),s.key=e,s.defaultValue=t.defaultValue,Object.defineProperty(s,"stack",{get(){return o.stack}}),s},zt=Symbol.for("effect/Context"),Ss={[zt]:{_Services:e=>e},[X](e){if(vo(e)&&this.unsafeMap.size===e.unsafeMap.size){for(let t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!Re(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[G](){return me(this,Ye(this.unsafeMap.size))},pipe(){return he(this,arguments)},toString(){return ie(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(et)}},[Q](){return this.toJSON()}},Bt=e=>{let t=Object.create(Ss);return t.unsafeMap=e,t},Ts=e=>{let t=new Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){let r=e.stack.split(`
`);if(r.length>2){let o=r[2].match(/at (.*)/);o&&(t.message=t.message+` (defined at ${o[1]})`)}}if(t.stack){let r=t.stack.split(`
`);r.splice(1,3),t.stack=r.join(`
`)}return t},vo=e=>D(e,zt);var wo=(e,t)=>Bt(new Map([[e.key,t]])),Eo=w(3,(e,t,r)=>{let o=new Map(e.unsafeMap);return o.set(t.key,r),Bt(o)}),Lt=H("effect/Context/defaultValueCache",()=>new Map),So=e=>{if(Lt.has(e.key))return Lt.get(e.key);let t=e.defaultValue();return Lt.set(e.key,t),t},To=(e,t)=>e.unsafeMap.has(t.key)?e.unsafeMap.get(t.key):So(t),_o=w(2,(e,t)=>{if(!e.unsafeMap.has(t.key)){if(ot in t)return So(t);throw Ts(t)}return e.unsafeMap.get(t.key)});var Co=Eo;var Ro=_o;var Io=bo,nt=yo;var Ao=Fe;var Fo=Symbol.for("effect/Micro"),st=Symbol.for("effect/Micro/MicroExit"),Ue=e=>typeof e=="object"&&e!==null&&Fo in e,ko=Symbol.for("effect/Micro/MicroCause");var Ms={_E:V},De=class extends globalThis.Error{_tag;traces;[ko];constructor(t,r,o){let s=`MicroCause.${t}`,n,i,a;if(r instanceof globalThis.Error){n=`(${s}) ${r.name}`,i=r.message;let c=i.split(`
`).length;a=r.stack?`(${s}) ${r.stack.split(`
`).slice(0,c+3).join(`
`)}`:`${n}: ${i}`}else n=s,i=so(r,0),a=`${n}: ${i}`;o.length>0&&(a+=`
    ${o.join(`
    `)}`),super(i),this._tag=t,this.traces=o,this[ko]=Ms,this.name=n,this.stack=a}pipe(){return he(this,arguments)}toString(){return this.stack}[Q](){return this.stack}},Vt=class extends De{error;constructor(t,r=[]){super("Fail",t,r),this.error=t}},Uo=(e,t=[])=>new Vt(e,t),Gt=class extends De{defect;constructor(t,r=[]){super("Die",t,r),this.defect=t}},Do=(e,t=[])=>new Gt(e,t),Wt=class extends De{constructor(t=[]){super("Interrupt","interrupted",t)}},jo=(e=[])=>new Wt(e),Lo=e=>e._tag==="Fail";var zo=e=>e._tag==="Interrupt",pt=e=>e._tag==="Fail"?e.error:e._tag==="Die"?e.defect:e,Cs=w(2,(e,t)=>{let r=[...e.traces,t];switch(e._tag){case"Die":return Do(e.defect,r);case"Interrupt":return jo(r);case"Fail":return Uo(e.error,r)}}),No=Symbol.for("effect/Micro/MicroFiber"),Rs={_A:V,_E:V},it=class{context;interruptible;[No];_stack=[];_observers=[];_exit;_children;currentOpCount=0;constructor(t,r=!0){this.context=t,this.interruptible=r,this[No]=Rs}getRef(t){return To(this.context,t)}addObserver(t){return this._exit?(t(this._exit),Gr):(this._observers.push(t),()=>{let r=this._observers.indexOf(t);r>=0&&this._observers.splice(r,1)})}_interrupted=!1;unsafeInterrupt(){this._exit||(this._interrupted=!0,this.interruptible&&this.evaluate(Zt))}unsafePoll(){return this._exit}evaluate(t){if(this._exit)return;if(this._yielded!==void 0){let s=this._yielded;this._yielded=void 0,s()}let r=this.runLoop(t);if(r===Ie)return;let o=Po.interruptChildren&&Po.interruptChildren(this);if(o!==void 0)return this.evaluate(k(o,()=>r));this._exit=r;for(let s=0;s<this._observers.length;s++)this._observers[s](r);this._observers.length=0}runLoop(t){let r=!1,o=t;this.currentOpCount=0;try{for(;;){if(this.currentOpCount++,!r&&this.getRef(Ae).shouldYield(this)){r=!0;let s=o;o=k(Ns,()=>s)}if(o=o[at](this),o===Ie){let s=this._yielded;return st in s?(this._yielded=void 0,s):Ie}}}catch(s){return D(o,at)?Oe(s):Oe(`MicroFiber.runLoop: Not a valid effect: ${String(o)}`)}}getCont(t){for(;;){let r=this._stack.pop();if(!r)return;let o=r[ct]&&r[ct](this);if(o)return{[t]:o};if(r[t])return r}}_yielded=void 0;yieldWith(t){return this._yielded=t,Ie}children(){return this._children??=new Set}},Po=H("effect/Micro/fiberMiddleware",()=>({interruptChildren:void 0}));var Is=e=>ge(()=>{for(let o of e)o.unsafeInterrupt();let t=e[Symbol.iterator](),r=ge(()=>{let o=t.next();for(;!o.done;){if(o.value.unsafePoll()){o=t.next();continue}let s=o.value;return dt(n=>{s.addObserver(i=>{n(r)})})}return be});return r}),Kt=Symbol.for("effect/Micro/identifier"),y=Symbol.for("effect/Micro/args"),at=Symbol.for("effect/Micro/evaluate"),Z=Symbol.for("effect/Micro/successCont"),xe=Symbol.for("effect/Micro/failureCont"),ct=Symbol.for("effect/Micro/ensureCont"),Ie=Symbol.for("effect/Micro/Yield"),Os={_A:V,_E:V,_R:V},Bo={...Ao,_op:"Micro",[Fo]:Os,pipe(){return he(this,arguments)},[Symbol.iterator](){return new J(new Ce(this))},toJSON(){return{_id:"Micro",op:this[Kt],...y in this?{args:this[y]}:void 0}},toString(){return ie(this)},[Q](){return ie(this)}};function As(e){return Oe("Micro.evaluate: Not implemented")}var Le=e=>({...Bo,[Kt]:e.op,[at]:e.eval??As,[Z]:e.contA,[xe]:e.contE,[ct]:e.ensure}),te=e=>{let t=Le(e);return function(){let r=Object.create(t);return r[y]=e.single===!1?arguments:arguments[0],r}},$o=e=>{let t={...Le(e),[st]:st,_tag:e.op,get[e.prop](){return this[y]},toJSON(){return{_id:"MicroExit",_tag:e.op,[e.prop]:this[y]}},[X](r){return Ls(r)&&r._tag===e.op&&Re(this[y],r[y])},[G](){return me(this,Pt(Y(e.op))(se(this[y])))}};return function(r){let o=Object.create(t);return o[y]=r,o[Z]=void 0,o[xe]=void 0,o[ct]=void 0,o}},A=$o({op:"Success",prop:"value",eval(e){let t=e.getCont(Z);return t?t[Z](this[y],e):e.yieldWith(this)}}),ae=$o({op:"Failure",prop:"cause",eval(e){let t=e.getCont(xe);for(;zo(this[y])&&t&&e.interruptible;)t=e.getCont(xe);return t?t[xe](this[y],e):e.yieldWith(this)}}),K=e=>ae(Uo(e)),ee=te({op:"Sync",eval(e){let t=this[y](),r=e.getCont(Z);return r?r[Z](t,e):e.yieldWith(mt(t))}}),ge=te({op:"Suspend",eval(e){return this[y]()}}),ks=te({op:"Yield",eval(e){let t=!1;return e.getRef(Ae).scheduleTask(()=>{t||e.evaluate(be)},this[y]??0),e.yieldWith(()=>{t=!0})}}),Ns=ks(0);var Ps=e=>Oe(e);var ut=A(void 0);var Vo=e=>ge(()=>{try{return A(e.try())}catch(t){return K(e.catch(t))}});var Jt=e=>Xt(function(t,r){e(r).then(o=>t(A(o)),o=>t(Ps(o)))},e.length!==0),Yt=e=>Xt(function(t,r){try{e.try(r).then(o=>t(A(o)),o=>t(K(e.catch(o))))}catch(o){t(K(e.catch(o)))}},e.try.length!==0),ze=te({op:"WithMicroFiber",eval(e){return this[y](e)}});var Xt=te({op:"Async",single:!1,eval(e){let t=this[y][0],r=!1,o=!1,s=this[y][1]?new AbortController:void 0,n=t(i=>{r||(r=!0,o?e.evaluate(i):o=i)},s?.signal);return o!==!1?o:(o=!0,e._yielded=()=>{r=!0},s===void 0&&n===void 0||e._stack.push(Fs(()=>(r=!0,s?.abort(),n??be))),Ie)}}),Fs=te({op:"AsyncFinalizer",ensure(e){e.interruptible&&(e.interruptible=!1,e._stack.push(tr(!0)))},contE(e,t){return zo(e)?k(this[y](),()=>ae(e)):ae(e)}}),dt=e=>Xt(e,e.length>=2);var ft=(...e)=>ge(()=>Us(e.length===1?e[0]():e[1].call(e[0]))),Us=te({op:"Iterator",contA(e,t){let r=this[y].next(e);return r.done?A(r.value):(t._stack.push(this),eo(r.value))},eval(e){return this[Z](void 0,e)}}),Go=w(2,(e,t)=>W(e,r=>t));var Qt=w(2,(e,t)=>k(e,r=>{let o=Ue(t)?t:typeof t=="function"?t(r):t;return Ue(o)?o:A(o)})),Wo=w(2,(e,t)=>k(e,r=>{let o=Ue(t)?t:typeof t=="function"?t(r):t;return Ue(o)?Go(o,r):A(r)}));var Ds=e=>Js(e,{onFailure:ht,onSuccess:mt});var k=w(2,(e,t)=>{let r=Object.create(js);return r[y]=e,r[Z]=t,r}),js=Le({op:"OnSuccess",eval(e){return e._stack.push(this),this[y]}});var W=w(2,(e,t)=>k(e,r=>A(t(r)))),Ls=e=>D(e,st),mt=A,ht=ae,Zt=ht(jo());var Oe=e=>ht(Do(e));var zs=e=>e._tag==="Failure";var be=mt(void 0),Bs=e=>{for(let t of e)if(t._tag==="Failure")return t;return be},$s="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0),je=class{tasks=[];running=!1;scheduleTask(t,r){this.tasks.push(t),this.running||(this.running=!0,$s(this.afterScheduled))}afterScheduled=()=>{this.running=!1,this.runTasks()};runTasks(){let t=this.tasks;this.tasks=[];for(let r=0,o=t.length;r<o;r++)t[r]()}shouldYield(t){return t.currentOpCount>=t.getRef(qt)}flush(){for(;this.tasks.length>0;)this.runTasks()}},qo=e=>ze(t=>A(Ro(t.context,e)));var Vs=w(2,(e,t)=>ze(r=>{let o=r.context;return r.context=t(o),Xo(e,()=>(r.context=o,ut))}));var xt=w(3,(e,t,r)=>Vs(e,Co(t,r)));var qt=class extends nt()("effect/Micro/currentMaxOpsBeforeYield",{defaultValue:()=>2048}){},Ht=class extends nt()("effect/Micro/currentConcurrency",{defaultValue:()=>"unbounded"}){},Ae=class extends nt()("effect/Micro/currentScheduler",{defaultValue:()=>new je}){};var Ho=w(e=>Ue(e[0]),(e,t,r)=>k(e,o=>t(o)?A(o):K(r(o))));var Gs=w(2,(e,t)=>{let r=Object.create(Ws);return r[y]=e,r[xe]=t,r}),Ws=Le({op:"OnFailure",eval(e){return e._stack.push(this),this[y]}}),Ko=w(3,(e,t,r)=>Gs(e,o=>t(o)?r(o):ae(o)));var qs=w(3,(e,t,r)=>Ko(e,t,o=>Qt(r(o),ae(o)))),Jo=w(2,(e,t)=>qs(e,Lo,r=>t(r.error)));var Hs=w(3,(e,t,r)=>Ko(e,o=>Lo(o)&&t(o.error),o=>r(o.error))),gt=w(3,(e,t,r)=>Hs(e,Yr(t),r));var er=function(){let e=globalThis.Error.stackTraceLimit;globalThis.Error.stackTraceLimit=2;let t=new globalThis.Error;globalThis.Error.stackTraceLimit=e;function r(s,n){let i=t.stack;if(!i)return n;let a=i.split(`
`)[2]?.trim().replace(/^at /,"");if(!a)return n;let c=a.match(/\((.*)\)$/);return Cs(n,`at ${s} (${c?c[1]:a})`)}let o=s=>n=>Xs(n,i=>ae(r(s,i)));return arguments.length===2?o(arguments[1])(arguments[0]):o(arguments[0])},Yo=w(2,(e,t)=>{let r=Object.create(Ks);return r[y]=e,r[Z]=t.onSuccess,r[xe]=t.onFailure,r}),Ks=Le({op:"OnSuccessAndFailure",eval(e){return e._stack.push(this),this[y]}}),Js=w(2,(e,t)=>Yo(e,{onFailure:r=>ee(()=>t.onFailure(r)),onSuccess:r=>ee(()=>t.onSuccess(r))}));var $t=Symbol.for("effect/Micro/MicroScope");var lt=class{[$t];state={_tag:"Open",finalizers:new Set};constructor(){this[$t]=$t}unsafeAddFinalizer(t){this.state._tag==="Open"&&this.state.finalizers.add(t)}addFinalizer(t){return ge(()=>this.state._tag==="Open"?(this.state.finalizers.add(t),ut):t(this.state.exit))}unsafeRemoveFinalizer(t){this.state._tag==="Open"&&this.state.finalizers.delete(t)}close(t){return ge(()=>{if(this.state._tag==="Open"){let r=Array.from(this.state.finalizers).reverse();return this.state={_tag:"Closed",exit:t},k(rr(r,o=>Ds(o(t))),Bs)}return ut})}get fork(){return ee(()=>{let t=new lt;if(this.state._tag==="Closed")return t.state=this.state,t;function r(o){return t.close(o)}return this.state.finalizers.add(r),t.unsafeAddFinalizer(o=>ee(()=>this.unsafeRemoveFinalizer(r))),t})}};var Xo=w(2,(e,t)=>Zs(r=>Yo(r(e),{onFailure:o=>k(t(ht(o)),()=>ae(o)),onSuccess:o=>k(t(mt(o)),()=>A(o))})));var Ys=w(3,(e,t,r)=>Xo(e,o=>t(o)?r(o):be)),Xs=w(2,(e,t)=>Ys(e,zs,r=>t(r.cause)));var tr=te({op:"SetInterruptible",ensure(e){if(e.interruptible=this[y],e._interrupted&&e.interruptible)return()=>Zt}}),Qs=e=>ze(t=>t.interruptible?e:(t.interruptible=!0,t._stack.push(tr(!1)),t._interrupted?Zt:e)),Zs=e=>ze(t=>t.interruptible?(t.interruptible=!1,t._stack.push(tr(!0)),e(Qs)):e(V));var ei=te({op:"While",contA(e,t){return this[y].step(e),this[y].while()?(t._stack.push(this),this[y].body()):be},eval(e){return this[y].while()?(e._stack.push(this),this[y].body()):be}}),rr=(e,t,r)=>ze(o=>{let s=r?.concurrency==="inherit"?o.getRef(Ht):r?.concurrency??1,n=s==="unbounded"?Number.POSITIVE_INFINITY:Math.max(1,s),i=mo(e),a=i.length;if(a===0)return r?.discard?ut:A([]);let c=r?.discard?void 0:new Array(a),p=0;return n===1?Go(ei({while:()=>p<i.length,body:()=>t(i[p],p),step:c?u=>c[p++]=u:u=>p++}),c):dt(u=>{let x=new Set,v,C=0,R=0,T=!1,b=!1;function l(){for(T=!0;C<n&&p<a;){let m=p,g=i[m];p++,C++;try{let d=ti(o,t(g,m),!0,!0);x.add(d),d.addObserver(h=>{x.delete(d),!b&&(h._tag==="Failure"?v===void 0&&(v=h,a=p,x.forEach(L=>L.unsafeInterrupt())):c!==void 0&&(c[m]=h.value),R++,C--,R===a?u(v??A(c)):!T&&C<n&&l())})}catch(d){v=Oe(d),a=p,x.forEach(h=>h.unsafeInterrupt())}}T=!1}return l(),ge(()=>(b=!0,p=a,Is(x)))})});var ti=(e,t,r=!1,o=!1)=>{let s=new it(e.context,e.interruptible);return o||(e.children().add(s),s.addObserver(()=>e.children().delete(s))),r?s.evaluate(t):e.getRef(Ae).scheduleTask(()=>s.evaluate(t),0),s};var Qo=(e,t)=>{let r=new it(Ae.context(t?.scheduler??new je));if(r.evaluate(e),t?.signal)if(t.signal.aborted)r.unsafeInterrupt();else{let o=()=>r.unsafeInterrupt();t.signal.addEventListener("abort",o,{once:!0}),r.addObserver(()=>t.signal.removeEventListener("abort",o))}return r},Be=(e,t)=>new Promise((r,o)=>{Qo(e,t).addObserver(r)}),Zo=(e,t)=>Be(e,t).then(r=>{if(r._tag==="Failure")throw r.cause;return r.value}),ri=e=>{let t=new je,r=Qo(e,{scheduler:t});return t.flush(),r._exit??Oe(r)},or=e=>{let t=ri(e);if(t._tag==="Failure")throw t.cause;return t.value},oi=function(){class e extends globalThis.Error{}return Object.assign(e.prototype,Bo,jt,{[Kt]:"Failure",[at](){return K(this)},toString(){return this.message?`${this.name}: ${this.message}`:this.name},toJSON(){return{...this}},[Q](){let t=this.stack;return t?`${this.toString()}
${t.split(`
`).slice(1).join(`
`)}`:this.toString()}}),e}(),nr=function(){return class extends oi{constructor(e){super(),e&&Object.assign(this,e)}}}(),ye=e=>{class t extends nr{_tag=e}return t.prototype.name=e,t};var en={"audio/3gpp":{source:"iana",extensions:["3gpp"]},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/basic":{source:"iana",extensions:["au","snd"]},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp4":{source:"iana",extensions:["m4a","mp4a"]},"audio/mpeg":{source:"iana",extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/ogg":{source:"iana",extensions:["oga","ogg","spx","opus"]},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/silk":{source:"apache",extensions:["sil"]},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/webm":{source:"apache",extensions:["weba"]},"audio/x-aac":{source:"apache",extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/x-gsm":{source:"apache",extensions:["gsm"]},"audio/xm":{source:"apache",extensions:["xm"]}};var tn={"image/aces":{source:"iana",extensions:["exr"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",extensions:["avif"]},"image/bmp":{source:"iana",extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",extensions:["jpeg","jpg","jpe","jfif","pjpeg","pjp"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",extensions:["jpm"]},"image/jpx":{source:"iana",extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/png":{source:"iana",extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.microsoft.icon":{source:"iana",extensions:["ico"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]}};var rn={"text/cache-manifest":{source:"iana",extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/css":{source:"iana",charset:"UTF-8",extensions:["css"]},"text/csv":{source:"iana",extensions:["csv"]},"text/html":{source:"iana",extensions:["html","htm","shtml"]},"text/markdown":{source:"iana",extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/n3":{source:"iana",charset:"UTF-8",extensions:["n3"]},"text/plain":{source:"iana",extensions:["txt","text","conf","def","list","log","in","ini"]},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/richtext":{source:"iana",extensions:["rtx"]},"text/rtf":{source:"iana",extensions:["rtf"]},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shex":{source:"iana",extensions:["shex"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/tab-separated-values":{source:"iana",extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/uri-list":{source:"iana",extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",extensions:["vcard"]},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",extensions:["xml"]}};var on={"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h264":{source:"iana",extensions:["h264"]},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",extensions:["mp4","mp4v","mpg4"]},"video/mpeg":{source:"iana",extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/ogg":{source:"iana",extensions:["ogv"]},"video/quicktime":{source:"iana",extensions:["qt","mov"]},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/webm":{source:"apache",extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]}};var sr=class extends ye("InvalidURL"){constructor(t){super({reason:`Failed to parse '${t}' as a URL.`})}};var ir=class extends ye("FetchError"){},ar=class extends ye("InvalidJson"){},cr=class extends ye("BadRequestError"){getMessage(){return Pe(this.json)&&typeof this.json.message=="string"?this.json.message:this.message}},ve=class extends ye("UploadAborted"){},ue=class extends ye("UploadAborted"){};async function nn(e){let t=await e.text();try{return JSON.parse(t)}catch(r){return console.error(`Error parsing JSON, got '${t}'`,r),new Error(`Error parsing JSON, got '${t}'`)}}function ce(e){return Object.keys(e)}function si(e,t){let r=/(\d+)\.?(\d+)?\.?(\d+)?/,o=r.exec(e);if(!o?.[0])throw new Error(`Invalid semver requirement: ${e}`);let s=r.exec(t);if(!s?.[0])throw new Error(`Invalid semver to check: ${t}`);let[n,i,a,c]=o,[p,u,x,v]=s;return e.startsWith("^")?!(i!==u||a&&x&&a>x):e.startsWith("~")?!(i!==u||a!==x):i===u&&a===x&&c===v}function ur(e,t,r){si(t,r)||console.warn(`!!!WARNING::: ${e} requires "uploadthing@${t}", but version "${r}" is installed`)}var ii=e=>ft(function*(){let t=(()=>typeof window<"u"?window.location.origin:process.env.VERCEL_URL?`https://${process.env.VERCEL_URL}`:"http://localhost:3000")(),r=yield*Vo({try:()=>new URL(e??"/api/uploadthing",t),catch:()=>new sr(e??"/api/uploadthing")});return r.pathname==="/"&&(r.pathname="/api/uploadthing"),r}),Ee=e=>e instanceof URL?e:or(ii(e));function ai(){}function sn(){return new Proxy(ai,{get:(e,t)=>t})}function an(e,...t){return typeof e=="function"?e(...t):e}var ci={BAD_REQUEST:400,NOT_FOUND:404,FORBIDDEN:403,INTERNAL_SERVER_ERROR:500,INTERNAL_CLIENT_ERROR:500,TOO_LARGE:413,TOO_SMALL:400,TOO_MANY_FILES:400,KEY_TOO_LONG:400,URL_GENERATION_FAILED:500,UPLOAD_FAILED:500,MISSING_ENV:500,INVALID_SERVER_CONFIG:500,FILE_LIMIT_EXCEEDED:500};function ui(e,t){return typeof e=="string"?e:e instanceof Error||e&&typeof e=="object"&&"message"in e&&typeof e.message=="string"?e.message:t??"An unknown error occurred"}var F=class extends nr{constructor(t){let r=typeof t=="string"?{code:"INTERNAL_SERVER_ERROR",message:t}:t,o=r.message??ui(r.cause,r.code);super({message:o}),this._tag="UploadThingError",this.name="UploadThingError",this.code=r.code,this.data=r.data,r.cause instanceof Error?this.cause=r.cause:Pe(r.cause)&&Kr(r.cause.status)&&It(r.cause.statusText)?this.cause=new Error(`Response ${r.cause.status} ${r.cause.statusText}`):It(r.cause)?this.cause=new Error(r.cause):this.cause=r.cause}static toObject(t){return{code:t.code,message:t.message,data:t.data}}static serialize(t){return JSON.stringify(F.toObject(t))}};function cn(e){for(let[t,r]of Object.entries(ci))if(r===e)return t;return"INTERNAL_SERVER_ERROR"}var un=e=>new F({code:"INTERNAL_CLIENT_ERROR",message:"Something went wrong. Please report this to UploadThing.",cause:e}),we=class extends Io("uploadthing/Fetch")(){},yt=(e,t)=>k(qo(we),r=>{let o=new Headers(t?.headers??[]),s={url:e.toString(),method:t?.method,body:t?.body,headers:Object.fromEntries(o)};return Yt({try:n=>r(e,{...t,headers:o,signal:n}),catch:n=>new ir({error:n instanceof Error?{...n,name:n.name,message:n.message,stack:n.stack}:n,input:s})}).pipe(Jo(n=>ee(()=>console.error(n.input))),W(n=>Object.assign(n,{requestUrl:s.url})),er("fetch"))}),ln=e=>Yt({try:async()=>({json:await e.json(),ok:e.ok,status:e.status}),catch:t=>new ar({error:t,input:e.requestUrl})}).pipe(Ho(({ok:t})=>t,({json:t,status:r})=>new cr({status:r,message:`Request to ${e.requestUrl} failed with status ${r}`,json:t})),W(({json:t})=>t),er("parseJson")),pn=(e,t)=>t==="all"?e:t==="fine"?Math.round(e):Math.floor(e/10)*10,dn=e=>{let t=Array.isArray(e)?e:ce(e);return t.includes("blob")?[]:t.map(r=>r==="pdf"?"application/pdf":r.includes("/")?r:r==="audio"?["audio/*",...ce(en)].join(", "):r==="image"?["image/*",...ce(tn)].join(", "):r==="text"?["text/*",...ce(rn)].join(", "):r==="video"?["video/*",...ce(on)].join(", "):`${r}/*`)};function fn(e){let t=e.clipboardData?.items;return t?Array.from(t).reduce((o,s)=>{let n=s.getAsFile();return n?[...o,n]:o},[]):void 0}var mn=e=>{let t=e?ce(e):[],r=e?Object.values(e).map(o=>o.maxFileCount):[];return{fileTypes:t,multiple:r.some(o=>o&&o>1)}},li=e=>e.charAt(0).toUpperCase()+e.slice(1),pi=e=>{if(!e)return"";let t=ce(e),r=t.map(c=>c==="blob"?"file":c);if(r.length>1){let c=r.pop();return`${r.join("s, ")} and ${c}s`}let o=t[0],s=r[0];if(!o||!s)return"";let{maxFileSize:n,maxFileCount:i,minFileCount:a}=e[o];return i&&i>1?a>1?`${a} - ${i} ${s}s up to ${n}`:`${s}s up to ${n}, max ${i}`:`${s} (${n})`},hn=e=>li(pi(e)),$e=(e,t)=>{if(typeof e=="string")return e;if(typeof e=="function"){let r=e(t);if(typeof r=="string")return r}return""},Ve=(e,t)=>{if(typeof e=="object")return e;if(typeof e=="function"){let r=e(t);if(typeof r=="object")return r}return{}},vt=(e,t)=>{if(!e)return null;if(typeof e!="function")return e;if(typeof e=="function")return e(t)},xn=(...e)=>e.filter(Boolean).join(" ");var bc=new TextEncoder;var gn=()=>{let e,t,r=new AbortController;return{promise:new Promise((s,n)=>{e=s,t=n}),ac:r,resolve:e,reject:t}};var lr=e=>{console.warn(`\u26A0\uFE0F [uploadthing][deprecated] ${e}`)};var di="7.7.2",fi=e=>{let t=new URL(e.url),r=new URLSearchParams(t.search);return r.set("actionType",e.actionType),r.set("slug",e.slug),t.search=r.toString(),t},wt=e=>(t,r)=>ft(function*(){let o=fi({url:e.url,slug:e.endpoint,actionType:t}),s=new Headers(yield*Jt(async()=>typeof e.headers=="function"?await e.headers():e.headers));return e.package&&s.set("x-uploadthing-package",e.package),s.set("x-uploadthing-version",di),s.set("Content-Type","application/json"),yield*yt(o,{method:"POST",body:JSON.stringify(r),headers:s}).pipe(Qt(ln),W(Ke),gt("FetchError",i=>K(new F({code:"INTERNAL_CLIENT_ERROR",message:`Failed to report event "${t}" to UploadThing server`,cause:i}))),gt("BadRequestError",i=>K(new F({code:cn(i.status),message:i.getMessage(),cause:i.json}))),gt("InvalidJson",i=>K(new F({code:"INTERNAL_CLIENT_ERROR",message:"Failed to parse response from UploadThing server",cause:i}))))});var mi="7.7.2",hi=(e,t,r,o)=>dt(s=>{let n=new XMLHttpRequest;n.open("PUT",r.url,!0),n.setRequestHeader("Range",`bytes=${t}-`),n.setRequestHeader("x-uploadthing-version",mi),n.responseType="json";let i=0;n.upload.addEventListener("progress",({loaded:c})=>{let p=c-i;o?.({loaded:c,delta:p}),i=c}),n.addEventListener("load",()=>{n.status>=200&&n.status<300&&Pe(n.response)?D(n.response,"error")?s(new F({code:"UPLOAD_FAILED",message:String(n.response.error),data:n.response})):s(A(n.response)):s(new F({code:"UPLOAD_FAILED",message:`XHR failed ${n.status} ${n.statusText}`,data:n.response}))}),n.addEventListener("error",()=>{s(new F({code:"UPLOAD_FAILED"}))});let a=new FormData;return"uri"in e?a.append("file",{uri:e.uri,type:e.type,name:e.name,...t>0&&{range:t}}):a.append("file",t>0?e.slice(t):e),n.send(a),ee(()=>n.abort())}),pr=(e,t,r)=>yt(t.url,{method:"HEAD"}).pipe(W(({headers:o})=>parseInt(o.get("x-ut-range-start")??"0",10)),Wo(o=>r.onUploadProgress?.({delta:o,loaded:o})),k(o=>hi(e,o,t,s=>r.onUploadProgress?.({delta:s.delta,loaded:s.loaded+o}))),W(Ke),W(o=>({name:e.name,size:e.size,key:t.key,lastModified:e.lastModified,serverData:o.serverData,get url(){return lr("`file.url` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead."),o.url},get appUrl(){return lr("`file.appUrl` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead."),o.appUrl},ufsUrl:o.ufsUrl,customId:t.customId,type:e.type,fileHash:o.fileHash}))),bn=(e,t)=>{let r=wt({endpoint:String(e),package:t.package,url:t.url,headers:t.headers}),o=t.files.reduce((n,i)=>n+i.size,0),s=0;return k(r("upload",{input:"input"in t?t.input:null,files:t.files.map(n=>({name:n.name,size:n.size,type:n.type,lastModified:n.lastModified}))}),n=>rr(n,(i,a)=>k(ee(()=>t.onUploadBegin?.({file:t.files[a].name})),()=>pr(t.files[a],i,{onUploadProgress:c=>{s+=c.delta,t.onUploadProgress?.({file:t.files[a],progress:c.loaded/t.files[a].size*100,loaded:c.loaded,delta:c.delta,totalLoaded:s,totalProgress:s/o})}})),{concurrency:6}))};var xi="7.7.2",dr=xi;var yn=e=>{let t=sn();return{uploadFiles:(s,n)=>{let i=typeof s=="function"?s(t):s,a=e?.fetch??window.fetch;return bn(i,{...n,skipPolling:{},url:Ee(e?.url),package:e?.package??"uploadthing/client",input:n.input}).pipe(xt(we,a),c=>Be(c,n.signal&&{signal:n.signal})).then(c=>{if(c._tag==="Success")return c.value;throw c.cause._tag==="Interrupt"?new ue:pt(c.cause)})},createUpload:async(s,n)=>{let i=new Map,a=typeof s=="function"?s(t):s,c=wt({endpoint:String(a),package:e?.package??"uploadthing/client",url:Ee(e?.url),headers:n.headers}),p=e?.fetch??window.fetch,u=await Zo(c("upload",{input:"input"in n?n.input:null,files:n.files.map(l=>({name:l.name,size:l.size,type:l.type,lastModified:l.lastModified}))}).pipe(xt(we,p))),x=n.files.reduce((l,m)=>l+m.size,0),v=0,C=(l,m)=>pr(l,m,{onUploadProgress:g=>{v+=g.delta,n.onUploadProgress?.({...g,file:l,progress:Math.round(g.loaded/l.size*100),totalLoaded:v,totalProgress:Math.round(v/x*100)})}}).pipe(xt(we,p));for(let[l,m]of u.entries()){let g=n.files[l];if(!g)continue;let d=gn();i.set(g,{deferred:d,presigned:m}),Be(C(g,m),{signal:d.ac.signal}).then(h=>{if(h._tag==="Success")return d.resolve(h.value);throw h.cause._tag==="Interrupt"?new ve:pt(h.cause)}).catch(h=>{h instanceof ve||d.reject(h)})}return{pauseUpload:l=>{let m=rt(l??n.files);for(let g of m){let d=i.get(g);if(!d)return;if(d.deferred.ac.signal.aborted)throw new ue;d.deferred.ac.abort()}},resumeUpload:l=>{let m=rt(l??n.files);for(let g of m){let d=i.get(g);if(!d)throw"No upload found";d.deferred.ac=new AbortController,Be(C(g,d.presigned),{signal:d.deferred.ac.signal}).then(h=>{if(h._tag==="Success")return d.deferred.resolve(h.value);throw h.cause._tag==="Interrupt"?new ve:pt(h.cause)}).catch(h=>{h instanceof ve||d.deferred.reject(h)})}},done:async l=>{let m=[],g=rt(l??n.files);for(let h of g){let L=i.get(h);if(!L)throw"No upload found";m.push(L.deferred.promise)}let d=await Promise.all(m);return l?d[0]:d}}},routeRegistry:t}};var N=E(O(),1),S=E(fe(),1);var vn={uploadthing:"^7.2.0"},gi=()=>{},bi=typeof window<"u"?S.default.useInsertionEffect:gi;function wn(e){let t=S.default.useRef(yi);bi(()=>{t.current=e},[e]);let r=S.default.useRef(null);return r.current??=function(){return t.current.apply(this,arguments)},r.current}function yi(){throw new Error("INVALID_USEEVENT_INVOCATION: the callback from useEvent cannot be invoked before the component has mounted.")}function vi(e,t,r){let o=(0,S.useRef)({}),s=(0,S.useRef)(!1),n={error:void 0,data:void 0},i=(p,u)=>{switch(u.type){case"loading":return{...n};case"fetched":return{...n,data:u.payload};case"error":return{...n,error:u.payload};default:return p}},[a,c]=(0,S.useReducer)(i,n);return(0,S.useEffect)(()=>t?(s.current=!1,(async()=>{if(c({type:"loading"}),o.current[t]){c({type:"fetched",payload:o.current[t]});return}try{let u=await e(t,r);if(!u.ok)throw new Error(u.statusText);let x=await nn(u);if(x instanceof Error)throw x;if(o.current[t]=x,s.current)return;c({type:"fetched",payload:x})}catch(u){if(s.current)return;c({type:"error",payload:u})}})(),()=>{s.current=!0}):void 0,[t]),a}var wi=(e,t,r)=>{let o=globalThis.__UPLOADTHING,{data:s}=vi(e,o?void 0:t.href);return(o??s)?.find(n=>n.slug===r)?.config};function Ei(e,t,r,o){let s=o?.uploadProgressGranularity??"coarse",{uploadFiles:n,routeRegistry:i}=yn({fetch:r,url:e,package:"@uploadthing/react"}),[a,c]=(0,S.useState)(!1),p=(0,S.useRef)(0),u=(0,S.useRef)(new Map),x=wn(async(...R)=>{let T=await o?.onBeforeUploadBegin?.(R[0])??R[0],b=R[1];c(!0),T.forEach(l=>u.current.set(l,0)),o?.onUploadProgress?.(0);try{let l=await n(t,{signal:o?.signal,headers:o?.headers,files:T,onUploadProgress:m=>{if(!o?.onUploadProgress)return;u.current.set(m.file,m.progress);let g=0;u.current.forEach(h=>{g+=h});let d=pn(Math.min(100,g/u.current.size),s);d!==p.current&&(o.onUploadProgress(d),p.current=d)},onUploadBegin({file:m}){o?.onUploadBegin&&o.onUploadBegin(m)},input:b});return await o?.onClientUploadComplete?.(l),l}catch(l){if(l instanceof ue)throw l;let m;l instanceof F?m=l:(m=un(l),console.error("Something went wrong. Please contact UploadThing and provide the following cause:",m.cause instanceof Error?m.cause.toString():m.cause)),await o?.onUploadError?.(m)}finally{c(!1),u.current=new Map,p.current=0}}),v=an(t,i),C=wi(r,e,v);return{startUpload:x,isUploading:a,routeConfig:C}}var Si=Ei;var Ti=e=>{let t=wn(e);(0,S.useEffect)(()=>{let r=new AbortController;return window.addEventListener("paste",t,{signal:r.signal}),()=>{r.abort()}},[t])};function _i(){return(0,N.jsx)("svg",{className:"z-10 block h-5 w-5 animate-spin align-middle text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 576 512",children:(0,N.jsx)("path",{fill:"currentColor",d:"M256 32C256 14.33 270.3 0 288 0C429.4 0 544 114.6 544 256C544 302.6 531.5 346.4 509.7 384C500.9 399.3 481.3 404.6 465.1 395.7C450.7 386.9 445.5 367.3 454.3 351.1C470.6 323.8 480 291 480 255.1C480 149.1 394 63.1 288 63.1C270.3 63.1 256 49.67 256 31.1V32z"})})}function Mi({className:e,cn:t,...r}){return(0,N.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:t("fill-none stroke-current stroke-2",e),...r,children:[(0,N.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,N.jsx)("path",{d:"m4.9 4.9 14.2 14.2"})]})}function En(e){let t=e,{mode:r="auto",appendOnPaste:o=!1,cn:s=xn}=t.config??{},n=(0,S.useRef)(new AbortController),i=(0,S.useRef)(null),[a,c]=(0,S.useState)(t.__internal_upload_progress??0),[p,u]=(0,S.useState)([]),{startUpload:x,isUploading:v,routeConfig:C}=Si(Ee(t.url),t.endpoint,t.fetch??globalThis.fetch,{signal:n.current.signal,headers:t.headers,onClientUploadComplete:_=>{i.current&&(i.current.value=""),u([]),t.onClientUploadComplete?.(_),c(0)},uploadProgressGranularity:t.uploadProgressGranularity,onUploadProgress:_=>{c(_),t.onUploadProgress?.(_)},onUploadError:t.onUploadError,onUploadBegin:t.onUploadBegin,onBeforeUploadBegin:t.onBeforeUploadBegin}),{fileTypes:R,multiple:T}=mn(C),b=!!(t.__internal_button_disabled??t.disabled),l=(()=>{let _=t.__internal_state==="ready"||R.length>0;return t.__internal_state?t.__internal_state:b?"disabled":_?v?"uploading":"ready":"readying"})(),m=(0,S.useCallback)(_=>{let z="input"in t?t.input:void 0;x(_,z).catch(q=>{if(q instanceof ue)t.onUploadAborted?.();else throw q})},[t,x]),g=_=>{if(l==="uploading"){_.preventDefault(),_.stopPropagation(),n.current.abort(),n.current=new AbortController;return}r==="manual"&&p.length>0&&(_.preventDefault(),_.stopPropagation(),m(p))},d=(0,S.useMemo)(()=>({type:"file",ref:i,multiple:T,accept:dn(R).join(", "),onChange:_=>{if(!_.target.files)return;let z=Array.from(_.target.files);if(t.onChange?.(z),r==="manual"){u(z);return}m(z)},disabled:b,tabIndex:b?-1:0}),[t,b,R,r,T,m]);Ti(_=>{if(!o||document.activeElement!==i.current)return;let z=fn(_);if(!z)return;let q=z;u(Ct=>(q=[...Ct,...z],t.onChange?.(q),q)),r==="auto"&&m(p)});let h=(0,S.useMemo)(()=>({ready:l!=="readying",isUploading:l==="uploading",uploadProgress:a,fileTypes:R,files:p}),[R,p,l,a]),L=()=>{let _=vt(t.content?.button,h);if(_)return _;switch(l){case"readying":return"Loading...";case"uploading":return a>=100?(0,N.jsx)(_i,{}):(0,N.jsxs)("span",{className:"z-50",children:[(0,N.jsxs)("span",{className:"block group-hover:hidden",children:[Math.round(a),"%"]}),(0,N.jsx)(Mi,{cn:s,className:"hidden size-4 group-hover:block"})]});case"disabled":case"ready":default:return r==="manual"&&p.length>0?`Upload ${p.length} file${p.length===1?"":"s"}`:`Choose File${d.multiple?"(s)":""}`}},Se=()=>(0,N.jsx)("button",{onClick:()=>{u([]),i.current&&(i.current.value=""),t.onChange?.([])},className:s("h-[1.25rem] cursor-pointer rounded border-none bg-transparent text-gray-500 transition-colors hover:bg-slate-200 hover:text-gray-600",$e(t.appearance?.clearBtn,h)),style:Ve(t.appearance?.clearBtn,h),"data-state":l,"data-ut-element":"clear-btn",children:vt(t.content?.clearBtn,h)??"Clear"}),P=()=>(0,N.jsx)("div",{className:s("h-[1.25rem] text-xs leading-5 text-gray-600",$e(t.appearance?.allowedContent,h)),style:Ve(t.appearance?.allowedContent,h),"data-state":l,"data-ut-element":"allowed-content",children:vt(t.content?.allowedContent,h)??hn(C)});return(0,N.jsxs)("div",{className:s("flex flex-col items-center justify-center gap-1",t.className,$e(t.appearance?.container,h)),style:{"--progress-width":`${a}%`,...Ve(t.appearance?.container,h)},"data-state":l,children:[(0,N.jsxs)("label",{className:s("group relative flex h-10 w-36 cursor-pointer items-center justify-center overflow-hidden rounded-md text-white after:transition-[width] after:duration-500 focus-within:ring-2 focus-within:ring-blue-600 focus-within:ring-offset-2","disabled:pointer-events-none","data-[state=disabled]:cursor-not-allowed data-[state=readying]:cursor-not-allowed","data-[state=disabled]:bg-blue-400 data-[state=ready]:bg-blue-600 data-[state=readying]:bg-blue-400 data-[state=uploading]:bg-blue-400","after:absolute after:left-0 after:h-full after:w-[var(--progress-width)] after:content-[''] data-[state=uploading]:after:bg-blue-600",$e(t.appearance?.button,h)),style:Ve(t.appearance?.button,h),"data-state":l,"data-ut-element":"button",onClick:g,children:[(0,N.jsx)("input",{...d,className:"sr-only"}),L()]}),r==="manual"&&p.length>0?Se():P()]})}var Tn=e=>{ur("@uploadthing/react",vn.uploadthing,dr);let t=Ee(e?.url),r=e?.fetch??globalThis.fetch;return s=>(0,Sn.jsx)(En,{...s,url:t,fetch:r})};var _n=Tn();var Et=E(fe(),1);var M=E(O(),1);function Ci({trigger:e}){let[t,r]=(0,Et.useState)(!1),[o,s]=(0,Et.useState)(""),[n,i]=(0,Et.useState)(!1),{data:a}=Sr();return(0,M.jsxs)(jr,{open:t,onOpenChange:r,children:[(0,M.jsx)(Lr,{asChild:!0,children:e}),(0,M.jsxs)(zr,{className:"sm:max-w-md",children:[(0,M.jsx)(Br,{children:(0,M.jsx)($r,{className:"text-center",children:"Upload a video"})}),a?.user?(0,M.jsxs)("div",{className:"space-y-4",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Video Title"}),(0,M.jsx)(_e,{value:o,onChange:c=>s(c.target.value),placeholder:"Enter a title for your video"})]}),(0,M.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 flex flex-col items-center gap-4 text-slate-600",children:[(0,M.jsx)(Tr,{className:"w-10 h-10"}),(0,M.jsx)(_n,{endpoint:"videoUploader",input:{userId:a.user.id},disabled:!o.trim()||n,className:"ut-button:bg-blue-600 ut-button:hover:bg-blue-700 ut-button:text-white ut-button:disabled:bg-gray-400",onBeforeUploadBegin:()=>(sessionStorage.setItem("videoTitle",o.trim()),[]),onUploadBegin:()=>{i(!0)},onClientUploadComplete:()=>{i(!1),r(!1),sessionStorage.removeItem("videoTitle"),window.location.reload()},onUploadError:c=>{i(!1),alert(`Upload failed: ${c.message}`)}}),(0,M.jsx)("p",{className:"text-xs text-gray-500",children:"MP4 \u2022 max 128 MB"})]})]}):(0,M.jsx)("p",{className:"text-sm text-center text-red-600",children:"Please sign in first."}),(0,M.jsx)(Te,{variant:"ghost",size:"sm",className:"mx-auto mt-4",onClick:()=>r(!1),children:"Close"})]})]})}function fr(){return(0,M.jsx)(Ci,{trigger:(0,M.jsxs)(Te,{size:"sm",variant:"default",className:"flex items-center gap-1",children:[(0,M.jsx)(_r,{size:16}),(0,M.jsx)("span",{children:"Upload"})]})})}var oe=E(fe(),1);var I=E(fe(),1);var le=E(fe(),1);var St=E(O(),1),Ri=E(fe(),1);var Ii=E(O(),1);function Mn(e){let t=e+"CollectionProvider",[r,o]=Me(t),[s,n]=r(t,{collectionRef:{current:null},itemMap:new Map}),i=T=>{let{scope:b,children:l}=T,m=le.default.useRef(null),g=le.default.useRef(new Map).current;return(0,St.jsx)(s,{scope:b,itemMap:g,collectionRef:m,children:l})};i.displayName=t;let a=e+"CollectionSlot",c=Rt(a),p=le.default.forwardRef((T,b)=>{let{scope:l,children:m}=T,g=n(a,l),d=ke(b,g.collectionRef);return(0,St.jsx)(c,{ref:d,children:m})});p.displayName=a;let u=e+"CollectionItemSlot",x="data-radix-collection-item",v=Rt(u),C=le.default.forwardRef((T,b)=>{let{scope:l,children:m,...g}=T,d=le.default.useRef(null),h=ke(b,d),L=n(u,l);return le.default.useEffect(()=>(L.itemMap.set(d,{ref:d,...g}),()=>void L.itemMap.delete(d))),(0,St.jsx)(v,{[x]:"",ref:h,children:m})});C.displayName=u;function R(T){let b=n(e+"CollectionConsumer",T);return le.default.useCallback(()=>{let m=b.collectionRef.current;if(!m)return[];let g=Array.from(m.querySelectorAll(`[${x}]`));return Array.from(b.itemMap.values()).sort((L,Se)=>g.indexOf(L.ref.current)-g.indexOf(Se.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:i,Slot:p,ItemSlot:C},R,o]}var Tt=E(fe(),1),Oi=E(O(),1),Ai=Tt.createContext(void 0);function _t(e){let t=Tt.useContext(Ai);return e||t||"ltr"}var pe=E(O(),1),mr="rovingFocusGroup.onEntryFocus",ki={bubbles:!1,cancelable:!0},Ge="RovingFocusGroup",[hr,Cn,Ni]=Mn(Ge),[Pi,xr]=Me(Ge,[Ni]),[Fi,Ui]=Pi(Ge),Rn=I.forwardRef((e,t)=>(0,pe.jsx)(hr.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,pe.jsx)(hr.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,pe.jsx)(Di,{...e,ref:t})})}));Rn.displayName=Ge;var Di=I.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:o,loop:s=!1,dir:n,currentTabStopId:i,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:p,preventScrollOnEntryFocus:u=!1,...x}=e,v=I.useRef(null),C=ke(t,v),R=_t(n),[T,b]=He({prop:i,defaultProp:a??null,onChange:c,caller:Ge}),[l,m]=I.useState(!1),g=Cr(p),d=Cn(r),h=I.useRef(!1),[L,Se]=I.useState(0);return I.useEffect(()=>{let P=v.current;if(P)return P.addEventListener(mr,g),()=>P.removeEventListener(mr,g)},[g]),(0,pe.jsx)(Fi,{scope:r,orientation:o,dir:R,loop:s,currentTabStopId:T,onItemFocus:I.useCallback(P=>b(P),[b]),onItemShiftTab:I.useCallback(()=>m(!0),[]),onFocusableItemAdd:I.useCallback(()=>Se(P=>P+1),[]),onFocusableItemRemove:I.useCallback(()=>Se(P=>P-1),[]),children:(0,pe.jsx)(ne.div,{tabIndex:l||L===0?-1:0,"data-orientation":o,...x,ref:C,style:{outline:"none",...e.style},onMouseDown:$(e.onMouseDown,()=>{h.current=!0}),onFocus:$(e.onFocus,P=>{let _=!h.current;if(P.target===P.currentTarget&&_&&!l){let z=new CustomEvent(mr,ki);if(P.currentTarget.dispatchEvent(z),!z.defaultPrevented){let q=d().filter(de=>de.focusable),Ct=q.find(de=>de.active),Qn=q.find(de=>de.id===T),Zn=[Ct,Qn,...q].filter(Boolean).map(de=>de.ref.current);An(Zn,u)}}h.current=!1}),onBlur:$(e.onBlur,()=>m(!1))})})}),In="RovingFocusGroupItem",On=I.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:o=!0,active:s=!1,tabStopId:n,children:i,...a}=e,c=qe(),p=n||c,u=Ui(In,r),x=u.currentTabStopId===p,v=Cn(r),{onFocusableItemAdd:C,onFocusableItemRemove:R,currentTabStopId:T}=u;return I.useEffect(()=>{if(o)return C(),()=>R()},[o,C,R]),(0,pe.jsx)(hr.ItemSlot,{scope:r,id:p,focusable:o,active:s,children:(0,pe.jsx)(ne.span,{tabIndex:x?0:-1,"data-orientation":u.orientation,...a,ref:t,onMouseDown:$(e.onMouseDown,b=>{o?u.onItemFocus(p):b.preventDefault()}),onFocus:$(e.onFocus,()=>u.onItemFocus(p)),onKeyDown:$(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){u.onItemShiftTab();return}if(b.target!==b.currentTarget)return;let l=zi(b,u.orientation,u.dir);if(l!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let g=v().filter(d=>d.focusable).map(d=>d.ref.current);if(l==="last")g.reverse();else if(l==="prev"||l==="next"){l==="prev"&&g.reverse();let d=g.indexOf(b.currentTarget);g=u.loop?Bi(g,d+1):g.slice(d+1)}setTimeout(()=>An(g))}}),children:typeof i=="function"?i({isCurrentTabStop:x,hasTabStop:T!=null}):i})})});On.displayName=In;var ji={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Li(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function zi(e,t,r){let o=Li(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return ji[o]}function An(e,t=!1){let r=document.activeElement;for(let o of e)if(o===r||(o.focus({preventScroll:t}),document.activeElement!==r))return}function Bi(e,t){return e.map((r,o)=>e[(t+o)%e.length])}var kn=Rn,Nn=On;var re=E(O(),1),Mt="Tabs",[Vi,Eu]=Me(Mt,[xr]),Pn=xr(),[Gi,gr]=Vi(Mt),Fn=oe.forwardRef((e,t)=>{let{__scopeTabs:r,value:o,onValueChange:s,defaultValue:n,orientation:i="horizontal",dir:a,activationMode:c="automatic",...p}=e,u=_t(a),[x,v]=He({prop:o,onChange:s,defaultProp:n??"",caller:Mt});return(0,re.jsx)(Gi,{scope:r,baseId:qe(),value:x,onValueChange:v,orientation:i,dir:u,activationMode:c,children:(0,re.jsx)(ne.div,{dir:u,"data-orientation":i,...p,ref:t})})});Fn.displayName=Mt;var Un="TabsList",Dn=oe.forwardRef((e,t)=>{let{__scopeTabs:r,loop:o=!0,...s}=e,n=gr(Un,r),i=Pn(r);return(0,re.jsx)(kn,{asChild:!0,...i,orientation:n.orientation,dir:n.dir,loop:o,children:(0,re.jsx)(ne.div,{role:"tablist","aria-orientation":n.orientation,...s,ref:t})})});Dn.displayName=Un;var jn="TabsTrigger",Ln=oe.forwardRef((e,t)=>{let{__scopeTabs:r,value:o,disabled:s=!1,...n}=e,i=gr(jn,r),a=Pn(r),c=$n(i.baseId,o),p=Vn(i.baseId,o),u=o===i.value;return(0,re.jsx)(Nn,{asChild:!0,...a,focusable:!s,active:u,children:(0,re.jsx)(ne.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":p,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...n,ref:t,onMouseDown:$(e.onMouseDown,x=>{!s&&x.button===0&&x.ctrlKey===!1?i.onValueChange(o):x.preventDefault()}),onKeyDown:$(e.onKeyDown,x=>{[" ","Enter"].includes(x.key)&&i.onValueChange(o)}),onFocus:$(e.onFocus,()=>{let x=i.activationMode!=="manual";!u&&!s&&x&&i.onValueChange(o)})})})});Ln.displayName=jn;var zn="TabsContent",Bn=oe.forwardRef((e,t)=>{let{__scopeTabs:r,value:o,forceMount:s,children:n,...i}=e,a=gr(zn,r),c=$n(a.baseId,o),p=Vn(a.baseId,o),u=o===a.value,x=oe.useRef(u);return oe.useEffect(()=>{let v=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(v)},[]),(0,re.jsx)(Rr,{present:s||u,children:({present:v})=>(0,re.jsx)(ne.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":c,hidden:!v,id:p,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:x.current?"0s":void 0},children:v&&n})})});Bn.displayName=zn;function $n(e,t){return`${e}-trigger-${t}`}function Vn(e,t){return`${e}-content-${t}`}var Gn=Fn,Wn=Dn,qn=Ln,Hn=Bn;var We=E(O(),1);function Kn({className:e,...t}){return(0,We.jsx)(Gn,{"data-slot":"tabs",className:B("flex flex-col gap-2",e),...t})}function Jn({className:e,...t}){return(0,We.jsx)(Wn,{"data-slot":"tabs-list",className:B("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function br({className:e,...t}){return(0,We.jsx)(qn,{"data-slot":"tabs-trigger",className:B("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function yr({className:e,...t}){return(0,We.jsx)(Hn,{"data-slot":"tabs-content",className:B("flex-1 outline-none",e),...t})}var f=E(O(),1);function Xn(){let{profile:e,videos:t}=wr();return(0,f.jsxs)("div",{className:"min-h-screen pb-20",children:[(0,f.jsxs)("div",{className:"bg-gradient-to-b from-blue-600 to-blue-500 text-white pt-12 pb-8 px-4",children:[(0,f.jsxs)("div",{className:"flex items-center gap-4",children:[(0,f.jsx)("div",{className:"w-20 h-20 rounded-full bg-white overflow-hidden flex items-center justify-center",children:e.image?(0,f.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"}):(0,f.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-200 text-gray-600 text-2xl font-bold",children:e.name.charAt(0).toUpperCase()})}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h1",{className:"text-2xl font-bold",children:e.name}),(0,f.jsx)("p",{className:"text-sm opacity-80",children:e.username?`@${e.username}`:e.email}),e.location&&(0,f.jsx)("p",{className:"text-sm mt-1",children:e.location})]})]}),e.bio&&(0,f.jsx)("p",{className:"text-sm opacity-90 mt-4",children:e.bio}),(0,f.jsxs)("div",{className:"mt-6 flex justify-between items-center",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"text-xl font-bold",children:t.length}),(0,f.jsx)("p",{className:"text-xs opacity-80",children:"Videos"})]}),(0,f.jsx)(fr,{})]})]}),(0,f.jsxs)(Kn,{defaultValue:"videos",className:"w-full",children:[(0,f.jsxs)(Jn,{className:"w-full grid grid-cols-2",children:[(0,f.jsx)(br,{value:"videos",children:"My Videos"}),(0,f.jsx)(br,{value:"edit",children:"Edit Profile"})]}),(0,f.jsx)(yr,{value:"videos",className:"p-4",children:t.length===0?(0,f.jsxs)("div",{className:"py-10 text-center text-gray-500",children:[(0,f.jsx)("p",{children:"You haven't uploaded any videos yet."}),(0,f.jsx)(fr,{})]}):(0,f.jsx)("div",{className:"grid grid-cols-3 gap-2",children:t.map(r=>(0,f.jsxs)("div",{className:"aspect-square relative overflow-hidden rounded-md bg-gray-100",children:[(0,f.jsx)("video",{src:r.url,className:"absolute inset-0 w-full h-full object-cover"}),(0,f.jsxs)("div",{className:"absolute bottom-1 right-1 bg-black/50 text-white text-xs px-1 rounded",children:[r.thumbsUp," \u{1F44D}"]}),r.title&&(0,f.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2",children:(0,f.jsx)("p",{className:"text-white text-xs truncate",children:r.title})})]},r.id))})}),(0,f.jsxs)(yr,{value:"edit",className:"p-4",children:[(0,f.jsxs)(vr,{method:"post",className:"space-y-4",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Name"}),(0,f.jsx)(_e,{name:"name",defaultValue:e.name})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Username"}),(0,f.jsx)(_e,{name:"username",defaultValue:e.username||"",placeholder:"username"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Bio"}),(0,f.jsx)(Ur,{name:"bio",defaultValue:e.bio||"",rows:3,placeholder:"Tell us about yourself"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Location"}),(0,f.jsx)(_e,{name:"location",defaultValue:e.location||"",placeholder:"City, Country"})]}),(0,f.jsx)(Te,{type:"submit",className:"w-full",children:"Save Profile"})]}),(0,f.jsx)(Te,{type:"button",variant:"outline",className:"w-full mt-4 text-red-500 border-red-200",onClick:()=>Er(),children:"Sign Out"})]})]})]})}export{Xn as default};
