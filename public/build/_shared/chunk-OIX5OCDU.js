import{a as Bi,b as Xt}from"/build/_shared/chunk-2Z2BTQU4.js";import{b as $l,c as ql,d as ht,e as A}from"/build/_shared/chunk-ZT4QWOFN.js";var Ql=$l((Wd,Fi)=>{Fi.exports={}});var _=Symbol.for("drizzle:entityKind"),Gd=Symbol.for("drizzle:hasOwnEntityKind");function Q(r,e){if(!r||typeof r!="object")return!1;if(r instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,_))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let t=Object.getPrototypeOf(r).constructor;if(t)for(;t;){if(_ in t&&t[_]===e[_])return!0;t=Object.getPrototypeOf(t)}return!1}var Dl,er=class{config;constructor(e,t,n){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}};Dl=_,A(er,Dl,"ColumnBuilder");var Bl,ce=class{constructor(e,t){this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}};Bl=_,A(ce,Bl,"Column");var je=Symbol.for("drizzle:Name");var Fl,tr=class{reference;_onUpdate="no action";_onDelete="no action";constructor(e,t){this.reference=()=>{let{name:n,columns:s,foreignColumns:i}=e();return{name:n,columns:s,foreignTable:i[0].table,foreignColumns:i}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new Rr(e,this)}};Fl=_,A(tr,Fl,"PgForeignKeyBuilder");var jl,Rr=class{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}reference;onUpdate;onDelete;getName(){let{name:e,columns:t,foreignColumns:n}=this.reference(),s=t.map(a=>a.name),i=n.map(a=>a.name),l=[this.table[je],...s,n[0].table[je],...i];return e??`${l.join("_")}_fk`}};jl=_,A(Rr,jl,"PgForeignKey");function Mr(r,...e){return r(...e)}function Ws(r,e){return`${r[je]}_${e.join("_")}_unique`}var Ul,Or=class{constructor(e,t){this.name=t,this.columns=e}columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new $r(e,this.columns,this.nullsNotDistinctConfig,this.name)}};Ul=_,A(Or,Ul,"PgUniqueConstraintBuilder");var zl,Ks=class{name;constructor(e){this.name=e}on(...e){return new Or(e,this.name)}};zl=_,A(Ks,zl,"PgUniqueOnConstraintBuilder");var Vl,$r=class{constructor(e,t,n,s){this.table=e,this.columns=t,this.name=s??Ws(this.table,this.columns.map(i=>i.name)),this.nullsNotDistinct=n}columns;name;nullsNotDistinct=!1;getName(){return this.name}};Vl=_,A($r,Vl,"PgUniqueConstraint");function ji(r,e,t){for(let n=e;n<r.length;n++){let s=r[n];if(s==="\\"){n++;continue}if(s==='"')return[r.slice(e,n).replace(/\\/g,""),n+1];if(!t&&(s===","||s==="}"))return[r.slice(e,n).replace(/\\/g,""),n]}return[r.slice(e).replace(/\\/g,""),r.length]}function Ui(r,e=0){let t=[],n=e,s=!1;for(;n<r.length;){let i=r[n];if(i===","){(s||n===e)&&t.push(""),s=!0,n++;continue}if(s=!1,i==="\\"){n+=2;continue}if(i==='"'){let[f,w]=ji(r,n+1,!0);t.push(f),n=w;continue}if(i==="}")return[t,n+1];if(i==="{"){let[f,w]=Ui(r,n+1);t.push(f),n=w;continue}let[l,a]=ji(r,n,!1);t.push(l),n=a}return[t,n]}function zi(r){let[e]=Ui(r,1);return e}function Gs(r){return`{${r.map(e=>Array.isArray(e)?Gs(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var Kl,K=class extends er{foreignKeyConfigs=[];array(e){return new Qr(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:n,actions:s})=>Mr((i,l)=>{let a=new tr(()=>{let f=i();return{columns:[e],foreignColumns:[f]}});return l.onUpdate&&a.onUpdate(l.onUpdate),l.onDelete&&a.onDelete(l.onDelete),a.build(t)},n,s))}buildExtraConfigColumn(e){return new qr(e,this.config)}};Kl=_,A(K,Kl,"PgColumnBuilder");var Wl,U=class extends ce{constructor(e,t){t.uniqueName||(t.uniqueName=Ws(e,[t.name])),super(e,t),this.table=e}};Wl=_,A(U,Wl,"PgColumn");var Gl,qr=class extends U{getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}};Gl=_,A(qr,Gl,"ExtraConfigColumn");var Hl,ft=class{constructor(e,t,n,s){this.name=e,this.keyAsName=t,this.type=n,this.indexConfig=s}name;keyAsName;type;indexConfig};Hl=_,A(ft,Hl,"IndexedColumn");var Jl,Qr=class extends K{constructor(e,t,n){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=n}build(e){let t=this.config.baseBuilder.build(e);return new Dr(e,this.config,t)}};Jl=_,A(Qr,Jl,"PgArrayBuilder");var Yl,Hs=class extends U{constructor(e,t,n,s){super(e,t),this.baseColumn=n,this.range=s,this.size=t.size}size;getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=zi(e)),e.map(t=>this.baseColumn.mapFromDriverValue(t))}mapToDriverValue(e,t=!1){let n=e.map(s=>s===null?null:Q(this.baseColumn,Hs)?this.baseColumn.mapToDriverValue(s,!0):this.baseColumn.mapToDriverValue(s));return t?n:Gs(n)}},Dr=Hs;Yl=_,A(Dr,Yl,"PgArray");var Zl,Js=class extends K{constructor(e,t){super(e,"string","PgEnumObjectColumn"),this.config.enum=t}build(e){return new Br(e,this.config)}};Zl=_,A(Js,Zl,"PgEnumObjectColumnBuilder");var Xl,Br=class extends U{enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}};Xl=_,A(Br,Xl,"PgEnumObjectColumn");var Vi=Symbol.for("drizzle:isPgEnum");function Ki(r){return!!r&&typeof r=="function"&&Vi in r&&r[Vi]===!0}var ec,Ys=class extends K{constructor(e,t){super(e,"string","PgEnumColumn"),this.config.enum=t}build(e){return new Fr(e,this.config)}};ec=_,A(Ys,ec,"PgEnumColumnBuilder");var tc,Fr=class extends U{enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}};tc=_,A(Fr,tc,"PgEnumColumn");var rc,we=class{constructor(e,t,n,s=!1){this._={brand:"Subquery",sql:e,selectedFields:t,alias:n,isWith:s}}};rc=_,A(we,rc,"Subquery");var nc,dt=class extends we{};nc=_,A(dt,nc,"WithSubquery");var Wi="0.43.1";var Zs,Xs,xe={startActiveSpan(r,e){return Zs?(Xs||(Xs=Zs.trace.getTracer("drizzle-orm",Wi)),Mr((t,n)=>n.startActiveSpan(r,s=>{try{return e(s)}catch(i){throw s.setStatus({code:t.SpanStatusCode.ERROR,message:i instanceof Error?i.message:"Unknown error"}),i}finally{s.end()}}),Zs,Xs)):e()}};var de=Symbol.for("drizzle:ViewBaseConfig");var jr=Symbol.for("drizzle:Schema"),Ur=Symbol.for("drizzle:Columns"),Gi=Symbol.for("drizzle:ExtraConfigColumns"),ei=Symbol.for("drizzle:OriginalName"),ti=Symbol.for("drizzle:BaseName"),rr=Symbol.for("drizzle:IsAlias"),Hi=Symbol.for("drizzle:ExtraConfigBuilder"),sc=Symbol.for("drizzle:IsDrizzleTable"),ic,z=class{[(ic=_,je)];[ei];[jr];[Ur];[Gi];[ti];[rr]=!1;[sc]=!0;[Hi]=void 0;constructor(e,t,n){this[je]=this[ei]=e,this[jr]=t,this[ti]=n}};A(z,ic,"Table"),A(z,"Symbol",{Name:je,Schema:jr,OriginalName:ei,Columns:Ur,ExtraConfigColumns:Gi,BaseName:ti,IsAlias:rr,ExtraConfigBuilder:Hi});function Oe(r){return r[je]}function pt(r){return`${r[jr]??"public"}.${r[je]}`}var lc,ri=class{};lc=_,A(ri,lc,"FakePrimitiveParam");function ni(r){return r!=null&&typeof r.getSQL=="function"}function oc(r){let e={sql:"",params:[]};for(let t of r)e.sql+=t.sql,e.params.push(...t.params),t.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...t.typings));return e}var cc,ve=class{value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new W([this])}};cc=_,A(ve,cc,"StringChunk");var uc,At=class{constructor(e){this.queryChunks=e}decoder=Yi;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return xe.startActiveSpan("drizzle.buildSQL",t=>{let n=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,t){let n=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:s,escapeName:i,escapeParam:l,prepareTyping:a,inlineParams:f,paramStartIndex:w}=n;return oc(e.map(h=>{if(Q(h,ve))return{sql:h.value.join(""),params:[]};if(Q(h,Tt))return{sql:i(h.value),params:[]};if(h===void 0)return{sql:"",params:[]};if(Array.isArray(h)){let b=[new ve("(")];for(let[g,v]of h.entries())b.push(v),g<h.length-1&&b.push(new ve(", "));return b.push(new ve(")")),this.buildQueryFromSourceParams(b,n)}if(Q(h,At))return this.buildQueryFromSourceParams(h.queryChunks,{...n,inlineParams:f||h.shouldInlineParams});if(Q(h,z)){let b=h[z.Symbol.Schema],g=h[z.Symbol.Name];return{sql:b===void 0||h[rr]?i(g):i(b)+"."+i(g),params:[]}}if(Q(h,ce)){let b=s.getColumnCasing(h);if(t.invokeSource==="indexes")return{sql:i(b),params:[]};let g=h.table[z.Symbol.Schema];return{sql:h.table[rr]||g===void 0?i(h.table[z.Symbol.Name])+"."+i(b):i(g)+"."+i(h.table[z.Symbol.Name])+"."+i(b),params:[]}}if(Q(h,Re)){let b=h[de].schema,g=h[de].name;return{sql:b===void 0||h[de].isAlias?i(g):i(b)+"."+i(g),params:[]}}if(Q(h,Me)){if(Q(h.value,Ve))return{sql:l(w.value++,h),params:[h],typings:["none"]};let b=h.value===null?null:h.encoder.mapToDriverValue(h.value);if(Q(b,At))return this.buildQueryFromSourceParams([b],n);if(f)return{sql:this.mapInlineParam(b,n),params:[]};let g=["none"];return a&&(g=[a(h.encoder)]),{sql:l(w.value++,b),params:[b],typings:g}}return Q(h,Ve)?{sql:l(w.value++,h),params:[h],typings:["none"]}:Q(h,At.Aliased)&&h.fieldAlias!==void 0?{sql:i(h.fieldAlias),params:[]}:Q(h,we)?h._.isWith?{sql:i(h._.alias),params:[]}:this.buildQueryFromSourceParams([new ve("("),h._.sql,new ve(") "),new Tt(h._.alias)],n):Ki(h)?h.schema?{sql:i(h.schema)+"."+i(h.enumName),params:[]}:{sql:i(h.enumName),params:[]}:ni(h)?h.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([h.getSQL()],n):this.buildQueryFromSourceParams([new ve("("),h.getSQL(),new ve(")")],n):f?{sql:this.mapInlineParam(h,n),params:[]}:{sql:l(w.value++,h),params:[h],typings:["none"]}}))}mapInlineParam(e,{escapeString:t}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return t(e);if(typeof e=="object"){let n=e.toString();return t(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new At.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}},W=At;uc=_,A(W,uc,"SQL");var hc,Tt=class{constructor(e){this.value=e}brand;getSQL(){return new W([this])}};hc=_,A(Tt,hc,"Name");function Ji(r){return typeof r=="object"&&r!==null&&"mapToDriverValue"in r&&typeof r.mapToDriverValue=="function"}var Yi={mapFromDriverValue:r=>r},Zi={mapToDriverValue:r=>r},Vp={...Yi,...Zi},fc,Me=class{constructor(e,t=Zi){this.value=e,this.encoder=t}brand;getSQL(){return new W([this])}};fc=_,A(Me,fc,"Param");function P(r,...e){let t=[];(e.length>0||r.length>0&&r[0]!=="")&&t.push(new ve(r[0]));for(let[n,s]of e.entries())t.push(s,new ve(r[n+1]));return new W(t)}(r=>{function e(){return new W([])}r.empty=e;function t(f){return new W(f)}r.fromList=t;function n(f){return new W([new ve(f)])}r.raw=n;function s(f,w){let h=[];for(let[b,g]of f.entries())b>0&&w!==void 0&&h.push(w),h.push(g);return new W(h)}r.join=s;function i(f){return new Tt(f)}r.identifier=i;function l(f){return new Ve(f)}r.placeholder=l;function a(f,w){return new Me(f,w)}r.param=a})(P||(P={}));(r=>{class e{constructor(n,s){this.sql=n,this.fieldAlias=s}static[_]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}r.Aliased=e})(W||(W={}));var dc,Ve=class{constructor(e){this.name=e}getSQL(){return new W([this])}};dc=_,A(Ve,dc,"Placeholder");function zr(r,e){return r.map(t=>{if(Q(t,Ve)){if(!(t.name in e))throw new Error(`No value for placeholder "${t.name}" was provided`);return e[t.name]}if(Q(t,Me)&&Q(t.value,Ve)){if(!(t.value.name in e))throw new Error(`No value for placeholder "${t.value.name}" was provided`);return t.encoder.mapToDriverValue(e[t.value.name])}return t})}var ac=Symbol.for("drizzle:IsDrizzleView"),pc,Re=class{[(pc=_,de)];[ac]=!0;constructor({name:e,schema:t,selectedFields:n,query:s}){this[de]={name:e,originalName:e,schema:t,selectedFields:n,query:s,isExisting:!s,isAlias:!1}}getSQL(){return new W([this])}};A(Re,pc,"View");ce.prototype.getSQL=function(){return new W([this])};z.prototype.getSQL=function(){return new W([this])};we.prototype.getSQL=function(){return new W([this])};var mc,it=class{constructor(e){this.table=e}get(e,t){return t==="table"?this.table:e[t]}};mc=_,A(it,mc,"ColumnAliasProxyHandler");var gc,mt=class{constructor(e,t){this.alias=e,this.replaceOriginalName=t}get(e,t){if(t===z.Symbol.IsAlias)return!0;if(t===z.Symbol.Name)return this.alias;if(this.replaceOriginalName&&t===z.Symbol.OriginalName)return this.alias;if(t===de)return{...e[de],name:this.alias,isAlias:!0};if(t===z.Symbol.Columns){let s=e[z.Symbol.Columns];if(!s)return s;let i={};return Object.keys(s).map(l=>{i[l]=new Proxy(s[l],new it(new Proxy(e,this)))}),i}let n=e[t];return Q(n,ce)?new Proxy(n,new it(new Proxy(e,this))):n}};gc=_,A(mt,gc,"TableAliasProxyHandler");var yc,si=class{constructor(e){this.alias=e}get(e,t){return t==="sourceTable"?nr(e.sourceTable,this.alias):e[t]}};yc=_,A(si,yc,"RelationTableAliasProxyHandler");function nr(r,e){return new Proxy(r,new mt(e,!1))}function Ke(r,e){return new Proxy(r,new it(new Proxy(r.table,new mt(e,!1))))}function ii(r,e){return new W.Aliased(sr(r.sql,e),r.fieldAlias)}function sr(r,e){return P.join(r.queryChunks.map(t=>Q(t,ce)?Ke(t,e):Q(t,W)?sr(t,e):Q(t,W.Aliased)?ii(t,e):t))}function $e(r,e){return Ji(e)&&!ni(r)&&!Q(r,Me)&&!Q(r,Ve)&&!Q(r,ce)&&!Q(r,z)&&!Q(r,Re)?new Me(r,e):r}var Vr=(r,e)=>P`${r} = ${$e(e,r)}`,Xi=(r,e)=>P`${r} <> ${$e(e,r)}`;function ir(...r){let e=r.filter(t=>t!==void 0);if(e.length!==0)return e.length===1?new W(e):new W([new ve("("),P.join(e,new ve(" and ")),new ve(")")])}function eo(...r){let e=r.filter(t=>t!==void 0);if(e.length!==0)return e.length===1?new W(e):new W([new ve("("),P.join(e,new ve(" or ")),new ve(")")])}function to(r){return P`not ${r}`}var ro=(r,e)=>P`${r} > ${$e(e,r)}`,no=(r,e)=>P`${r} >= ${$e(e,r)}`,so=(r,e)=>P`${r} < ${$e(e,r)}`,io=(r,e)=>P`${r} <= ${$e(e,r)}`;function oo(r,e){return Array.isArray(e)?e.length===0?P`false`:P`${r} in ${e.map(t=>$e(t,r))}`:P`${r} in ${$e(e,r)}`}function ao(r,e){return Array.isArray(e)?e.length===0?P`true`:P`${r} not in ${e.map(t=>$e(t,r))}`:P`${r} not in ${$e(e,r)}`}function lo(r){return P`${r} is null`}function co(r){return P`${r} is not null`}function uo(r){return P`exists ${r}`}function ho(r){return P`not exists ${r}`}function fo(r,e,t){return P`${r} between ${$e(e,r)} and ${$e(t,r)}`}function po(r,e,t){return P`${r} not between ${$e(e,r)} and ${$e(t,r)}`}function mo(r,e){return P`${r} like ${e}`}function go(r,e){return P`${r} not like ${e}`}function yo(r,e){return P`${r} ilike ${e}`}function bo(r,e){return P`${r} not ilike ${e}`}function wo(r){return P`${r} asc`}function vo(r){return P`${r} desc`}var fi={};ql(fi,{account:()=>aa,directMessage:()=>ua,schema:()=>zh,session:()=>oa,user:()=>at,verification:()=>la,video:()=>hi,videoComment:()=>ca});function So(r,e,t){let n={},s=r.reduce((i,{path:l,field:a},f)=>{let w;Q(a,ce)?w=a:Q(a,W)?w=a.decoder:w=a.sql.decoder;let h=i;for(let[b,g]of l.entries())if(b<l.length-1)g in h||(h[g]={}),h=h[g];else{let v=e[f],m=h[g]=v===null?null:w.mapFromDriverValue(v);if(t&&Q(a,ce)&&l.length===2){let c=l[0];c in n?typeof n[c]=="string"&&n[c]!==Oe(a.table)&&(n[c]=!1):n[c]=m===null?Oe(a.table):!1}}return i},{});if(t&&Object.keys(n).length>0)for(let[i,l]of Object.entries(n))typeof l=="string"&&!t[l]&&(s[i]=null);return s}function De(r,e){return Object.entries(r).reduce((t,[n,s])=>{if(typeof n!="string")return t;let i=e?[...e,n]:[n];return Q(s,ce)||Q(s,W)||Q(s,W.Aliased)?t.push({path:i,field:s}):Q(s,z)?t.push(...De(s[z.Symbol.Columns],i)):t.push(...De(s,i)),t},[])}function or(r,e){let t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(let[s,i]of t.entries())if(i!==n[s])return!1;return!0}function Kr(r,e){let t=Object.entries(e).filter(([,n])=>n!==void 0).map(([n,s])=>Q(s,W)||Q(s,ce)?[n,s]:[n,new Me(s,r[z.Symbol.Columns][n])]);if(t.length===0)throw new Error("No values to set");return Object.fromEntries(t)}function xo(r,e){for(let t of e)for(let n of Object.getOwnPropertyNames(t.prototype))n!=="constructor"&&Object.defineProperty(r.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n)||Object.create(null))}function Co(r){return r[z.Symbol.Columns]}function Ye(r){return Q(r,we)?r._.alias:Q(r,Re)?r[de].name:Q(r,W)?void 0:r[z.Symbol.IsAlias]?r[z.Symbol.Name]:r[z.Symbol.BaseName]}function ae(r,e){return{name:typeof r=="string"&&r.length>0?r:"",config:typeof r=="object"?r:e}}function Eo(r){if(typeof r!="object"||r===null||r.constructor.name!=="Object")return!1;if("logger"in r){let e=typeof r.logger;return!(e!=="boolean"&&(e!=="object"||typeof r.logger.logQuery!="function")&&e!=="undefined")}if("schema"in r){let e=typeof r.schema;return!(e!=="object"&&e!=="undefined")}if("casing"in r){let e=typeof r.casing;return!(e!=="string"&&e!=="undefined")}if("mode"in r)return!(r.mode!=="default"||r.mode!=="planetscale"||r.mode!==void 0);if("connection"in r){let e=typeof r.connection;return!(e!=="string"&&e!=="object"&&e!=="undefined")}if("client"in r){let e=typeof r.client;return!(e!=="object"&&e!=="function"&&e!=="undefined")}return Object.keys(r).length===0}var bc,We=class extends K{generatedAlwaysAsIdentity(e){if(e){let{name:t,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){let{name:t,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}};bc=_,A(We,bc,"PgIntColumnBaseBuilder");var wc,Wr=class extends We{constructor(e){super(e,"number","PgBigInt53")}build(e){return new Gr(e,this.config)}};wc=_,A(Wr,wc,"PgBigInt53Builder");var vc,Gr=class extends U{getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}};vc=_,A(Gr,vc,"PgBigInt53");var Sc,Hr=class extends We{constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new Jr(e,this.config)}};Sc=_,A(Hr,Sc,"PgBigInt64Builder");var xc,Jr=class extends U{getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}};xc=_,A(Jr,xc,"PgBigInt64");function _o(r,e){let{name:t,config:n}=ae(r,e);return n.mode==="number"?new Wr(t):new Hr(t)}var Cc,Yr=class extends K{constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Zr(e,this.config)}};Cc=_,A(Yr,Cc,"PgBigSerial53Builder");var Ec,Zr=class extends U{getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}};Ec=_,A(Zr,Ec,"PgBigSerial53");var _c,Xr=class extends K{constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new en(e,this.config)}};_c=_,A(Xr,_c,"PgBigSerial64Builder");var Ac,en=class extends U{getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}};Ac=_,A(en,Ac,"PgBigSerial64");function Ao(r,e){let{name:t,config:n}=ae(r,e);return n.mode==="number"?new Yr(t):new Xr(t)}var Tc,tn=class extends K{constructor(e){super(e,"boolean","PgBoolean")}build(e){return new rn(e,this.config)}};Tc=_,A(tn,Tc,"PgBooleanBuilder");var Nc,rn=class extends U{getSQLType(){return"boolean"}};Nc=_,A(rn,Nc,"PgBoolean");function ar(r){return new tn(r??"")}var kc,nn=class extends K{constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new sn(e,this.config)}};kc=_,A(nn,kc,"PgCharBuilder");var Pc,sn=class extends U{length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}};Pc=_,A(sn,Pc,"PgChar");function To(r,e={}){let{name:t,config:n}=ae(r,e);return new nn(t,n)}var Lc,on=class extends K{constructor(e){super(e,"string","PgCidr")}build(e){return new an(e,this.config)}};Lc=_,A(on,Lc,"PgCidrBuilder");var Ic,an=class extends U{getSQLType(){return"cidr"}};Ic=_,A(an,Ic,"PgCidr");function No(r){return new on(r??"")}var Rc,ln=class extends K{constructor(e,t,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=n}build(e){return new cn(e,this.config)}};Rc=_,A(ln,Rc,"PgCustomColumnBuilder");var Mc,cn=class extends U{sqlName;mapTo;mapFrom;constructor(e,t){super(e,t),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}};Mc=_,A(cn,Mc,"PgCustomColumn");function ko(r){return(e,t)=>{let{name:n,config:s}=ae(e,t);return new ln(n,s,r)}}var Oc,Ue=class extends K{defaultNow(){return this.default(P`now()`)}};Oc=_,A(Ue,Oc,"PgDateColumnBaseBuilder");var $c,un=class extends Ue{constructor(e){super(e,"date","PgDate")}build(e){return new Nt(e,this.config)}};$c=_,A(un,$c,"PgDateBuilder");var qc,Nt=class extends U{getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}};qc=_,A(Nt,qc,"PgDate");var Qc,hn=class extends Ue{constructor(e){super(e,"string","PgDateString")}build(e){return new kt(e,this.config)}};Qc=_,A(hn,Qc,"PgDateStringBuilder");var Dc,kt=class extends U{getSQLType(){return"date"}};Dc=_,A(kt,Dc,"PgDateString");function Po(r,e){let{name:t,config:n}=ae(r,e);return n?.mode==="date"?new un(t):new hn(t)}var Bc,fn=class extends K{constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new dn(e,this.config)}};Bc=_,A(fn,Bc,"PgDoublePrecisionBuilder");var Fc,dn=class extends U{getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}};Fc=_,A(dn,Fc,"PgDoublePrecision");function Lo(r){return new fn(r??"")}var jc,pn=class extends K{constructor(e){super(e,"string","PgInet")}build(e){return new mn(e,this.config)}};jc=_,A(pn,jc,"PgInetBuilder");var Uc,mn=class extends U{getSQLType(){return"inet"}};Uc=_,A(mn,Uc,"PgInet");function Io(r){return new pn(r??"")}var zc,gn=class extends We{constructor(e){super(e,"number","PgInteger")}build(e){return new yn(e,this.config)}};zc=_,A(gn,zc,"PgIntegerBuilder");var Vc,yn=class extends U{getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}};Vc=_,A(yn,Vc,"PgInteger");function Pt(r){return new gn(r??"")}var Kc,bn=class extends K{constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new wn(e,this.config)}};Kc=_,A(bn,Kc,"PgIntervalBuilder");var Wc,wn=class extends U{fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let e=this.fields?` ${this.fields}`:"",t=this.precision?`(${this.precision})`:"";return`interval${e}${t}`}};Wc=_,A(wn,Wc,"PgInterval");function Ro(r,e={}){let{name:t,config:n}=ae(r,e);return new bn(t,n)}var Gc,vn=class extends K{constructor(e){super(e,"json","PgJson")}build(e){return new Lt(e,this.config)}};Gc=_,A(vn,Gc,"PgJsonBuilder");var Hc,Lt=class extends U{constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};Hc=_,A(Lt,Hc,"PgJson");function Mo(r){return new vn(r??"")}var Jc,Sn=class extends K{constructor(e){super(e,"json","PgJsonb")}build(e){return new It(e,this.config)}};Jc=_,A(Sn,Jc,"PgJsonbBuilder");var Yc,It=class extends U{constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};Yc=_,A(It,Yc,"PgJsonb");function Oo(r){return new Sn(r??"")}var Zc,xn=class extends K{constructor(e){super(e,"array","PgLine")}build(e){return new Cn(e,this.config)}};Zc=_,A(xn,Zc,"PgLineBuilder");var Xc,Cn=class extends U{getSQLType(){return"line"}mapFromDriverValue(e){let[t,n,s]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(n),Number.parseFloat(s)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}};Xc=_,A(Cn,Xc,"PgLine");var eu,En=class extends K{constructor(e){super(e,"json","PgLineABC")}build(e){return new _n(e,this.config)}};eu=_,A(En,eu,"PgLineABCBuilder");var tu,_n=class extends U{getSQLType(){return"line"}mapFromDriverValue(e){let[t,n,s]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(n),c:Number.parseFloat(s)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}};tu=_,A(_n,tu,"PgLineABC");function $o(r,e){let{name:t,config:n}=ae(r,e);return!n?.mode||n.mode==="tuple"?new xn(t):new En(t)}var ru,An=class extends K{constructor(e){super(e,"string","PgMacaddr")}build(e){return new Tn(e,this.config)}};ru=_,A(An,ru,"PgMacaddrBuilder");var nu,Tn=class extends U{getSQLType(){return"macaddr"}};nu=_,A(Tn,nu,"PgMacaddr");function qo(r){return new An(r??"")}var su,Nn=class extends K{constructor(e){super(e,"string","PgMacaddr8")}build(e){return new kn(e,this.config)}};su=_,A(Nn,su,"PgMacaddr8Builder");var iu,kn=class extends U{getSQLType(){return"macaddr8"}};iu=_,A(kn,iu,"PgMacaddr8");function Qo(r){return new Nn(r??"")}var ou,Pn=class extends K{constructor(e,t,n){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=n}build(e){return new Rt(e,this.config)}};ou=_,A(Pn,ou,"PgNumericBuilder");var au,Rt=class extends U{precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue(e){return typeof e=="string"?e:String(e)}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}};au=_,A(Rt,au,"PgNumeric");var lu,Ln=class extends K{constructor(e,t,n){super(e,"number","PgNumericNumber"),this.config.precision=t,this.config.scale=n}build(e){return new In(e,this.config)}};lu=_,A(Ln,lu,"PgNumericNumberBuilder");var cu,In=class extends U{precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}};cu=_,A(In,cu,"PgNumericNumber");var uu,Rn=class extends K{constructor(e,t,n){super(e,"bigint","PgNumericBigInt"),this.config.precision=t,this.config.scale=n}build(e){return new Mn(e,this.config)}};uu=_,A(Rn,uu,"PgNumericBigIntBuilder");var hu,Mn=class extends U{precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}};hu=_,A(Mn,hu,"PgNumericBigInt");function Do(r,e){let{name:t,config:n}=ae(r,e),s=n?.mode;return s==="number"?new Ln(t,n?.precision,n?.scale):s==="bigint"?new Rn(t,n?.precision,n?.scale):new Pn(t,n?.precision,n?.scale)}var fu,On=class extends K{constructor(e){super(e,"array","PgPointTuple")}build(e){return new $n(e,this.config)}};fu=_,A(On,fu,"PgPointTupleBuilder");var du,$n=class extends U{getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[t,n]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}};du=_,A($n,du,"PgPointTuple");var pu,qn=class extends K{constructor(e){super(e,"json","PgPointObject")}build(e){return new Qn(e,this.config)}};pu=_,A(qn,pu,"PgPointObjectBuilder");var mu,Qn=class extends U{getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[t,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}};mu=_,A(Qn,mu,"PgPointObject");function Bo(r,e){let{name:t,config:n}=ae(r,e);return!n?.mode||n.mode==="tuple"?new On(t):new qn(t)}function gu(r){let e=[];for(let t=0;t<r.length;t+=2)e.push(Number.parseInt(r.slice(t,t+2),16));return new Uint8Array(e)}function Fo(r,e){let t=new ArrayBuffer(8),n=new DataView(t);for(let s=0;s<8;s++)n.setUint8(s,r[e+s]);return n.getFloat64(0,!0)}function oi(r){let e=gu(r),t=0,n=e[t];t+=1;let s=new DataView(e.buffer),i=s.getUint32(t,n===1);t+=4;let l;if(i&536870912&&(l=s.getUint32(t,n===1),t+=4),(i&65535)===1){let a=Fo(e,t);t+=8;let f=Fo(e,t);return t+=8,[a,f]}throw new Error("Unsupported geometry type")}var yu,Dn=class extends K{constructor(e){super(e,"array","PgGeometry")}build(e){return new Bn(e,this.config)}};yu=_,A(Dn,yu,"PgGeometryBuilder");var bu,Bn=class extends U{getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return oi(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}};bu=_,A(Bn,bu,"PgGeometry");var wu,Fn=class extends K{constructor(e){super(e,"json","PgGeometryObject")}build(e){return new jn(e,this.config)}};wu=_,A(Fn,wu,"PgGeometryObjectBuilder");var vu,jn=class extends U{getSQLType(){return"geometry(point)"}mapFromDriverValue(e){let t=oi(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}};vu=_,A(jn,vu,"PgGeometryObject");function jo(r,e){let{name:t,config:n}=ae(r,e);return!n?.mode||n.mode==="tuple"?new Dn(t):new Fn(t)}var Su,Un=class extends K{constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new zn(e,this.config)}};Su=_,A(Un,Su,"PgRealBuilder");var xu,zn=class extends U{constructor(e,t){super(e,t)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Number.parseFloat(e):e};xu=_,A(zn,xu,"PgReal");function Uo(r){return new Un(r??"")}var Cu,Vn=class extends K{constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Kn(e,this.config)}};Cu=_,A(Vn,Cu,"PgSerialBuilder");var Eu,Kn=class extends U{getSQLType(){return"serial"}};Eu=_,A(Kn,Eu,"PgSerial");function Mt(r){return new Vn(r??"")}var _u,Wn=class extends We{constructor(e){super(e,"number","PgSmallInt")}build(e){return new Gn(e,this.config)}};_u=_,A(Wn,_u,"PgSmallIntBuilder");var Au,Gn=class extends U{getSQLType(){return"smallint"}mapFromDriverValue=e=>typeof e=="string"?Number(e):e};Au=_,A(Gn,Au,"PgSmallInt");function zo(r){return new Wn(r??"")}var Tu,Hn=class extends K{constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Jn(e,this.config)}};Tu=_,A(Hn,Tu,"PgSmallSerialBuilder");var Nu,Jn=class extends U{getSQLType(){return"smallserial"}};Nu=_,A(Jn,Nu,"PgSmallSerial");function Vo(r){return new Hn(r??"")}var ku,Yn=class extends K{constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new Zn(e,this.config)}};ku=_,A(Yn,ku,"PgTextBuilder");var Pu,Zn=class extends U{enumValues=this.config.enumValues;getSQLType(){return"text"}};Pu=_,A(Zn,Pu,"PgText");function le(r,e={}){let{name:t,config:n}=ae(r,e);return new Yn(t,n)}var Lu,Xn=class extends Ue{constructor(e,t,n){super(e,"string","PgTime"),this.withTimezone=t,this.precision=n,this.config.withTimezone=t,this.config.precision=n}build(e){return new Ot(e,this.config)}};Lu=_,A(Xn,Lu,"PgTimeBuilder");var Iu,Ot=class extends U{withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};Iu=_,A(Ot,Iu,"PgTime");function Ko(r,e={}){let{name:t,config:n}=ae(r,e);return new Xn(t,n.withTimezone??!1,n.precision)}var Ru,es=class extends Ue{constructor(e,t,n){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=n}build(e){return new $t(e,this.config)}};Ru=_,A(es,Ru,"PgTimestampBuilder");var Mu,$t=class extends U{withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()};Mu=_,A($t,Mu,"PgTimestamp");var Ou,ts=class extends Ue{constructor(e,t,n){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=n}build(e){return new qt(e,this.config)}};Ou=_,A(ts,Ou,"PgTimestampStringBuilder");var $u,qt=class extends U{withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};$u=_,A(qt,$u,"PgTimestampString");function Te(r,e={}){let{name:t,config:n}=ae(r,e);return n?.mode==="string"?new ts(t,n.withTimezone??!1,n.precision):new es(t,n?.withTimezone??!1,n?.precision)}var qu,rs=class extends K{constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(P`gen_random_uuid()`)}build(e){return new Qt(e,this.config)}};qu=_,A(rs,qu,"PgUUIDBuilder");var Qu,Qt=class extends U{getSQLType(){return"uuid"}};Qu=_,A(Qt,Qu,"PgUUID");function Wo(r){return new rs(r??"")}var Du,ns=class extends K{constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new ss(e,this.config)}};Du=_,A(ns,Du,"PgVarcharBuilder");var Bu,ss=class extends U{length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}};Bu=_,A(ss,Bu,"PgVarchar");function Go(r,e={}){let{name:t,config:n}=ae(r,e);return new ns(t,n)}var Fu,is=class extends K{constructor(e,t){super(e,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(e){return new os(e,this.config)}};Fu=_,A(is,Fu,"PgBinaryVectorBuilder");var ju,os=class extends U{dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}};ju=_,A(os,ju,"PgBinaryVector");function Ho(r,e){let{name:t,config:n}=ae(r,e);return new is(t,n)}var Uu,as=class extends K{constructor(e,t){super(e,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(e){return new ls(e,this.config)}};Uu=_,A(as,Uu,"PgHalfVectorBuilder");var zu,ls=class extends U{dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(t=>Number.parseFloat(t))}};zu=_,A(ls,zu,"PgHalfVector");function Jo(r,e){let{name:t,config:n}=ae(r,e);return new as(t,n)}var Vu,cs=class extends K{constructor(e,t){super(e,"string","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new us(e,this.config)}};Vu=_,A(cs,Vu,"PgSparseVectorBuilder");var Ku,us=class extends U{dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}};Ku=_,A(us,Ku,"PgSparseVector");function Yo(r,e){let{name:t,config:n}=ae(r,e);return new cs(t,n)}var Wu,hs=class extends K{constructor(e,t){super(e,"array","PgVector"),this.config.dimensions=t.dimensions}build(e){return new fs(e,this.config)}};Wu=_,A(hs,Wu,"PgVectorBuilder");var Gu,fs=class extends U{dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(t=>Number.parseFloat(t))}};Gu=_,A(fs,Gu,"PgVector");function Zo(r,e){let{name:t,config:n}=ae(r,e);return new hs(t,n)}var Hu,Pe=class{[(Hu=_,Symbol.toStringTag)]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}then(e,t){return this.execute().then(e,t)}};A(Pe,Hu,"QueryPromise");var Ju,ai=class{config;constructor(e){this.config={...e}}get(e,t){if(t==="_")return{...e._,selectedFields:new Proxy(e._.selectedFields,this)};if(t===de)return{...e[de],selectedFields:new Proxy(e[de].selectedFields,this)};if(typeof t=="symbol")return e[t];let s=(Q(e,we)?e._.selectedFields:Q(e,Re)?e[de].selectedFields:e)[t];if(Q(s,W.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!s.isSelectionField)return s.sql;let i=s.clone();return i.isSelectionField=!0,i}if(Q(s,W)){if(this.config.sqlBehavior==="sql")return s;throw new Error(`You tried to reference "${t}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return Q(s,ce)?this.config.alias?new Proxy(s,new it(new Proxy(s.table,new mt(this.config.alias,this.config.replaceOriginalName??!1)))):s:typeof s!="object"||s===null?s:new Proxy(s,new ai(this.config))}},me=ai;Ju=_,A(me,Ju,"SelectionProxyHandler");var Yu,Dt=class extends Pe{constructor(e,t,n,s){super(),this.session=t,this.dialect=n,this.config={table:e,withList:s}}config;where(e){return this.config.where=e,this}returning(e=this.config.table[z.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=De(e),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return xe.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>xe.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new me({alias:Oe(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};Yu=_,A(Dt,Yu,"PgDelete");function Zu(r){return(r.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(t=>t.toLowerCase()).join("_")}function Xu(r){return(r.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((t,n,s)=>{let i=s===0?n.toLowerCase():`${n[0].toUpperCase()}${n.slice(1)}`;return t+i},"")}function eh(r){return r}var th,lr=class{cache={};cachedTables={};convert;constructor(e){this.convert=e==="snake_case"?Zu:e==="camelCase"?Xu:eh}getColumnCasing(e){if(!e.keyAsName)return e.name;let t=e.table[z.Symbol.Schema]??"public",n=e.table[z.Symbol.OriginalName],s=`${t}.${n}.${e.name}`;return this.cache[s]||this.cacheTable(e.table),this.cache[s]}cacheTable(e){let t=e[z.Symbol.Schema]??"public",n=e[z.Symbol.OriginalName],s=`${t}.${n}`;if(!this.cachedTables[s]){for(let i of Object.values(e[z.Symbol.Columns])){let l=`${s}.${i.name}`;this.cache[l]=this.convert(i.name)}this.cachedTables[s]=!0}}clearCache(){this.cache={},this.cachedTables={}}};th=_,A(lr,th,"CasingCache");var rh,Bt=class extends Error{constructor({message:e,cause:t}){super(e),this.name="DrizzleError",this.cause=t}};rh=_,A(Bt,rh,"DrizzleError");var nh,cr=class extends Bt{constructor(){super({message:"Rollback"})}};nh=_,A(cr,nh,"TransactionRollbackError");function Xo(){return{bigint:_o,bigserial:Ao,boolean:ar,char:To,cidr:No,customType:ko,date:Po,doublePrecision:Lo,inet:Io,integer:Pt,interval:Ro,json:Mo,jsonb:Oo,line:$o,macaddr:qo,macaddr8:Qo,numeric:Do,point:Bo,geometry:jo,real:Uo,serial:Mt,smallint:zo,smallserial:Vo,text:le,time:Ko,timestamp:Te,uuid:Wo,varchar:Go,bit:Ho,halfvec:Jo,sparsevec:Yo,vector:Zo}}var li=Symbol.for("drizzle:PgInlineForeignKeys"),ea=Symbol.for("drizzle:EnableRLS"),ih,Ce=class extends z{[(ih=_,li)]=[];[ea]=!1;[z.Symbol.ExtraConfigBuilder]=void 0;[z.Symbol.ExtraConfigColumns]={}};A(Ce,ih,"PgTable"),A(Ce,"Symbol",Object.assign({},z.Symbol,{InlineForeignKeys:li,EnableRLS:ea}));function sh(r,e,t,n,s=r){let i=new Ce(r,n,s),l=typeof e=="function"?e(Xo()):e,a=Object.fromEntries(Object.entries(l).map(([h,b])=>{let g=b;g.setName(h);let v=g.build(i);return i[li].push(...g.buildForeignKeys(v,i)),[h,v]})),f=Object.fromEntries(Object.entries(l).map(([h,b])=>{let g=b;g.setName(h);let v=g.buildExtraConfigColumn(i);return[h,v]})),w=Object.assign(i,a);return w[z.Symbol.Columns]=a,w[z.Symbol.ExtraConfigColumns]=f,t&&(w[Ce.Symbol.ExtraConfigBuilder]=t),Object.assign(w,{enableRLS:()=>(w[Ce.Symbol.EnableRLS]=!0,w)})}var ot=(r,e,t)=>sh(r,e,t,void 0);var oh,ur=class{columns;name;constructor(e,t){this.columns=e,this.name=t}build(e){return new ds(e,this.columns,this.name)}};oh=_,A(ur,oh,"PgPrimaryKeyBuilder");var ah,ds=class{constructor(e,t,n){this.table=e,this.columns=t,this.name=n}columns;name;getName(){return this.name??`${this.table[Ce.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}};ah=_,A(ds,ah,"PgPrimaryKey");var uh,hr=class{constructor(e,t,n){this.sourceTable=e,this.referencedTable=t,this.relationName=n,this.referencedTableName=t[z.Symbol.Name]}referencedTableName;fieldName};uh=_,A(hr,uh,"Relation");var hh,ps=class{constructor(e,t){this.table=e,this.config=t}};hh=_,A(ps,hh,"Relations");var fh,ci=class extends hr{constructor(e,t,n,s){super(e,t,n?.relationName),this.config=n,this.isNullable=s}withFieldName(e){let t=new ci(this.sourceTable,this.referencedTable,this.config,this.isNullable);return t.fieldName=e,t}},Ze=ci;fh=_,A(Ze,fh,"One");var dh,ui=class extends hr{constructor(e,t,n){super(e,t,n?.relationName),this.config=n}withFieldName(e){let t=new ui(this.sourceTable,this.referencedTable,this.config);return t.fieldName=e,t}},Ft=ui;dh=_,A(Ft,dh,"Many");function ta(){return{and:ir,between:fo,eq:Vr,exists:uo,gt:ro,gte:no,ilike:yo,inArray:oo,isNull:lo,isNotNull:co,like:mo,lt:so,lte:io,ne:Xi,not:to,notBetween:po,notExists:ho,notLike:go,notIlike:bo,notInArray:ao,or:eo,sql:P}}function ra(){return{sql:P,asc:wo,desc:vo}}function na(r,e){Object.keys(r).length===1&&"default"in r&&!Q(r.default,z)&&(r=r.default);let t={},n={},s={};for(let[i,l]of Object.entries(r))if(Q(l,z)){let a=pt(l),f=n[a];t[a]=i,s[i]={tsName:i,dbName:l[z.Symbol.Name],schema:l[z.Symbol.Schema],columns:l[z.Symbol.Columns],relations:f?.relations??{},primaryKey:f?.primaryKey??[]};for(let h of Object.values(l[z.Symbol.Columns]))h.primary&&s[i].primaryKey.push(h);let w=l[z.Symbol.ExtraConfigBuilder]?.(l[z.Symbol.ExtraConfigColumns]);if(w)for(let h of Object.values(w))Q(h,ur)&&s[i].primaryKey.push(...h.columns)}else if(Q(l,ps)){let a=pt(l.table),f=t[a],w=l.config(e(l.table)),h;for(let[b,g]of Object.entries(w))if(f){let v=s[f];v.relations[b]=g,h&&v.primaryKey.push(...h)}else a in n||(n[a]={relations:{},primaryKey:h}),n[a].relations[b]=g}return{tables:s,tableNamesMap:t}}function lh(r){return function(t,n){return new Ze(r,t,n,n?.fields.reduce((s,i)=>s&&i.notNull,!0)??!1)}}function ch(r){return function(t,n){return new Ft(r,t,n)}}function sa(r,e,t){if(Q(t,Ze)&&t.config)return{fields:t.config.fields,references:t.config.references};let n=e[pt(t.referencedTable)];if(!n)throw new Error(`Table "${t.referencedTable[z.Symbol.Name]}" not found in schema`);let s=r[n];if(!s)throw new Error(`Table "${n}" not found in schema`);let i=t.sourceTable,l=e[pt(i)];if(!l)throw new Error(`Table "${i[z.Symbol.Name]}" not found in schema`);let a=[];for(let f of Object.values(s.relations))(t.relationName&&t!==f&&f.relationName===t.relationName||!t.relationName&&f.referencedTable===t.sourceTable)&&a.push(f);if(a.length>1)throw t.relationName?new Error(`There are multiple relations with name "${t.relationName}" in table "${n}"`):new Error(`There are multiple relations between "${n}" and "${t.sourceTable[z.Symbol.Name]}". Please specify relation name`);if(a[0]&&Q(a[0],Ze)&&a[0].config)return{fields:a[0].config.references,references:a[0].config.fields};throw new Error(`There is not enough information to infer relation "${l}.${t.fieldName}"`)}function ia(r){return{one:lh(r),many:ch(r)}}function ms(r,e,t,n,s=i=>i){let i={};for(let[l,a]of n.entries())if(a.isJson){let f=e.relations[a.tsKey],w=t[l],h=typeof w=="string"?JSON.parse(w):w;i[a.tsKey]=Q(f,Ze)?h&&ms(r,r[a.relationTableTsKey],h,a.selection,s):h.map(b=>ms(r,r[a.relationTableTsKey],b,a.selection,s))}else{let f=s(t[l]),w=a.field,h;Q(w,ce)?h=w:Q(w,W)?h=w.decoder:h=w.sql.decoder,i[a.tsKey]=f===null?null:h.mapFromDriverValue(f)}return i}var ph,gt=class extends Re{};ph=_,A(gt,ph,"PgViewBase");var mh,Xe=class{casing;constructor(e){this.casing=new lr(e?.casing)}async migrate(e,t,n){let s=typeof n=="string"?"__drizzle_migrations":n.migrationsTable??"__drizzle_migrations",i=typeof n=="string"?"drizzle":n.migrationsSchema??"drizzle",l=P`
			CREATE TABLE IF NOT EXISTS ${P.identifier(i)}.${P.identifier(s)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await t.execute(P`CREATE SCHEMA IF NOT EXISTS ${P.identifier(i)}`),await t.execute(l);let f=(await t.all(P`select id, hash, created_at from ${P.identifier(i)}.${P.identifier(s)} order by created_at desc limit 1`))[0];await t.transaction(async w=>{for await(let h of e)if(!f||Number(f.created_at)<h.folderMillis){for(let b of h.sql)await w.execute(P.raw(b));await w.execute(P`insert into ${P.identifier(i)}.${P.identifier(s)} ("hash", "created_at") values(${h.hash}, ${h.folderMillis})`)}})}escapeName(e){return`"${e}"`}escapeParam(e){return`$${e+1}`}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!e?.length)return;let t=[P`with `];for(let[n,s]of e.entries())t.push(P`${P.identifier(s._.alias)} as (${s._.sql})`),n<e.length-1&&t.push(P`, `);return t.push(P` `),P.join(t)}buildDeleteQuery({table:e,where:t,returning:n,withList:s}){let i=this.buildWithCTE(s),l=n?P` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0,a=t?P` where ${t}`:void 0;return P`${i}delete from ${e}${a}${l}`}buildUpdateSet(e,t){let n=e[z.Symbol.Columns],s=Object.keys(n).filter(l=>t[l]!==void 0||n[l]?.onUpdateFn!==void 0),i=s.length;return P.join(s.flatMap((l,a)=>{let f=n[l],w=t[l]??P.param(f.onUpdateFn(),f),h=P`${P.identifier(this.casing.getColumnCasing(f))} = ${w}`;return a<i-1?[h,P.raw(", ")]:[h]}))}buildUpdateQuery({table:e,set:t,where:n,returning:s,withList:i,from:l,joins:a}){let f=this.buildWithCTE(i),w=e[Ce.Symbol.Name],h=e[Ce.Symbol.Schema],b=e[Ce.Symbol.OriginalName],g=w===b?void 0:w,v=P`${h?P`${P.identifier(h)}.`:void 0}${P.identifier(b)}${g&&P` ${P.identifier(g)}`}`,m=this.buildUpdateSet(e,t),c=l&&P.join([P.raw(" from "),this.buildFromTable(l)]),y=this.buildJoins(a),S=s?P` returning ${this.buildSelection(s,{isSingleTable:!l})}`:void 0,C=n?P` where ${n}`:void 0;return P`${f}update ${v} set ${m}${c}${y}${C}${S}`}buildSelection(e,{isSingleTable:t=!1}={}){let n=e.length,s=e.flatMap(({field:i},l)=>{let a=[];if(Q(i,W.Aliased)&&i.isSelectionField)a.push(P.identifier(i.fieldAlias));else if(Q(i,W.Aliased)||Q(i,W)){let f=Q(i,W.Aliased)?i.sql:i;t?a.push(new W(f.queryChunks.map(w=>Q(w,U)?P.identifier(this.casing.getColumnCasing(w)):w))):a.push(f),Q(i,W.Aliased)&&a.push(P` as ${P.identifier(i.fieldAlias)}`)}else Q(i,ce)&&(t?a.push(P.identifier(this.casing.getColumnCasing(i))):a.push(i));return l<n-1&&a.push(P`, `),a});return P.join(s)}buildJoins(e){if(!e||e.length===0)return;let t=[];for(let[n,s]of e.entries()){n===0&&t.push(P` `);let i=s.table,l=s.lateral?P` lateral`:void 0,a=s.on?P` on ${s.on}`:void 0;if(Q(i,Ce)){let f=i[Ce.Symbol.Name],w=i[Ce.Symbol.Schema],h=i[Ce.Symbol.OriginalName],b=f===h?void 0:s.alias;t.push(P`${P.raw(s.joinType)} join${l} ${w?P`${P.identifier(w)}.`:void 0}${P.identifier(h)}${b&&P` ${P.identifier(b)}`}${a}`)}else if(Q(i,Re)){let f=i[de].name,w=i[de].schema,h=i[de].originalName,b=f===h?void 0:s.alias;t.push(P`${P.raw(s.joinType)} join${l} ${w?P`${P.identifier(w)}.`:void 0}${P.identifier(h)}${b&&P` ${P.identifier(b)}`}${a}`)}else t.push(P`${P.raw(s.joinType)} join${l} ${i}${a}`);n<e.length-1&&t.push(P` `)}return P.join(t)}buildFromTable(e){if(Q(e,z)&&e[z.Symbol.IsAlias]){let t=P`${P.identifier(e[z.Symbol.OriginalName])}`;return e[z.Symbol.Schema]&&(t=P`${P.identifier(e[z.Symbol.Schema])}.${t}`),P`${t} ${P.identifier(e[z.Symbol.Name])}`}return e}buildSelectQuery({withList:e,fields:t,fieldsFlat:n,where:s,having:i,table:l,joins:a,orderBy:f,groupBy:w,limit:h,offset:b,lockingClause:g,distinct:v,setOperators:m}){let c=n??De(t);for(let M of c)if(Q(M.field,ce)&&Oe(M.field.table)!==(Q(l,we)?l._.alias:Q(l,gt)?l[de].name:Q(l,W)?void 0:Oe(l))&&!(B=>a?.some(({alias:H})=>H===(B[z.Symbol.IsAlias]?Oe(B):B[z.Symbol.BaseName])))(M.field.table)){let B=Oe(M.field.table);throw new Error(`Your "${M.path.join("->")}" field references a column "${B}"."${M.field.name}", but the table "${B}" is not part of the query! Did you forget to join it?`)}let y=!a||a.length===0,S=this.buildWithCTE(e),C;v&&(C=v===!0?P` distinct`:P` distinct on (${P.join(v.on,P`, `)})`);let N=this.buildSelection(c,{isSingleTable:y}),R=this.buildFromTable(l),O=this.buildJoins(a),x=s?P` where ${s}`:void 0,L=i?P` having ${i}`:void 0,E;f&&f.length>0&&(E=P` order by ${P.join(f,P`, `)}`);let T;w&&w.length>0&&(T=P` group by ${P.join(w,P`, `)}`);let q=typeof h=="object"||typeof h=="number"&&h>=0?P` limit ${h}`:void 0,$=b?P` offset ${b}`:void 0,V=P.empty();if(g){let M=P` for ${P.raw(g.strength)}`;g.config.of&&M.append(P` of ${P.join(Array.isArray(g.config.of)?g.config.of:[g.config.of],P`, `)}`),g.config.noWait?M.append(P` nowait`):g.config.skipLocked&&M.append(P` skip locked`),V.append(M)}let G=P`${S}select${C} ${N} from ${R}${O}${x}${T}${L}${E}${q}${$}${V}`;return m.length>0?this.buildSetOperations(G,m):G}buildSetOperations(e,t){let[n,...s]=t;if(!n)throw new Error("Cannot pass undefined values to any set operator");return s.length===0?this.buildSetOperationQuery({leftSelect:e,setOperator:n}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:n}),s)}buildSetOperationQuery({leftSelect:e,setOperator:{type:t,isAll:n,rightSelect:s,limit:i,orderBy:l,offset:a}}){let f=P`(${e.getSQL()}) `,w=P`(${s.getSQL()})`,h;if(l&&l.length>0){let m=[];for(let c of l)if(Q(c,U))m.push(P.identifier(c.name));else if(Q(c,W)){for(let y=0;y<c.queryChunks.length;y++){let S=c.queryChunks[y];Q(S,U)&&(c.queryChunks[y]=P.identifier(S.name))}m.push(P`${c}`)}else m.push(P`${c}`);h=P` order by ${P.join(m,P`, `)} `}let b=typeof i=="object"||typeof i=="number"&&i>=0?P` limit ${i}`:void 0,g=P.raw(`${t} ${n?"all ":""}`),v=a?P` offset ${a}`:void 0;return P`${f}${g}${w}${h}${b}${v}`}buildInsertQuery({table:e,values:t,onConflict:n,returning:s,withList:i,select:l,overridingSystemValue_:a}){let f=[],w=e[z.Symbol.Columns],h=Object.entries(w).filter(([S,C])=>!C.shouldDisableInsert()),b=h.map(([,S])=>P.identifier(this.casing.getColumnCasing(S)));if(l){let S=t;Q(S,W)?f.push(S):f.push(S.getSQL())}else{let S=t;f.push(P.raw("values "));for(let[C,N]of S.entries()){let R=[];for(let[O,x]of h){let L=N[O];if(L===void 0||Q(L,Me)&&L.value===void 0)if(x.defaultFn!==void 0){let E=x.defaultFn(),T=Q(E,W)?E:P.param(E,x);R.push(T)}else if(!x.default&&x.onUpdateFn!==void 0){let E=x.onUpdateFn(),T=Q(E,W)?E:P.param(E,x);R.push(T)}else R.push(P`default`);else R.push(L)}f.push(R),C<S.length-1&&f.push(P`, `)}}let g=this.buildWithCTE(i),v=P.join(f),m=s?P` returning ${this.buildSelection(s,{isSingleTable:!0})}`:void 0,c=n?P` on conflict ${n}`:void 0,y=a===!0?P`overriding system value `:void 0;return P`${g}insert into ${e} ${b} ${y}${v}${c}${m}`}buildRefreshMaterializedViewQuery({view:e,concurrently:t,withNoData:n}){let s=t?P` concurrently`:void 0,i=n?P` with no data`:void 0;return P`refresh materialized view${s} ${e}${i}`}prepareTyping(e){return Q(e,It)||Q(e,Lt)?"json":Q(e,Rt)?"decimal":Q(e,Ot)?"time":Q(e,$t)||Q(e,qt)?"timestamp":Q(e,Nt)||Q(e,kt)?"date":Q(e,Qt)?"uuid":"none"}sqlToQuery(e,t){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:t})}buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:n,table:s,tableConfig:i,queryConfig:l,tableAlias:a,nestedQueryRelation:f,joinOn:w}){let h=[],b,g,v=[],m,c=[];if(l===!0)h=Object.entries(i.columns).map(([C,N])=>({dbKey:N.name,tsKey:C,field:Ke(N,a),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let S=Object.fromEntries(Object.entries(i.columns).map(([L,E])=>[L,Ke(E,a)]));if(l.where){let L=typeof l.where=="function"?l.where(S,ta()):l.where;m=L&&sr(L,a)}let C=[],N=[];if(l.columns){let L=!1;for(let[E,T]of Object.entries(l.columns))T!==void 0&&E in i.columns&&(!L&&T===!0&&(L=!0),N.push(E));N.length>0&&(N=L?N.filter(E=>l.columns?.[E]===!0):Object.keys(i.columns).filter(E=>!N.includes(E)))}else N=Object.keys(i.columns);for(let L of N){let E=i.columns[L];C.push({tsKey:L,value:E})}let R=[];l.with&&(R=Object.entries(l.with).filter(L=>!!L[1]).map(([L,E])=>({tsKey:L,queryConfig:E,relation:i.relations[L]})));let O;if(l.extras){O=typeof l.extras=="function"?l.extras(S,{sql:P}):l.extras;for(let[L,E]of Object.entries(O))C.push({tsKey:L,value:ii(E,a)})}for(let{tsKey:L,value:E}of C)h.push({dbKey:Q(E,W.Aliased)?E.fieldAlias:i.columns[L].name,tsKey:L,field:Q(E,ce)?Ke(E,a):E,relationTableTsKey:void 0,isJson:!1,selection:[]});let x=typeof l.orderBy=="function"?l.orderBy(S,ra()):l.orderBy??[];Array.isArray(x)||(x=[x]),v=x.map(L=>Q(L,ce)?Ke(L,a):sr(L,a)),b=l.limit,g=l.offset;for(let{tsKey:L,queryConfig:E,relation:T}of R){let q=sa(t,n,T),$=pt(T.referencedTable),V=n[$],G=`${a}_${L}`,M=ir(...q.fields.map((X,F)=>Vr(Ke(q.references[F],G),Ke(X,a)))),B=this.buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:n,table:e[V],tableConfig:t[V],queryConfig:Q(T,Ze)?E===!0?{limit:1}:{...E,limit:1}:E,tableAlias:G,joinOn:M,nestedQueryRelation:T}),H=P`${P.identifier(G)}.${P.identifier("data")}`.as(L);c.push({on:P`true`,table:new we(B.sql,{},G),alias:G,joinType:"left",lateral:!0}),h.push({dbKey:L,tsKey:L,field:H,relationTableTsKey:V,isJson:!0,selection:B.selection})}}if(h.length===0)throw new Bt({message:`No fields selected for table "${i.tsName}" ("${a}")`});let y;if(m=ir(w,m),f){let S=P`json_build_array(${P.join(h.map(({field:R,tsKey:O,isJson:x})=>x?P`${P.identifier(`${a}_${O}`)}.${P.identifier("data")}`:Q(R,W.Aliased)?R.sql:R),P`, `)})`;Q(f,Ft)&&(S=P`coalesce(json_agg(${S}${v.length>0?P` order by ${P.join(v,P`, `)}`:void 0}), '[]'::json)`);let C=[{dbKey:"data",tsKey:"data",field:S.as("data"),isJson:!0,relationTableTsKey:i.tsName,selection:h}];b!==void 0||g!==void 0||v.length>0?(y=this.buildSelectQuery({table:nr(s,a),fields:{},fieldsFlat:[{path:[],field:P.raw("*")}],where:m,limit:b,offset:g,orderBy:v,setOperators:[]}),m=void 0,b=void 0,g=void 0,v=[]):y=nr(s,a),y=this.buildSelectQuery({table:Q(y,Ce)?y:new we(y,{},a),fields:{},fieldsFlat:C.map(({field:R})=>({path:[],field:Q(R,ce)?Ke(R,a):R})),joins:c,where:m,limit:b,offset:g,orderBy:v,setOperators:[]})}else y=this.buildSelectQuery({table:nr(s,a),fields:{},fieldsFlat:h.map(({field:S})=>({path:[],field:Q(S,ce)?Ke(S,a):S})),joins:c,where:m,limit:b,offset:g,orderBy:v,setOperators:[]});return{tableTsKey:i.tsName,sql:y,selection:h}}};mh=_,A(Xe,mh,"PgDialect");var gh,fr=class{getSelectedFields(){return this._.selectedFields}};gh=_,A(fr,gh,"TypedQueryBuilder");var Eh,Le=class{fields;session;dialect;withList=[];distinct;constructor(e){this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}authToken;setToken(e){return this.authToken=e,this}from(e){let t=!!this.fields,n=e,s;return this.fields?s=this.fields:Q(n,we)?s=Object.fromEntries(Object.keys(n._.selectedFields).map(i=>[i,n[i]])):Q(n,gt)?s=n[de].selectedFields:Q(n,W)?s={}:s=Co(n),new dr({table:n,fields:s,isPartialSelect:t,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}};Eh=_,A(Le,Eh,"PgSelectBuilder");var _h,gs=class extends fr{_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;constructor({table:e,fields:t,isPartialSelect:n,session:s,dialect:i,withList:l,distinct:a}){super(),this.config={withList:l,table:e,fields:{...t},distinct:a,setOperators:[]},this.isPartialSelect=n,this.session=s,this.dialect=i,this._={selectedFields:t},this.tableName=Ye(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}createJoin(e,t){return(n,s)=>{let i=this.tableName,l=Ye(n);if(typeof l=="string"&&this.config.joins?.some(a=>a.alias===l))throw new Error(`Alias "${l}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof i=="string"&&(this.config.fields={[i]:this.config.fields}),typeof l=="string"&&!Q(n,W))){let a=Q(n,we)?n._.selectedFields:Q(n,Re)?n[de].selectedFields:n[z.Symbol.Columns];this.config.fields[l]=a}if(typeof s=="function"&&(s=s(new Proxy(this.config.fields,new me({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:s,table:n,joinType:e,alias:l,lateral:t}),typeof l=="string")switch(e){case"left":{this.joinsNotNullableMap[l]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[l]=!0;break}case"cross":case"inner":{this.joinsNotNullableMap[l]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[l]=!1;break}}return this}}leftJoin=this.createJoin("left",!1);leftJoinLateral=this.createJoin("left",!0);rightJoin=this.createJoin("right",!1);innerJoin=this.createJoin("inner",!1);innerJoinLateral=this.createJoin("inner",!0);fullJoin=this.createJoin("full",!1);crossJoin=this.createJoin("cross",!1);crossJoinLateral=this.createJoin("cross",!0);createSetOperator(e,t){return n=>{let s=typeof n=="function"?n(yh()):n;if(!or(this.getSelectedFields(),s.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:t,rightSelect:s}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new me({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new me({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if(typeof e[0]=="function"){let t=e[0](new Proxy(this.config.fields,new me({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(t)?t:[t]}else this.config.groupBy=e;return this}orderBy(...e){if(typeof e[0]=="function"){let t=e[0](new Proxy(this.config.fields,new me({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),n=Array.isArray(t)?t:[t];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=n:this.config.orderBy=n}else{let t=e;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=t:this.config.orderBy=t}return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}for(e,t={}){return this.config.lockingClause={strength:e,config:t},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}as(e){return new Proxy(new we(this.getSQL(),this.config.fields,e),new me({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new me({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}};_h=_,A(gs,_h,"PgSelectQueryBuilder");var Ah,dr=class extends gs{_prepare(e){let{session:t,config:n,dialect:s,joinsNotNullableMap:i,authToken:l}=this;if(!t)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");return xe.startActiveSpan("drizzle.prepareQuery",()=>{let a=De(n.fields),f=t.prepareQuery(s.sqlToQuery(this.getSQL()),a,e,!0);return f.joinsNotNullableMap=i,f.setToken(l)})}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>xe.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken))};Ah=_,A(dr,Ah,"PgSelect");xo(dr,[Pe]);function jt(r,e){return(t,n,...s)=>{let i=[n,...s].map(l=>({type:r,isAll:e,rightSelect:l}));for(let l of i)if(!or(t.getSelectedFields(),l.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return t.addSetOperators(i)}}var yh=()=>({union:bh,unionAll:wh,intersect:vh,intersectAll:Sh,except:xh,exceptAll:Ch}),bh=jt("union",!1),wh=jt("union",!0),vh=jt("intersect",!1),Sh=jt("intersect",!0),xh=jt("except",!1),Ch=jt("except",!0);var Th,yt=class{dialect;dialectConfig;constructor(e){this.dialect=Q(e,Xe)?e:void 0,this.dialectConfig=Q(e,Xe)?void 0:e}$with=(e,t)=>{let n=this;return{as:i=>(typeof i=="function"&&(i=i(n)),new Proxy(new dt(i.getSQL(),t??("getSelectedFields"in i?i.getSelectedFields()??{}:{}),e,!0),new me({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...e){let t=this;function n(l){return new Le({fields:l??void 0,session:void 0,dialect:t.getDialect(),withList:e})}function s(l){return new Le({fields:l??void 0,session:void 0,dialect:t.getDialect(),distinct:!0})}function i(l,a){return new Le({fields:a??void 0,session:void 0,dialect:t.getDialect(),distinct:{on:l}})}return{select:n,selectDistinct:s,selectDistinctOn:i}}select(e){return new Le({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new Le({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(e,t){return new Le({fields:t??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:e}})}getDialect(){return this.dialect||(this.dialect=new Xe(this.dialectConfig)),this.dialect}};Th=_,A(yt,Th,"PgQueryBuilder");var Nh,Ut=class{constructor(e,t,n,s,i){this.table=e,this.session=t,this.dialect=n,this.withList=s,this.overridingSystemValue_=i}authToken;setToken(e){return this.authToken=e,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(e){if(e=Array.isArray(e)?e:[e],e.length===0)throw new Error("values() must be called with at least one value");let t=e.map(n=>{let s={},i=this.table[z.Symbol.Columns];for(let l of Object.keys(n)){let a=n[l];s[l]=Q(a,W)?a:new Me(a,i[l])}return s});return new pr(this.table,t,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(e){let t=typeof e=="function"?e(new yt):e;if(!Q(t,W)&&!or(this.table[Ur],t._.selectedFields))throw new Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new pr(this.table,t,this.session,this.dialect,this.withList,!0)}};Nh=_,A(Ut,Nh,"PgInsertBuilder");var kh,pr=class extends Pe{constructor(e,t,n,s,i,l,a){super(),this.session=n,this.dialect=s,this.config={table:e,values:t,withList:i,select:l,overridingSystemValue_:a}}config;returning(e=this.config.table[z.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=De(e),this}onConflictDoNothing(e={}){if(e.target===void 0)this.config.onConflict=P`do nothing`;else{let t="";t=Array.isArray(e.target)?e.target.map(s=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(s))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target));let n=e.where?P` where ${e.where}`:void 0;this.config.onConflict=P`(${P.raw(t)})${n} do nothing`}return this}onConflictDoUpdate(e){if(e.where&&(e.targetWhere||e.setWhere))throw new Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let t=e.where?P` where ${e.where}`:void 0,n=e.targetWhere?P` where ${e.targetWhere}`:void 0,s=e.setWhere?P` where ${e.setWhere}`:void 0,i=this.dialect.buildUpdateSet(this.config.table,Kr(this.config.table,e.set)),l="";return l=Array.isArray(e.target)?e.target.map(a=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(a))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target)),this.config.onConflict=P`(${P.raw(l)})${n} do update set ${i}${t}${s}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return xe.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>xe.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new me({alias:Oe(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};kh=_,A(pr,kh,"PgInsert");var Ph,mr=class extends Pe{constructor(e,t,n){super(),this.session=t,this.dialect=n,this.config={view:e}}config;concurrently(){if(this.config.withNoData!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(this.config.concurrently!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return xe.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>xe.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken))};Ph=_,A(mr,Ph,"PgRefreshMaterializedView");var Lh,zt=class{constructor(e,t,n,s){this.table=e,this.session=t,this.dialect=n,this.withList=s}authToken;setToken(e){return this.authToken=e,this}set(e){return new ys(this.table,Kr(this.table,e),this.session,this.dialect,this.withList).setToken(this.authToken)}};Lh=_,A(zt,Lh,"PgUpdateBuilder");var Ih,ys=class extends Pe{constructor(e,t,n,s,i){super(),this.session=n,this.dialect=s,this.config={set:t,table:e,withList:i,joins:[]},this.tableName=Ye(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}config;tableName;joinsNotNullableMap;from(e){let t=e,n=Ye(t);return typeof n=="string"&&(this.joinsNotNullableMap[n]=!0),this.config.from=t,this}getTableLikeFields(e){return Q(e,Ce)?e[z.Symbol.Columns]:Q(e,we)?e._.selectedFields:e[de].selectedFields}createJoin(e){return(t,n)=>{let s=Ye(t);if(typeof s=="string"&&this.config.joins.some(i=>i.alias===s))throw new Error(`Alias "${s}" is already used in this query`);if(typeof n=="function"){let i=this.config.from&&!Q(this.config.from,W)?this.getTableLikeFields(this.config.from):void 0;n=n(new Proxy(this.config.table[z.Symbol.Columns],new me({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),i&&new Proxy(i,new me({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:n,table:t,joinType:e,alias:s}),typeof s=="string")switch(e){case"left":{this.joinsNotNullableMap[s]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([i])=>[i,!1])),this.joinsNotNullableMap[s]=!0;break}case"inner":{this.joinsNotNullableMap[s]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([i])=>[i,!1])),this.joinsNotNullableMap[s]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(e){return this.config.where=e,this}returning(e){if(!e&&(e=Object.assign({},this.config.table[z.Symbol.Columns]),this.config.from)){let t=Ye(this.config.from);if(typeof t=="string"&&this.config.from&&!Q(this.config.from,W)){let n=this.getTableLikeFields(this.config.from);e[t]=n}for(let n of this.config.joins){let s=Ye(n.table);if(typeof s=="string"&&!Q(n.table,W)){let i=this.getTableLikeFields(n.table);e[s]=i}}}return this.config.returningFields=e,this.config.returning=De(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){let t=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0);return t.joinsNotNullableMap=this.joinsNotNullableMap,t}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>this._prepare().execute(e,this.authToken);getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new me({alias:Oe(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};Ih=_,A(ys,Ih,"PgUpdate");var Rh,bs=class extends W{constructor(e){super(bs.buildEmbeddedCount(e.source,e.filters).queryChunks),this.params=e,this.mapWith(Number),this.session=e.session,this.sql=bs.buildCount(e.source,e.filters)}sql;token;[(Rh=_,Symbol.toStringTag)]="PgCountBuilder";session;static buildEmbeddedCount(e,t){return P`(select count(*) from ${e}${P.raw(" where ").if(t)}${t})`}static buildCount(e,t){return P`select count(*) as count from ${e}${P.raw(" where ").if(t)}${t};`}setToken(e){return this.token=e,this}then(e,t){return Promise.resolve(this.session.count(this.sql,this.token)).then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}},gr=bs;A(gr,Rh,"PgCountBuilder");var Mh,yr=class{constructor(e,t,n,s,i,l,a){this.fullSchema=e,this.schema=t,this.tableNamesMap=n,this.table=s,this.tableConfig=i,this.dialect=l,this.session=a}findMany(e){return new br(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return new br(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}};Mh=_,A(yr,Mh,"PgRelationalQueryBuilder");var Oh,br=class extends Pe{constructor(e,t,n,s,i,l,a,f,w){super(),this.fullSchema=e,this.schema=t,this.tableNamesMap=n,this.table=s,this.tableConfig=i,this.dialect=l,this.session=a,this.config=f,this.mode=w}_prepare(e){return xe.startActiveSpan("drizzle.prepareQuery",()=>{let{query:t,builtQuery:n}=this._toSQL();return this.session.prepareQuery(n,void 0,e,!0,(s,i)=>{let l=s.map(a=>ms(this.schema,this.tableConfig,a,t.selection,i));return this.mode==="first"?l[0]:l})})}prepare(e){return this._prepare(e)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let e=this._getQuery(),t=this.dialect.sqlToQuery(e.sql);return{query:e,builtQuery:t}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(e){return this.authToken=e,this}execute(){return xe.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}};Oh=_,A(br,Oh,"PgRelationalQuery");var $h,wr=class extends Pe{constructor(e,t,n,s){super(),this.execute=e,this.sql=t,this.query=n,this.mapBatchResult=s}getSQL(){return this.sql}getQuery(){return this.query}mapResult(e,t){return t?this.mapBatchResult(e):e}_prepare(){return this}isResponseInArrayMode(){return!1}};$h=_,A(wr,$h,"PgRaw");var qh,bt=class{constructor(e,t,n){if(this.dialect=e,this.session=t,this._=n?{schema:n.schema,fullSchema:n.fullSchema,tableNamesMap:n.tableNamesMap,session:t}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:t},this.query={},this._.schema)for(let[s,i]of Object.entries(this._.schema))this.query[s]=new yr(n.fullSchema,this._.schema,this._.tableNamesMap,n.fullSchema[s],i,e,t)}query;$with=(e,t)=>{let n=this;return{as:i=>(typeof i=="function"&&(i=i(new yt(n.dialect))),new Proxy(new dt(i.getSQL(),t??("getSelectedFields"in i?i.getSelectedFields()??{}:{}),e,!0),new me({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(e,t){return new gr({source:e,filters:t,session:this.session})}with(...e){let t=this;function n(w){return new Le({fields:w??void 0,session:t.session,dialect:t.dialect,withList:e})}function s(w){return new Le({fields:w??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:!0})}function i(w,h){return new Le({fields:h??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:{on:w}})}function l(w){return new zt(w,t.session,t.dialect,e)}function a(w){return new Ut(w,t.session,t.dialect,e)}function f(w){return new Dt(w,t.session,t.dialect,e)}return{select:n,selectDistinct:s,selectDistinctOn:i,update:l,insert:a,delete:f}}select(e){return new Le({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new Le({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(e,t){return new Le({fields:t??void 0,session:this.session,dialect:this.dialect,distinct:{on:e}})}update(e){return new zt(e,this.session,this.dialect)}insert(e){return new Ut(e,this.session,this.dialect)}delete(e){return new Dt(e,this.session,this.dialect)}refreshMaterializedView(e){return new mr(e,this.session,this.dialect)}authToken;execute(e){let t=typeof e=="string"?P.raw(e):e.getSQL(),n=this.dialect.sqlToQuery(t),s=this.session.prepareQuery(n,void 0,void 0,!1);return new wr(()=>s.execute(void 0,this.authToken),t,n,i=>s.mapResult(i,!0))}transaction(e,t){return this.session.transaction(e,t)}};qh=_,A(bt,qh,"PgDatabase");var Qh,ws=class{constructor(e,t){this.unique=e,this.name=t}on(...e){return new Vt(e.map(t=>{if(Q(t,W))return t;t=t;let n=new ft(t.name,!!t.keyAsName,t.columnType,t.indexConfig);return t.indexConfig=JSON.parse(JSON.stringify(t.defaultConfig)),n}),this.unique,!1,this.name)}onOnly(...e){return new Vt(e.map(t=>{if(Q(t,W))return t;t=t;let n=new ft(t.name,!!t.keyAsName,t.columnType,t.indexConfig);return t.indexConfig=t.defaultConfig,n}),this.unique,!0,this.name)}using(e,...t){return new Vt(t.map(n=>{if(Q(n,W))return n;n=n;let s=new ft(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=JSON.parse(JSON.stringify(n.defaultConfig)),s}),this.unique,!0,this.name,e)}};Qh=_,A(ws,Qh,"PgIndexBuilderOn");var Dh,Vt=class{config;constructor(e,t,n,s,i="btree"){this.config={name:s,columns:e,unique:t,only:n,method:i}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new vs(this.config,e)}};Dh=_,A(Vt,Dh,"PgIndexBuilder");var Bh,vs=class{config;constructor(e,t){this.config={...e,table:t}}};Bh=_,A(vs,Bh,"PgIndex");function wt(r){return new ws(!1,r)}var Fh,vr=class{constructor(e){this.query=e}authToken;getQuery(){return this.query}mapResult(e,t){return e}setToken(e){return this.authToken=e,this}joinsNotNullableMap};Fh=_,A(vr,Fh,"PgPreparedQuery");var jh,Sr=class{constructor(e){this.dialect=e}execute(e,t){return xe.startActiveSpan("drizzle.operation",()=>xe.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1)).setToken(t).execute(void 0,t))}all(e){return this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1).all()}async count(e,t){let n=await this.execute(e,t);return Number(n[0].count)}};jh=_,A(Sr,jh,"PgSession");var Uh,xr=class extends bt{constructor(e,t,n,s=0){super(e,t,n),this.schema=n,this.nestedIndex=s}rollback(){throw new cr}getTransactionConfigSQL(e){let t=[];return e.isolationLevel&&t.push(`isolation level ${e.isolationLevel}`),e.accessMode&&t.push(e.accessMode),typeof e.deferrable=="boolean"&&t.push(e.deferrable?"deferrable":"not deferrable"),P.raw(t.join(" "))}setTransaction(e){return this.session.execute(P`set transaction ${this.getTransactionConfigSQL(e)}`)}};Uh=_,A(xr,Uh,"PgTransaction");var at=ot("user",{id:le("id").primaryKey(),name:le("name").notNull(),email:le("email").notNull().unique(),emailVerified:ar("email_verified").notNull(),image:le("image"),bio:le("bio"),location:le("location"),username:le("username").unique(),createdAt:Te("created_at").notNull(),updatedAt:Te("updated_at").notNull()},r=>({idx_user_created_at:wt("idx_user_created_at").on(r.createdAt)})),oa=ot("session",{id:le("id").primaryKey(),expiresAt:Te("expires_at").notNull(),token:le("token").notNull().unique(),createdAt:Te("created_at").notNull(),updatedAt:Te("updated_at").notNull(),ipAddress:le("ip_address"),userAgent:le("user_agent"),userId:le("user_id").notNull().references(()=>at.id,{onDelete:"cascade"})}),aa=ot("account",{id:le("id").primaryKey(),accountId:le("account_id").notNull(),providerId:le("provider_id").notNull(),userId:le("user_id").notNull().references(()=>at.id,{onDelete:"cascade"}),accessToken:le("access_token"),refreshToken:le("refresh_token"),idToken:le("id_token"),accessTokenExpiresAt:Te("access_token_expires_at"),refreshTokenExpiresAt:Te("refresh_token_expires_at"),scope:le("scope"),password:le("password"),createdAt:Te("created_at").notNull(),updatedAt:Te("updated_at").notNull()}),la=ot("verification",{id:le("id").primaryKey(),identifier:le("identifier").notNull(),value:le("value").notNull(),expiresAt:Te("expires_at").notNull(),createdAt:Te("created_at"),updatedAt:Te("updated_at")}),hi=ot("video",{id:Mt("id").primaryKey(),userId:le("user_id").notNull().references(()=>at.id,{onDelete:"cascade"}),url:le("url").notNull(),title:le("title"),createdAt:Te("created_at").notNull().default(P`now()`),thumbsUp:Pt("thumbs_up").notNull().default(0),thumbsDown:Pt("thumbs_down").notNull().default(0)},r=>({idx_video_created:wt("idx_video_created").on(r.createdAt)})),ca=ot("video_comment",{id:Mt("id").primaryKey(),videoId:Pt("video_id").notNull().references(()=>hi.id,{onDelete:"cascade"}),userId:le("user_id").notNull().references(()=>at.id,{onDelete:"cascade"}),body:le("body").notNull(),createdAt:Te("created_at").notNull().default(P`now()`)},r=>({idx_comment_video:wt("idx_comment_video").on(r.videoId)})),ua=ot("direct_message",{id:Mt("id").primaryKey(),senderId:le("sender_id").notNull().references(()=>at.id,{onDelete:"cascade"}),receiverId:le("receiver_id").notNull().references(()=>at.id,{onDelete:"cascade"}),message:le("message").notNull(),read:ar("read").notNull().default(!1),createdAt:Te("created_at").notNull().default(P`now()`)},r=>({idx_dm_sender:wt("idx_dm_sender").on(r.senderId),idx_dm_receiver:wt("idx_dm_receiver").on(r.receiverId),idx_dm_created:wt("idx_dm_created").on(r.createdAt)})),zh={user:at,session:oa,account:aa,verification:la,video:hi,videoComment:ca,directMessage:ua};var Vh=Object.create,Wt=Object.defineProperty,Kh=Object.getOwnPropertyDescriptor,Wh=Object.getOwnPropertyNames,Gh=Object.getPrototypeOf,Hh=Object.prototype.hasOwnProperty,Jh=(r,e,t)=>e in r?Wt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,p=(r,e)=>Wt(r,"name",{value:e,configurable:!0}),qe=(r,e)=>()=>(r&&(e=r(r=0)),e),se=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),ze=(r,e)=>{for(var t in e)Wt(r,t,{get:e[t],enumerable:!0})},ya=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Wh(e))!Hh.call(r,s)&&s!==t&&Wt(r,s,{get:()=>e[s],enumerable:!(n=Kh(e,s))||n.enumerable});return r},vt=(r,e,t)=>(t=r!=null?Vh(Gh(r)):{},ya(e||!r||!r.__esModule?Wt(t,"default",{value:r,enumerable:!0}):t,r)),Ne=r=>ya(Wt({},"__esModule",{value:!0}),r),re=(r,e,t)=>Jh(r,typeof e!="symbol"?e+"":e,t),Yh=se(r=>{"use strict";Z(),r.byteLength=f,r.toByteArray=h,r.fromByteArray=v;var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(i=0,l=s.length;i<l;++i)e[i]=s[i],t[s.charCodeAt(i)]=i;var i,l;t[45]=62,t[95]=63;function a(m){var c=m.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=m.indexOf("=");y===-1&&(y=c);var S=y===c?0:4-y%4;return[y,S]}p(a,"getLens");function f(m){var c=a(m),y=c[0],S=c[1];return(y+S)*3/4-S}p(f,"byteLength");function w(m,c,y){return(c+y)*3/4-y}p(w,"_byteLength");function h(m){var c,y=a(m),S=y[0],C=y[1],N=new n(w(m,S,C)),R=0,O=C>0?S-4:S,x;for(x=0;x<O;x+=4)c=t[m.charCodeAt(x)]<<18|t[m.charCodeAt(x+1)]<<12|t[m.charCodeAt(x+2)]<<6|t[m.charCodeAt(x+3)],N[R++]=c>>16&255,N[R++]=c>>8&255,N[R++]=c&255;return C===2&&(c=t[m.charCodeAt(x)]<<2|t[m.charCodeAt(x+1)]>>4,N[R++]=c&255),C===1&&(c=t[m.charCodeAt(x)]<<10|t[m.charCodeAt(x+1)]<<4|t[m.charCodeAt(x+2)]>>2,N[R++]=c>>8&255,N[R++]=c&255),N}p(h,"toByteArray");function b(m){return e[m>>18&63]+e[m>>12&63]+e[m>>6&63]+e[m&63]}p(b,"tripletToBase64");function g(m,c,y){for(var S,C=[],N=c;N<y;N+=3)S=(m[N]<<16&16711680)+(m[N+1]<<8&65280)+(m[N+2]&255),C.push(b(S));return C.join("")}p(g,"encodeChunk");function v(m){for(var c,y=m.length,S=y%3,C=[],N=16383,R=0,O=y-S;R<O;R+=N)C.push(g(m,R,R+N>O?O:R+N));return S===1?(c=m[y-1],C.push(e[c>>2]+e[c<<4&63]+"==")):S===2&&(c=(m[y-2]<<8)+m[y-1],C.push(e[c>>10]+e[c>>4&63]+e[c<<2&63]+"=")),C.join("")}p(v,"fromByteArray")}),Zh=se(r=>{Z(),r.read=function(e,t,n,s,i){var l,a,f=i*8-s-1,w=(1<<f)-1,h=w>>1,b=-7,g=n?i-1:0,v=n?-1:1,m=e[t+g];for(g+=v,l=m&(1<<-b)-1,m>>=-b,b+=f;b>0;l=l*256+e[t+g],g+=v,b-=8);for(a=l&(1<<-b)-1,l>>=-b,b+=s;b>0;a=a*256+e[t+g],g+=v,b-=8);if(l===0)l=1-h;else{if(l===w)return a?NaN:(m?-1:1)*(1/0);a=a+Math.pow(2,s),l=l-h}return(m?-1:1)*a*Math.pow(2,l-s)},r.write=function(e,t,n,s,i,l){var a,f,w,h=l*8-i-1,b=(1<<h)-1,g=b>>1,v=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=s?0:l-1,c=s?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(f=isNaN(t)?1:0,a=b):(a=Math.floor(Math.log(t)/Math.LN2),t*(w=Math.pow(2,-a))<1&&(a--,w*=2),a+g>=1?t+=v/w:t+=v*Math.pow(2,1-g),t*w>=2&&(a++,w/=2),a+g>=b?(f=0,a=b):a+g>=1?(f=(t*w-1)*Math.pow(2,i),a=a+g):(f=t*Math.pow(2,g-1)*Math.pow(2,i),a=0));i>=8;e[n+m]=f&255,m+=c,f/=256,i-=8);for(a=a<<i|f,h+=i;h>0;e[n+m]=a&255,m+=c,a/=256,h-=8);e[n+m-c]|=y*128}}),Xh=se(r=>{"use strict";Z();var e=Yh(),t=Zh(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=C,r.INSPECT_MAX_BYTES=50;var s=2147483647;r.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let o=new Uint8Array(1),u={foo:p(function(){return 42},"foo")};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(o,u),o.foo()===42}catch{return!1}}p(i,"typedArraySupport"),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:p(function(){if(a.isBuffer(this))return this.buffer},"get")}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:p(function(){if(a.isBuffer(this))return this.byteOffset},"get")});function l(o){if(o>s)throw new RangeError('The value "'+o+'" is invalid for option "size"');let u=new Uint8Array(o);return Object.setPrototypeOf(u,a.prototype),u}p(l,"createBuffer");function a(o,u,d){if(typeof o=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(o)}return f(o,u,d)}p(a,"Buffer"),a.poolSize=8192;function f(o,u,d){if(typeof o=="string")return g(o,u);if(ArrayBuffer.isView(o))return m(o);if(o==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o);if(Fe(o,ArrayBuffer)||o&&Fe(o.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Fe(o,SharedArrayBuffer)||o&&Fe(o.buffer,SharedArrayBuffer)))return c(o,u,d);if(typeof o=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let k=o.valueOf&&o.valueOf();if(k!=null&&k!==o)return a.from(k,u,d);let I=y(o);if(I)return I;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof o[Symbol.toPrimitive]=="function")return a.from(o[Symbol.toPrimitive]("string"),u,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o)}p(f,"from"),a.from=function(o,u,d){return f(o,u,d)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function w(o){if(typeof o!="number")throw new TypeError('"size" argument must be of type number');if(o<0)throw new RangeError('The value "'+o+'" is invalid for option "size"')}p(w,"assertSize");function h(o,u,d){return w(o),o<=0?l(o):u!==void 0?typeof d=="string"?l(o).fill(u,d):l(o).fill(u):l(o)}p(h,"alloc"),a.alloc=function(o,u,d){return h(o,u,d)};function b(o){return w(o),l(o<0?0:S(o)|0)}p(b,"allocUnsafe"),a.allocUnsafe=function(o){return b(o)},a.allocUnsafeSlow=function(o){return b(o)};function g(o,u){if((typeof u!="string"||u==="")&&(u="utf8"),!a.isEncoding(u))throw new TypeError("Unknown encoding: "+u);let d=N(o,u)|0,k=l(d),I=k.write(o,u);return I!==d&&(k=k.slice(0,I)),k}p(g,"fromString");function v(o){let u=o.length<0?0:S(o.length)|0,d=l(u);for(let k=0;k<u;k+=1)d[k]=o[k]&255;return d}p(v,"fromArrayLike");function m(o){if(Fe(o,Uint8Array)){let u=new Uint8Array(o);return c(u.buffer,u.byteOffset,u.byteLength)}return v(o)}p(m,"fromArrayView");function c(o,u,d){if(u<0||o.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(o.byteLength<u+(d||0))throw new RangeError('"length" is outside of buffer bounds');let k;return u===void 0&&d===void 0?k=new Uint8Array(o):d===void 0?k=new Uint8Array(o,u):k=new Uint8Array(o,u,d),Object.setPrototypeOf(k,a.prototype),k}p(c,"fromArrayBuffer");function y(o){if(a.isBuffer(o)){let u=S(o.length)|0,d=l(u);return d.length===0||o.copy(d,0,0,u),d}if(o.length!==void 0)return typeof o.length!="number"||Ir(o.length)?l(0):v(o);if(o.type==="Buffer"&&Array.isArray(o.data))return v(o.data)}p(y,"fromObject");function S(o){if(o>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return o|0}p(S,"checked");function C(o){return+o!=o&&(o=0),a.alloc(+o)}p(C,"SlowBuffer"),a.isBuffer=p(function(o){return o!=null&&o._isBuffer===!0&&o!==a.prototype},"isBuffer"),a.compare=p(function(o,u){if(Fe(o,Uint8Array)&&(o=a.from(o,o.offset,o.byteLength)),Fe(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),!a.isBuffer(o)||!a.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(o===u)return 0;let d=o.length,k=u.length;for(let I=0,D=Math.min(d,k);I<D;++I)if(o[I]!==u[I]){d=o[I],k=u[I];break}return d<k?-1:k<d?1:0},"compare"),a.isEncoding=p(function(o){switch(String(o).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),a.concat=p(function(o,u){if(!Array.isArray(o))throw new TypeError('"list" argument must be an Array of Buffers');if(o.length===0)return a.alloc(0);let d;if(u===void 0)for(u=0,d=0;d<o.length;++d)u+=o[d].length;let k=a.allocUnsafe(u),I=0;for(d=0;d<o.length;++d){let D=o[d];if(Fe(D,Uint8Array))I+D.length>k.length?(a.isBuffer(D)||(D=a.from(D)),D.copy(k,I)):Uint8Array.prototype.set.call(k,D,I);else if(a.isBuffer(D))D.copy(k,I);else throw new TypeError('"list" argument must be an Array of Buffers');I+=D.length}return k},"concat");function N(o,u){if(a.isBuffer(o))return o.length;if(ArrayBuffer.isView(o)||Fe(o,ArrayBuffer))return o.byteLength;if(typeof o!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof o);let d=o.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&d===0)return 0;let I=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":return Lr(o).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d*2;case"hex":return d>>>1;case"base64":return Vs(o).length;default:if(I)return k?-1:Lr(o).length;u=(""+u).toLowerCase(),I=!0}}p(N,"byteLength"),a.byteLength=N;function R(o,u,d){let k=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((d===void 0||d>this.length)&&(d=this.length),d<=0)||(d>>>=0,u>>>=0,d<=u))return"";for(o||(o="utf8");;)switch(o){case"hex":return oe(this,u,d);case"utf8":case"utf-8":return M(this,u,d);case"ascii":return X(this,u,d);case"latin1":case"binary":return F(this,u,d);case"base64":return G(this,u,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,u,d);default:if(k)throw new TypeError("Unknown encoding: "+o);o=(o+"").toLowerCase(),k=!0}}p(R,"slowToString"),a.prototype._isBuffer=!0;function O(o,u,d){let k=o[u];o[u]=o[d],o[d]=k}p(O,"swap"),a.prototype.swap16=p(function(){let o=this.length;if(o%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<o;u+=2)O(this,u,u+1);return this},"swap16"),a.prototype.swap32=p(function(){let o=this.length;if(o%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<o;u+=4)O(this,u,u+3),O(this,u+1,u+2);return this},"swap32"),a.prototype.swap64=p(function(){let o=this.length;if(o%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<o;u+=8)O(this,u,u+7),O(this,u+1,u+6),O(this,u+2,u+5),O(this,u+3,u+4);return this},"swap64"),a.prototype.toString=p(function(){let o=this.length;return o===0?"":arguments.length===0?M(this,0,o):R.apply(this,arguments)},"toString"),a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=p(function(o){if(!a.isBuffer(o))throw new TypeError("Argument must be a Buffer");return this===o?!0:a.compare(this,o)===0},"equals"),a.prototype.inspect=p(function(){let o="",u=r.INSPECT_MAX_BYTES;return o=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(o+=" ... "),"<Buffer "+o+">"},"inspect"),n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=p(function(o,u,d,k,I){if(Fe(o,Uint8Array)&&(o=a.from(o,o.offset,o.byteLength)),!a.isBuffer(o))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof o);if(u===void 0&&(u=0),d===void 0&&(d=o?o.length:0),k===void 0&&(k=0),I===void 0&&(I=this.length),u<0||d>o.length||k<0||I>this.length)throw new RangeError("out of range index");if(k>=I&&u>=d)return 0;if(k>=I)return-1;if(u>=d)return 1;if(u>>>=0,d>>>=0,k>>>=0,I>>>=0,this===o)return 0;let D=I-k,j=d-u,he=Math.min(D,j),Ae=this.slice(k,I),pe=o.slice(u,d);for(let fe=0;fe<he;++fe)if(Ae[fe]!==pe[fe]){D=Ae[fe],j=pe[fe];break}return D<j?-1:j<D?1:0},"compare");function x(o,u,d,k,I){if(o.length===0)return-1;if(typeof d=="string"?(k=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),d=+d,Ir(d)&&(d=I?0:o.length-1),d<0&&(d=o.length+d),d>=o.length){if(I)return-1;d=o.length-1}else if(d<0)if(I)d=0;else return-1;if(typeof u=="string"&&(u=a.from(u,k)),a.isBuffer(u))return u.length===0?-1:L(o,u,d,k,I);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?I?Uint8Array.prototype.indexOf.call(o,u,d):Uint8Array.prototype.lastIndexOf.call(o,u,d):L(o,[u],d,k,I);throw new TypeError("val must be string, number or Buffer")}p(x,"bidirectionalIndexOf");function L(o,u,d,k,I){let D=1,j=o.length,he=u.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(o.length<2||u.length<2)return-1;D=2,j/=2,he/=2,d/=2}function Ae(fe,Se){return D===1?fe[Se]:fe.readUInt16BE(Se*D)}p(Ae,"read");let pe;if(I){let fe=-1;for(pe=d;pe<j;pe++)if(Ae(o,pe)===Ae(u,fe===-1?0:pe-fe)){if(fe===-1&&(fe=pe),pe-fe+1===he)return fe*D}else fe!==-1&&(pe-=pe-fe),fe=-1}else for(d+he>j&&(d=j-he),pe=d;pe>=0;pe--){let fe=!0;for(let Se=0;Se<he;Se++)if(Ae(o,pe+Se)!==Ae(u,Se)){fe=!1;break}if(fe)return pe}return-1}p(L,"arrayIndexOf"),a.prototype.includes=p(function(o,u,d){return this.indexOf(o,u,d)!==-1},"includes"),a.prototype.indexOf=p(function(o,u,d){return x(this,o,u,d,!0)},"indexOf"),a.prototype.lastIndexOf=p(function(o,u,d){return x(this,o,u,d,!1)},"lastIndexOf");function E(o,u,d,k){d=Number(d)||0;let I=o.length-d;k?(k=Number(k),k>I&&(k=I)):k=I;let D=u.length;k>D/2&&(k=D/2);let j;for(j=0;j<k;++j){let he=parseInt(u.substr(j*2,2),16);if(Ir(he))return j;o[d+j]=he}return j}p(E,"hexWrite");function T(o,u,d,k){return Zt(Lr(u,o.length-d),o,d,k)}p(T,"utf8Write");function q(o,u,d,k){return Zt(qi(u),o,d,k)}p(q,"asciiWrite");function $(o,u,d,k){return Zt(Vs(u),o,d,k)}p($,"base64Write");function V(o,u,d,k){return Zt(Qi(u,o.length-d),o,d,k)}p(V,"ucs2Write"),a.prototype.write=p(function(o,u,d,k){if(u===void 0)k="utf8",d=this.length,u=0;else if(d===void 0&&typeof u=="string")k=u,d=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(d)?(d=d>>>0,k===void 0&&(k="utf8")):(k=d,d=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let I=this.length-u;if((d===void 0||d>I)&&(d=I),o.length>0&&(d<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");k||(k="utf8");let D=!1;for(;;)switch(k){case"hex":return E(this,o,u,d);case"utf8":case"utf-8":return T(this,o,u,d);case"ascii":case"latin1":case"binary":return q(this,o,u,d);case"base64":return $(this,o,u,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,o,u,d);default:if(D)throw new TypeError("Unknown encoding: "+k);k=(""+k).toLowerCase(),D=!0}},"write"),a.prototype.toJSON=p(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON");function G(o,u,d){return u===0&&d===o.length?e.fromByteArray(o):e.fromByteArray(o.slice(u,d))}p(G,"base64Slice");function M(o,u,d){d=Math.min(o.length,d);let k=[],I=u;for(;I<d;){let D=o[I],j=null,he=D>239?4:D>223?3:D>191?2:1;if(I+he<=d){let Ae,pe,fe,Se;switch(he){case 1:D<128&&(j=D);break;case 2:Ae=o[I+1],(Ae&192)===128&&(Se=(D&31)<<6|Ae&63,Se>127&&(j=Se));break;case 3:Ae=o[I+1],pe=o[I+2],(Ae&192)===128&&(pe&192)===128&&(Se=(D&15)<<12|(Ae&63)<<6|pe&63,Se>2047&&(Se<55296||Se>57343)&&(j=Se));break;case 4:Ae=o[I+1],pe=o[I+2],fe=o[I+3],(Ae&192)===128&&(pe&192)===128&&(fe&192)===128&&(Se=(D&15)<<18|(Ae&63)<<12|(pe&63)<<6|fe&63,Se>65535&&Se<1114112&&(j=Se))}}j===null?(j=65533,he=1):j>65535&&(j-=65536,k.push(j>>>10&1023|55296),j=56320|j&1023),k.push(j),I+=he}return H(k)}p(M,"utf8Slice");var B=4096;function H(o){let u=o.length;if(u<=B)return String.fromCharCode.apply(String,o);let d="",k=0;for(;k<u;)d+=String.fromCharCode.apply(String,o.slice(k,k+=B));return d}p(H,"decodeCodePointsArray");function X(o,u,d){let k="";d=Math.min(o.length,d);for(let I=u;I<d;++I)k+=String.fromCharCode(o[I]&127);return k}p(X,"asciiSlice");function F(o,u,d){let k="";d=Math.min(o.length,d);for(let I=u;I<d;++I)k+=String.fromCharCode(o[I]);return k}p(F,"latin1Slice");function oe(o,u,d){let k=o.length;(!u||u<0)&&(u=0),(!d||d<0||d>k)&&(d=k);let I="";for(let D=u;D<d;++D)I+=Ol[o[D]];return I}p(oe,"hexSlice");function Ie(o,u,d){let k=o.slice(u,d),I="";for(let D=0;D<k.length-1;D+=2)I+=String.fromCharCode(k[D]+k[D+1]*256);return I}p(Ie,"utf16leSlice"),a.prototype.slice=p(function(o,u){let d=this.length;o=~~o,u=u===void 0?d:~~u,o<0?(o+=d,o<0&&(o=0)):o>d&&(o=d),u<0?(u+=d,u<0&&(u=0)):u>d&&(u=d),u<o&&(u=o);let k=this.subarray(o,u);return Object.setPrototypeOf(k,a.prototype),k},"slice");function ue(o,u,d){if(o%1!==0||o<0)throw new RangeError("offset is not uint");if(o+u>d)throw new RangeError("Trying to access beyond buffer length")}p(ue,"checkOffset"),a.prototype.readUintLE=a.prototype.readUIntLE=p(function(o,u,d){o=o>>>0,u=u>>>0,d||ue(o,u,this.length);let k=this[o],I=1,D=0;for(;++D<u&&(I*=256);)k+=this[o+D]*I;return k},"readUIntLE"),a.prototype.readUintBE=a.prototype.readUIntBE=p(function(o,u,d){o=o>>>0,u=u>>>0,d||ue(o,u,this.length);let k=this[o+--u],I=1;for(;u>0&&(I*=256);)k+=this[o+--u]*I;return k},"readUIntBE"),a.prototype.readUint8=a.prototype.readUInt8=p(function(o,u){return o=o>>>0,u||ue(o,1,this.length),this[o]},"readUInt8"),a.prototype.readUint16LE=a.prototype.readUInt16LE=p(function(o,u){return o=o>>>0,u||ue(o,2,this.length),this[o]|this[o+1]<<8},"readUInt16LE"),a.prototype.readUint16BE=a.prototype.readUInt16BE=p(function(o,u){return o=o>>>0,u||ue(o,2,this.length),this[o]<<8|this[o+1]},"readUInt16BE"),a.prototype.readUint32LE=a.prototype.readUInt32LE=p(function(o,u){return o=o>>>0,u||ue(o,4,this.length),(this[o]|this[o+1]<<8|this[o+2]<<16)+this[o+3]*16777216},"readUInt32LE"),a.prototype.readUint32BE=a.prototype.readUInt32BE=p(function(o,u){return o=o>>>0,u||ue(o,4,this.length),this[o]*16777216+(this[o+1]<<16|this[o+2]<<8|this[o+3])},"readUInt32BE"),a.prototype.readBigUInt64LE=Je(p(function(o){o=o>>>0,ut(o,"offset");let u=this[o],d=this[o+7];(u===void 0||d===void 0)&&_t(o,this.length-8);let k=u+this[++o]*2**8+this[++o]*2**16+this[++o]*2**24,I=this[++o]+this[++o]*2**8+this[++o]*2**16+d*2**24;return BigInt(k)+(BigInt(I)<<BigInt(32))},"readBigUInt64LE")),a.prototype.readBigUInt64BE=Je(p(function(o){o=o>>>0,ut(o,"offset");let u=this[o],d=this[o+7];(u===void 0||d===void 0)&&_t(o,this.length-8);let k=u*2**24+this[++o]*2**16+this[++o]*2**8+this[++o],I=this[++o]*2**24+this[++o]*2**16+this[++o]*2**8+d;return(BigInt(k)<<BigInt(32))+BigInt(I)},"readBigUInt64BE")),a.prototype.readIntLE=p(function(o,u,d){o=o>>>0,u=u>>>0,d||ue(o,u,this.length);let k=this[o],I=1,D=0;for(;++D<u&&(I*=256);)k+=this[o+D]*I;return I*=128,k>=I&&(k-=Math.pow(2,8*u)),k},"readIntLE"),a.prototype.readIntBE=p(function(o,u,d){o=o>>>0,u=u>>>0,d||ue(o,u,this.length);let k=u,I=1,D=this[o+--k];for(;k>0&&(I*=256);)D+=this[o+--k]*I;return I*=128,D>=I&&(D-=Math.pow(2,8*u)),D},"readIntBE"),a.prototype.readInt8=p(function(o,u){return o=o>>>0,u||ue(o,1,this.length),this[o]&128?(255-this[o]+1)*-1:this[o]},"readInt8"),a.prototype.readInt16LE=p(function(o,u){o=o>>>0,u||ue(o,2,this.length);let d=this[o]|this[o+1]<<8;return d&32768?d|4294901760:d},"readInt16LE"),a.prototype.readInt16BE=p(function(o,u){o=o>>>0,u||ue(o,2,this.length);let d=this[o+1]|this[o]<<8;return d&32768?d|4294901760:d},"readInt16BE"),a.prototype.readInt32LE=p(function(o,u){return o=o>>>0,u||ue(o,4,this.length),this[o]|this[o+1]<<8|this[o+2]<<16|this[o+3]<<24},"readInt32LE"),a.prototype.readInt32BE=p(function(o,u){return o=o>>>0,u||ue(o,4,this.length),this[o]<<24|this[o+1]<<16|this[o+2]<<8|this[o+3]},"readInt32BE"),a.prototype.readBigInt64LE=Je(p(function(o){o=o>>>0,ut(o,"offset");let u=this[o],d=this[o+7];(u===void 0||d===void 0)&&_t(o,this.length-8);let k=this[o+4]+this[o+5]*2**8+this[o+6]*2**16+(d<<24);return(BigInt(k)<<BigInt(32))+BigInt(u+this[++o]*2**8+this[++o]*2**16+this[++o]*2**24)},"readBigInt64LE")),a.prototype.readBigInt64BE=Je(p(function(o){o=o>>>0,ut(o,"offset");let u=this[o],d=this[o+7];(u===void 0||d===void 0)&&_t(o,this.length-8);let k=(u<<24)+this[++o]*2**16+this[++o]*2**8+this[++o];return(BigInt(k)<<BigInt(32))+BigInt(this[++o]*2**24+this[++o]*2**16+this[++o]*2**8+d)},"readBigInt64BE")),a.prototype.readFloatLE=p(function(o,u){return o=o>>>0,u||ue(o,4,this.length),t.read(this,o,!0,23,4)},"readFloatLE"),a.prototype.readFloatBE=p(function(o,u){return o=o>>>0,u||ue(o,4,this.length),t.read(this,o,!1,23,4)},"readFloatBE"),a.prototype.readDoubleLE=p(function(o,u){return o=o>>>0,u||ue(o,8,this.length),t.read(this,o,!0,52,8)},"readDoubleLE"),a.prototype.readDoubleBE=p(function(o,u){return o=o>>>0,u||ue(o,8,this.length),t.read(this,o,!1,52,8)},"readDoubleBE");function ye(o,u,d,k,I,D){if(!a.isBuffer(o))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>I||u<D)throw new RangeError('"value" argument is out of bounds');if(d+k>o.length)throw new RangeError("Index out of range")}p(ye,"checkInt"),a.prototype.writeUintLE=a.prototype.writeUIntLE=p(function(o,u,d,k){if(o=+o,u=u>>>0,d=d>>>0,!k){let j=Math.pow(2,8*d)-1;ye(this,o,u,d,j,0)}let I=1,D=0;for(this[u]=o&255;++D<d&&(I*=256);)this[u+D]=o/I&255;return u+d},"writeUIntLE"),a.prototype.writeUintBE=a.prototype.writeUIntBE=p(function(o,u,d,k){if(o=+o,u=u>>>0,d=d>>>0,!k){let j=Math.pow(2,8*d)-1;ye(this,o,u,d,j,0)}let I=d-1,D=1;for(this[u+I]=o&255;--I>=0&&(D*=256);)this[u+I]=o/D&255;return u+d},"writeUIntBE"),a.prototype.writeUint8=a.prototype.writeUInt8=p(function(o,u,d){return o=+o,u=u>>>0,d||ye(this,o,u,1,255,0),this[u]=o&255,u+1},"writeUInt8"),a.prototype.writeUint16LE=a.prototype.writeUInt16LE=p(function(o,u,d){return o=+o,u=u>>>0,d||ye(this,o,u,2,65535,0),this[u]=o&255,this[u+1]=o>>>8,u+2},"writeUInt16LE"),a.prototype.writeUint16BE=a.prototype.writeUInt16BE=p(function(o,u,d){return o=+o,u=u>>>0,d||ye(this,o,u,2,65535,0),this[u]=o>>>8,this[u+1]=o&255,u+2},"writeUInt16BE"),a.prototype.writeUint32LE=a.prototype.writeUInt32LE=p(function(o,u,d){return o=+o,u=u>>>0,d||ye(this,o,u,4,4294967295,0),this[u+3]=o>>>24,this[u+2]=o>>>16,this[u+1]=o>>>8,this[u]=o&255,u+4},"writeUInt32LE"),a.prototype.writeUint32BE=a.prototype.writeUInt32BE=p(function(o,u,d){return o=+o,u=u>>>0,d||ye(this,o,u,4,4294967295,0),this[u]=o>>>24,this[u+1]=o>>>16,this[u+2]=o>>>8,this[u+3]=o&255,u+4},"writeUInt32BE");function be(o,u,d,k,I){st(u,k,I,o,d,7);let D=Number(u&BigInt(4294967295));o[d++]=D,D=D>>8,o[d++]=D,D=D>>8,o[d++]=D,D=D>>8,o[d++]=D;let j=Number(u>>BigInt(32)&BigInt(4294967295));return o[d++]=j,j=j>>8,o[d++]=j,j=j>>8,o[d++]=j,j=j>>8,o[d++]=j,d}p(be,"wrtBigUInt64LE");function ke(o,u,d,k,I){st(u,k,I,o,d,7);let D=Number(u&BigInt(4294967295));o[d+7]=D,D=D>>8,o[d+6]=D,D=D>>8,o[d+5]=D,D=D>>8,o[d+4]=D;let j=Number(u>>BigInt(32)&BigInt(4294967295));return o[d+3]=j,j=j>>8,o[d+2]=j,j=j>>8,o[d+1]=j,j=j>>8,o[d]=j,d+8}p(ke,"wrtBigUInt64BE"),a.prototype.writeBigUInt64LE=Je(p(function(o,u=0){return be(this,o,u,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),a.prototype.writeBigUInt64BE=Je(p(function(o,u=0){return ke(this,o,u,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),a.prototype.writeIntLE=p(function(o,u,d,k){if(o=+o,u=u>>>0,!k){let he=Math.pow(2,8*d-1);ye(this,o,u,d,he-1,-he)}let I=0,D=1,j=0;for(this[u]=o&255;++I<d&&(D*=256);)o<0&&j===0&&this[u+I-1]!==0&&(j=1),this[u+I]=(o/D>>0)-j&255;return u+d},"writeIntLE"),a.prototype.writeIntBE=p(function(o,u,d,k){if(o=+o,u=u>>>0,!k){let he=Math.pow(2,8*d-1);ye(this,o,u,d,he-1,-he)}let I=d-1,D=1,j=0;for(this[u+I]=o&255;--I>=0&&(D*=256);)o<0&&j===0&&this[u+I+1]!==0&&(j=1),this[u+I]=(o/D>>0)-j&255;return u+d},"writeIntBE"),a.prototype.writeInt8=p(function(o,u,d){return o=+o,u=u>>>0,d||ye(this,o,u,1,127,-128),o<0&&(o=255+o+1),this[u]=o&255,u+1},"writeInt8"),a.prototype.writeInt16LE=p(function(o,u,d){return o=+o,u=u>>>0,d||ye(this,o,u,2,32767,-32768),this[u]=o&255,this[u+1]=o>>>8,u+2},"writeInt16LE"),a.prototype.writeInt16BE=p(function(o,u,d){return o=+o,u=u>>>0,d||ye(this,o,u,2,32767,-32768),this[u]=o>>>8,this[u+1]=o&255,u+2},"writeInt16BE"),a.prototype.writeInt32LE=p(function(o,u,d){return o=+o,u=u>>>0,d||ye(this,o,u,4,2147483647,-2147483648),this[u]=o&255,this[u+1]=o>>>8,this[u+2]=o>>>16,this[u+3]=o>>>24,u+4},"writeInt32LE"),a.prototype.writeInt32BE=p(function(o,u,d){return o=+o,u=u>>>0,d||ye(this,o,u,4,2147483647,-2147483648),o<0&&(o=4294967295+o+1),this[u]=o>>>24,this[u+1]=o>>>16,this[u+2]=o>>>8,this[u+3]=o&255,u+4},"writeInt32BE"),a.prototype.writeBigInt64LE=Je(p(function(o,u=0){return be(this,o,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),a.prototype.writeBigInt64BE=Je(p(function(o,u=0){return ke(this,o,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE"));function rt(o,u,d,k,I,D){if(d+k>o.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("Index out of range")}p(rt,"checkIEEE754");function Ct(o,u,d,k,I){return u=+u,d=d>>>0,I||rt(o,u,d,4,34028234663852886e22,-34028234663852886e22),t.write(o,u,d,k,23,4),d+4}p(Ct,"writeFloat"),a.prototype.writeFloatLE=p(function(o,u,d){return Ct(this,o,u,!0,d)},"writeFloatLE"),a.prototype.writeFloatBE=p(function(o,u,d){return Ct(this,o,u,!1,d)},"writeFloatBE");function ge(o,u,d,k,I){return u=+u,d=d>>>0,I||rt(o,u,d,8,17976931348623157e292,-17976931348623157e292),t.write(o,u,d,k,52,8),d+8}p(ge,"writeDouble"),a.prototype.writeDoubleLE=p(function(o,u,d){return ge(this,o,u,!0,d)},"writeDoubleLE"),a.prototype.writeDoubleBE=p(function(o,u,d){return ge(this,o,u,!1,d)},"writeDoubleBE"),a.prototype.copy=p(function(o,u,d,k){if(!a.isBuffer(o))throw new TypeError("argument should be a Buffer");if(d||(d=0),!k&&k!==0&&(k=this.length),u>=o.length&&(u=o.length),u||(u=0),k>0&&k<d&&(k=d),k===d||o.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(d<0||d>=this.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("sourceEnd out of bounds");k>this.length&&(k=this.length),o.length-u<k-d&&(k=o.length-u+d);let I=k-d;return this===o&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,d,k):Uint8Array.prototype.set.call(o,this.subarray(d,k),u),I},"copy"),a.prototype.fill=p(function(o,u,d,k){if(typeof o=="string"){if(typeof u=="string"?(k=u,u=0,d=this.length):typeof d=="string"&&(k=d,d=this.length),k!==void 0&&typeof k!="string")throw new TypeError("encoding must be a string");if(typeof k=="string"&&!a.isEncoding(k))throw new TypeError("Unknown encoding: "+k);if(o.length===1){let D=o.charCodeAt(0);(k==="utf8"&&D<128||k==="latin1")&&(o=D)}}else typeof o=="number"?o=o&255:typeof o=="boolean"&&(o=Number(o));if(u<0||this.length<u||this.length<d)throw new RangeError("Out of range index");if(d<=u)return this;u=u>>>0,d=d===void 0?this.length:d>>>0,o||(o=0);let I;if(typeof o=="number")for(I=u;I<d;++I)this[I]=o;else{let D=a.isBuffer(o)?o:a.from(o,k),j=D.length;if(j===0)throw new TypeError('The value "'+o+'" is invalid for argument "value"');for(I=0;I<d-u;++I)this[I+u]=D[I%j]}return this},"fill");var Ge={};function He(o,u,d){var k;Ge[o]=(k=class extends d{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${o}]`,this.stack,delete this.name}get code(){return o}set code(I){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:I,writable:!0})}toString(){return`${this.name} [${o}]: ${this.message}`}},p(k,"NodeError"),k)}p(He,"E"),He("ERR_BUFFER_OUT_OF_BOUNDS",function(o){return o?`${o} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),He("ERR_INVALID_ARG_TYPE",function(o,u){return`The "${o}" argument must be of type number. Received type ${typeof u}`},TypeError),He("ERR_OUT_OF_RANGE",function(o,u,d){let k=`The value of "${o}" is out of range.`,I=d;return Number.isInteger(d)&&Math.abs(d)>2**32?I=nt(String(d)):typeof d=="bigint"&&(I=String(d),(d>BigInt(2)**BigInt(32)||d<-(BigInt(2)**BigInt(32)))&&(I=nt(I)),I+="n"),k+=` It must be ${u}. Received ${I}`,k},RangeError);function nt(o){let u="",d=o.length,k=o[0]==="-"?1:0;for(;d>=k+4;d-=3)u=`_${o.slice(d-3,d)}${u}`;return`${o.slice(0,d)}${u}`}p(nt,"addNumericalSeparator");function Et(o,u,d){ut(u,"offset"),(o[u]===void 0||o[u+d]===void 0)&&_t(u,o.length-(d+1))}p(Et,"checkBounds");function st(o,u,d,k,I,D){if(o>d||o<u){let j=typeof u=="bigint"?"n":"",he;throw D>3?u===0||u===BigInt(0)?he=`>= 0${j} and < 2${j} ** ${(D+1)*8}${j}`:he=`>= -(2${j} ** ${(D+1)*8-1}${j}) and < 2 ** ${(D+1)*8-1}${j}`:he=`>= ${u}${j} and <= ${d}${j}`,new Ge.ERR_OUT_OF_RANGE("value",he,o)}Et(k,I,D)}p(st,"checkIntBI");function ut(o,u){if(typeof o!="number")throw new Ge.ERR_INVALID_ARG_TYPE(u,"number",o)}p(ut,"validateNumber");function _t(o,u,d){throw Math.floor(o)!==o?(ut(o,d),new Ge.ERR_OUT_OF_RANGE(d||"offset","an integer",o)):u<0?new Ge.ERR_BUFFER_OUT_OF_BOUNDS:new Ge.ERR_OUT_OF_RANGE(d||"offset",`>= ${d?1:0} and <= ${u}`,o)}p(_t,"boundsError");var Ml=/[^+/0-9A-Za-z-_]/g;function $i(o){if(o=o.split("=")[0],o=o.trim().replace(Ml,""),o.length<2)return"";for(;o.length%4!==0;)o=o+"=";return o}p($i,"base64clean");function Lr(o,u){u=u||1/0;let d,k=o.length,I=null,D=[];for(let j=0;j<k;++j){if(d=o.charCodeAt(j),d>55295&&d<57344){if(!I){if(d>56319){(u-=3)>-1&&D.push(239,191,189);continue}else if(j+1===k){(u-=3)>-1&&D.push(239,191,189);continue}I=d;continue}if(d<56320){(u-=3)>-1&&D.push(239,191,189),I=d;continue}d=(I-55296<<10|d-56320)+65536}else I&&(u-=3)>-1&&D.push(239,191,189);if(I=null,d<128){if((u-=1)<0)break;D.push(d)}else if(d<2048){if((u-=2)<0)break;D.push(d>>6|192,d&63|128)}else if(d<65536){if((u-=3)<0)break;D.push(d>>12|224,d>>6&63|128,d&63|128)}else if(d<1114112){if((u-=4)<0)break;D.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw new Error("Invalid code point")}return D}p(Lr,"utf8ToBytes");function qi(o){let u=[];for(let d=0;d<o.length;++d)u.push(o.charCodeAt(d)&255);return u}p(qi,"asciiToBytes");function Qi(o,u){let d,k,I,D=[];for(let j=0;j<o.length&&!((u-=2)<0);++j)d=o.charCodeAt(j),k=d>>8,I=d%256,D.push(I),D.push(k);return D}p(Qi,"utf16leToBytes");function Vs(o){return e.toByteArray($i(o))}p(Vs,"base64ToBytes");function Zt(o,u,d,k){let I;for(I=0;I<k&&!(I+d>=u.length||I>=o.length);++I)u[I+d]=o[I];return I}p(Zt,"blitBuffer");function Fe(o,u){return o instanceof u||o!=null&&o.constructor!=null&&o.constructor.name!=null&&o.constructor.name===u.name}p(Fe,"isInstance");function Ir(o){return o!==o}p(Ir,"numberIsNaN");var Ol=function(){let o="0123456789abcdef",u=new Array(256);for(let d=0;d<16;++d){let k=d*16;for(let I=0;I<16;++I)u[k+I]=o[d]+o[I]}return u}();function Je(o){return typeof BigInt>"u"?Di:o}p(Je,"defineBigIntMethod");function Di(){throw new Error("BigInt not supported")}p(Di,"BufferBigIntNotDefined")}),_s,bi,ef,te,ne,Z=qe(()=>{"use strict";_s=globalThis,bi=globalThis.setImmediate??(r=>setTimeout(r,0)),ef=globalThis.clearImmediate??(r=>clearTimeout(r)),te=typeof globalThis.Buffer=="function"&&typeof globalThis.Buffer.allocUnsafe=="function"?globalThis.Buffer:Xh().Buffer,ne=globalThis.process??{},ne.env??(ne.env={});try{ne.nextTick(()=>{})}catch{let r=Promise.resolve();ne.nextTick=r.then.bind(r)}}),St=se((r,e)=>{"use strict";Z();var t=typeof Reflect=="object"?Reflect:null,n=t&&typeof t.apply=="function"?t.apply:p(function(x,L,E){return Function.prototype.apply.call(x,L,E)},"ReflectApply"),s;t&&typeof t.ownKeys=="function"?s=t.ownKeys:Object.getOwnPropertySymbols?s=p(function(x){return Object.getOwnPropertyNames(x).concat(Object.getOwnPropertySymbols(x))},"ReflectOwnKeys"):s=p(function(x){return Object.getOwnPropertyNames(x)},"ReflectOwnKeys");function i(x){console&&console.warn&&console.warn(x)}p(i,"ProcessEmitWarning");var l=Number.isNaN||p(function(x){return x!==x},"NumberIsNaN");function a(){a.init.call(this)}p(a,"EventEmitter"),e.exports=a,e.exports.once=N,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var f=10;function w(x){if(typeof x!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof x)}p(w,"checkListener"),Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:p(function(){return f},"get"),set:p(function(x){if(typeof x!="number"||x<0||l(x))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+x+".");f=x},"set")}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=p(function(x){if(typeof x!="number"||x<0||l(x))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+x+".");return this._maxListeners=x,this},"setMaxListeners");function h(x){return x._maxListeners===void 0?a.defaultMaxListeners:x._maxListeners}p(h,"_getMaxListeners"),a.prototype.getMaxListeners=p(function(){return h(this)},"getMaxListeners"),a.prototype.emit=p(function(x){for(var L=[],E=1;E<arguments.length;E++)L.push(arguments[E]);var T=x==="error",q=this._events;if(q!==void 0)T=T&&q.error===void 0;else if(!T)return!1;if(T){var $;if(L.length>0&&($=L[0]),$ instanceof Error)throw $;var V=new Error("Unhandled error."+($?" ("+$.message+")":""));throw V.context=$,V}var G=q[x];if(G===void 0)return!1;if(typeof G=="function")n(G,this,L);else for(var M=G.length,B=y(G,M),E=0;E<M;++E)n(B[E],this,L);return!0},"emit");function b(x,L,E,T){var q,$,V;if(w(E),$=x._events,$===void 0?($=x._events=Object.create(null),x._eventsCount=0):($.newListener!==void 0&&(x.emit("newListener",L,E.listener?E.listener:E),$=x._events),V=$[L]),V===void 0)V=$[L]=E,++x._eventsCount;else if(typeof V=="function"?V=$[L]=T?[E,V]:[V,E]:T?V.unshift(E):V.push(E),q=h(x),q>0&&V.length>q&&!V.warned){V.warned=!0;var G=new Error("Possible EventEmitter memory leak detected. "+V.length+" "+String(L)+" listeners added. Use emitter.setMaxListeners() to increase limit");G.name="MaxListenersExceededWarning",G.emitter=x,G.type=L,G.count=V.length,i(G)}return x}p(b,"_addListener"),a.prototype.addListener=p(function(x,L){return b(this,x,L,!1)},"addListener"),a.prototype.on=a.prototype.addListener,a.prototype.prependListener=p(function(x,L){return b(this,x,L,!0)},"prependListener");function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}p(g,"onceWrapper");function v(x,L,E){var T={fired:!1,wrapFn:void 0,target:x,type:L,listener:E},q=g.bind(T);return q.listener=E,T.wrapFn=q,q}p(v,"_onceWrap"),a.prototype.once=p(function(x,L){return w(L),this.on(x,v(this,x,L)),this},"once"),a.prototype.prependOnceListener=p(function(x,L){return w(L),this.prependListener(x,v(this,x,L)),this},"prependOnceListener"),a.prototype.removeListener=p(function(x,L){var E,T,q,$,V;if(w(L),T=this._events,T===void 0)return this;if(E=T[x],E===void 0)return this;if(E===L||E.listener===L)--this._eventsCount===0?this._events=Object.create(null):(delete T[x],T.removeListener&&this.emit("removeListener",x,E.listener||L));else if(typeof E!="function"){for(q=-1,$=E.length-1;$>=0;$--)if(E[$]===L||E[$].listener===L){V=E[$].listener,q=$;break}if(q<0)return this;q===0?E.shift():S(E,q),E.length===1&&(T[x]=E[0]),T.removeListener!==void 0&&this.emit("removeListener",x,V||L)}return this},"removeListener"),a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=p(function(x){var L,E,T;if(E=this._events,E===void 0)return this;if(E.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):E[x]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete E[x]),this;if(arguments.length===0){var q=Object.keys(E),$;for(T=0;T<q.length;++T)$=q[T],$!=="removeListener"&&this.removeAllListeners($);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(L=E[x],typeof L=="function")this.removeListener(x,L);else if(L!==void 0)for(T=L.length-1;T>=0;T--)this.removeListener(x,L[T]);return this},"removeAllListeners");function m(x,L,E){var T=x._events;if(T===void 0)return[];var q=T[L];return q===void 0?[]:typeof q=="function"?E?[q.listener||q]:[q]:E?C(q):y(q,q.length)}p(m,"_listeners"),a.prototype.listeners=p(function(x){return m(this,x,!0)},"listeners"),a.prototype.rawListeners=p(function(x){return m(this,x,!1)},"rawListeners"),a.listenerCount=function(x,L){return typeof x.listenerCount=="function"?x.listenerCount(L):c.call(x,L)},a.prototype.listenerCount=c;function c(x){var L=this._events;if(L!==void 0){var E=L[x];if(typeof E=="function")return 1;if(E!==void 0)return E.length}return 0}p(c,"listenerCount"),a.prototype.eventNames=p(function(){return this._eventsCount>0?s(this._events):[]},"eventNames");function y(x,L){for(var E=new Array(L),T=0;T<L;++T)E[T]=x[T];return E}p(y,"arrayClone");function S(x,L){for(;L+1<x.length;L++)x[L]=x[L+1];x.pop()}p(S,"spliceOne");function C(x){for(var L=new Array(x.length),E=0;E<L.length;++E)L[E]=x[E].listener||x[E];return L}p(C,"unwrapListeners");function N(x,L){return new Promise(function(E,T){function q(V){x.removeListener(L,$),T(V)}p(q,"errorListener");function $(){typeof x.removeListener=="function"&&x.removeListener("error",q),E([].slice.call(arguments))}p($,"resolver"),O(x,L,$,{once:!0}),L!=="error"&&R(x,q,{once:!0})})}p(N,"once");function R(x,L,E){typeof x.on=="function"&&O(x,"error",L,E)}p(R,"addErrorHandlerIfEventEmitter");function O(x,L,E,T){if(typeof x.on=="function")T.once?x.once(L,E):x.on(L,E);else if(typeof x.addEventListener=="function")x.addEventListener(L,p(function q($){T.once&&x.removeEventListener(L,q),E($)},"wrapListener"));else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof x)}p(O,"eventTargetAgnosticAddListener")}),ba={};ze(ba,{Socket:()=>As,isIP:()=>wa});function wa(r){return 0}var ha,di,Cr,As,Ts=qe(()=>{"use strict";Z(),ha=vt(St(),1),p(wa,"isIP"),di=/^[^.]+\./,Cr=class ee extends ha.EventEmitter{constructor(){super(...arguments),re(this,"opts",{}),re(this,"connecting",!1),re(this,"pending",!0),re(this,"writable",!0),re(this,"encrypted",!1),re(this,"authorized",!1),re(this,"destroyed",!1),re(this,"ws",null),re(this,"writeBuffer"),re(this,"tlsState",0),re(this,"tlsRead"),re(this,"tlsWrite")}static get poolQueryViaFetch(){return ee.opts.poolQueryViaFetch??ee.defaults.poolQueryViaFetch}static set poolQueryViaFetch(e){ee.opts.poolQueryViaFetch=e}static get fetchEndpoint(){return ee.opts.fetchEndpoint??ee.defaults.fetchEndpoint}static set fetchEndpoint(e){ee.opts.fetchEndpoint=e}static get fetchConnectionCache(){return!0}static set fetchConnectionCache(e){console.warn("The `fetchConnectionCache` option is deprecated (now always `true`)")}static get fetchFunction(){return ee.opts.fetchFunction??ee.defaults.fetchFunction}static set fetchFunction(e){ee.opts.fetchFunction=e}static get webSocketConstructor(){return ee.opts.webSocketConstructor??ee.defaults.webSocketConstructor}static set webSocketConstructor(e){ee.opts.webSocketConstructor=e}get webSocketConstructor(){return this.opts.webSocketConstructor??ee.webSocketConstructor}set webSocketConstructor(e){this.opts.webSocketConstructor=e}static get wsProxy(){return ee.opts.wsProxy??ee.defaults.wsProxy}static set wsProxy(e){ee.opts.wsProxy=e}get wsProxy(){return this.opts.wsProxy??ee.wsProxy}set wsProxy(e){this.opts.wsProxy=e}static get coalesceWrites(){return ee.opts.coalesceWrites??ee.defaults.coalesceWrites}static set coalesceWrites(e){ee.opts.coalesceWrites=e}get coalesceWrites(){return this.opts.coalesceWrites??ee.coalesceWrites}set coalesceWrites(e){this.opts.coalesceWrites=e}static get useSecureWebSocket(){return ee.opts.useSecureWebSocket??ee.defaults.useSecureWebSocket}static set useSecureWebSocket(e){ee.opts.useSecureWebSocket=e}get useSecureWebSocket(){return this.opts.useSecureWebSocket??ee.useSecureWebSocket}set useSecureWebSocket(e){this.opts.useSecureWebSocket=e}static get forceDisablePgSSL(){return ee.opts.forceDisablePgSSL??ee.defaults.forceDisablePgSSL}static set forceDisablePgSSL(e){ee.opts.forceDisablePgSSL=e}get forceDisablePgSSL(){return this.opts.forceDisablePgSSL??ee.forceDisablePgSSL}set forceDisablePgSSL(e){this.opts.forceDisablePgSSL=e}static get disableSNI(){return ee.opts.disableSNI??ee.defaults.disableSNI}static set disableSNI(e){ee.opts.disableSNI=e}get disableSNI(){return this.opts.disableSNI??ee.disableSNI}set disableSNI(e){this.opts.disableSNI=e}static get pipelineConnect(){return ee.opts.pipelineConnect??ee.defaults.pipelineConnect}static set pipelineConnect(e){ee.opts.pipelineConnect=e}get pipelineConnect(){return this.opts.pipelineConnect??ee.pipelineConnect}set pipelineConnect(e){this.opts.pipelineConnect=e}static get subtls(){return ee.opts.subtls??ee.defaults.subtls}static set subtls(e){ee.opts.subtls=e}get subtls(){return this.opts.subtls??ee.subtls}set subtls(e){this.opts.subtls=e}static get pipelineTLS(){return ee.opts.pipelineTLS??ee.defaults.pipelineTLS}static set pipelineTLS(e){ee.opts.pipelineTLS=e}get pipelineTLS(){return this.opts.pipelineTLS??ee.pipelineTLS}set pipelineTLS(e){this.opts.pipelineTLS=e}static get rootCerts(){return ee.opts.rootCerts??ee.defaults.rootCerts}static set rootCerts(e){ee.opts.rootCerts=e}get rootCerts(){return this.opts.rootCerts??ee.rootCerts}set rootCerts(e){this.opts.rootCerts=e}wsProxyAddrForHost(e,t){let n=this.wsProxy;if(n===void 0)throw new Error("No WebSocket proxy is configured. Please see https://github.com/neondatabase/serverless/blob/main/CONFIG.md#wsproxy-string--host-string-port-number--string--string");return typeof n=="function"?n(e,t):`${n}?address=${e}:${t}`}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}connect(e,t,n){this.connecting=!0,n&&this.once("connect",n);let s=p(()=>{this.connecting=!1,this.pending=!1,this.emit("connect"),this.emit("ready")},"handleWebSocketOpen"),i=p((a,f=!1)=>{a.binaryType="arraybuffer",a.addEventListener("error",w=>{this.emit("error",w),this.emit("close")}),a.addEventListener("message",w=>{if(this.tlsState===0){let h=te.from(w.data);this.emit("data",h)}}),a.addEventListener("close",()=>{this.emit("close")}),f?s():a.addEventListener("open",s)},"configureWebSocket"),l;try{l=this.wsProxyAddrForHost(t,typeof e=="string"?parseInt(e,10):e)}catch(a){this.emit("error",a),this.emit("close");return}try{let a=(this.useSecureWebSocket?"wss:":"ws:")+"//"+l;if(this.webSocketConstructor!==void 0)this.ws=new this.webSocketConstructor(a),i(this.ws);else try{this.ws=new WebSocket(a),i(this.ws)}catch{this.ws=new __unstable_WebSocket(a),i(this.ws)}}catch(a){let f=(this.useSecureWebSocket?"https:":"http:")+"//"+l;fetch(f,{headers:{Upgrade:"websocket"}}).then(w=>{if(this.ws=w.webSocket,this.ws==null)throw a;this.ws.accept(),i(this.ws,!0)}).catch(w=>{this.emit("error",new Error(`All attempts to open a WebSocket to connect to the database failed. Please refer to https://github.com/neondatabase/serverless/blob/main/CONFIG.md#websocketconstructor-typeof-websocket--undefined. Details: ${w}`)),this.emit("close")})}}async startTls(e){if(this.subtls===void 0)throw new Error("For Postgres SSL connections, you must set `neonConfig.subtls` to the subtls library. See https://github.com/neondatabase/serverless/blob/main/CONFIG.md for more information.");this.tlsState=1;let t=await this.subtls.TrustedCert.databaseFromPEM(this.rootCerts),n=new this.subtls.WebSocketReadQueue(this.ws),s=n.read.bind(n),i=this.rawWrite.bind(this),{read:l,write:a}=await this.subtls.startTls(e,t,s,i,{useSNI:!this.disableSNI,expectPreData:this.pipelineTLS?new Uint8Array([83]):void 0});this.tlsRead=l,this.tlsWrite=a,this.tlsState=2,this.encrypted=!0,this.authorized=!0,this.emit("secureConnection",this),this.tlsReadLoop()}async tlsReadLoop(){for(;;){let e=await this.tlsRead();if(e===void 0)break;{let t=te.from(e);this.emit("data",t)}}}rawWrite(e){if(!this.coalesceWrites){this.ws.send(e);return}if(this.writeBuffer===void 0)this.writeBuffer=e,setTimeout(()=>{this.ws.send(this.writeBuffer),this.writeBuffer=void 0},0);else{let t=new Uint8Array(this.writeBuffer.length+e.length);t.set(this.writeBuffer),t.set(e,this.writeBuffer.length),this.writeBuffer=t}}write(e,t="utf8",n=s=>{}){return e.length===0?(n(),!0):(typeof e=="string"&&(e=te.from(e,t)),this.tlsState===0?(this.rawWrite(e),n()):this.tlsState===1?this.once("secureConnection",()=>{this.write(e,t,n)}):(this.tlsWrite(e),n()),!0)}end(e=te.alloc(0),t="utf8",n=()=>{}){return this.write(e,t,()=>{this.ws.close(),n()}),this}destroy(){return this.destroyed=!0,this.end()}},p(Cr,"Socket"),re(Cr,"defaults",{poolQueryViaFetch:!1,fetchEndpoint:p((r,e,t)=>{let n;return t?.jwtAuth?n=r.replace(di,"apiauth."):n=r.replace(di,"api."),"https://"+n+"/sql"},"fetchEndpoint"),fetchConnectionCache:!0,fetchFunction:void 0,webSocketConstructor:void 0,wsProxy:p(r=>r+"/v2","wsProxy"),useSecureWebSocket:!0,forceDisablePgSSL:!0,coalesceWrites:!0,pipelineConnect:"password",subtls:void 0,rootCerts:"",pipelineTLS:!1,disableSNI:!1}),re(Cr,"opts",{}),As=Cr}),va={};ze(va,{parse:()=>wi});function wi(r,e=!1){let{protocol:t}=new URL(r),n="http:"+r.substring(t.length),{username:s,password:i,host:l,hostname:a,port:f,pathname:w,search:h,searchParams:b,hash:g}=new URL(n);i=decodeURIComponent(i),s=decodeURIComponent(s),w=decodeURIComponent(w);let v=s+":"+i,m=e?Object.fromEntries(b.entries()):h;return{href:r,protocol:t,auth:v,username:s,password:i,host:l,hostname:a,port:f,pathname:w,search:h,query:m,hash:g}}var Sa=qe(()=>{"use strict";Z(),p(wi,"parse")}),xa=se(r=>{"use strict";Z(),r.parse=function(s,i){return new t(s,i).parse()};var e=class Ca{constructor(i,l){this.source=i,this.transform=l||n,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var i=this.source[this.position++];return i==="\\"?{value:this.source[this.position++],escaped:!0}:{value:i,escaped:!1}}record(i){this.recorded.push(i)}newEntry(i){var l;(this.recorded.length>0||i)&&(l=this.recorded.join(""),l==="NULL"&&!i&&(l=null),l!==null&&(l=this.transform(l)),this.entries.push(l),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var i=this.nextCharacter();if(i.value==="=")break}}parse(i){var l,a,f;for(this.consumeDimensions();!this.isEof();)if(l=this.nextCharacter(),l.value==="{"&&!f)this.dimension++,this.dimension>1&&(a=new Ca(this.source.substr(this.position-1),this.transform),this.entries.push(a.parse(!0)),this.position+=a.position-2);else if(l.value==="}"&&!f){if(this.dimension--,!this.dimension&&(this.newEntry(),i))return this.entries}else l.value==='"'&&!l.escaped?(f&&this.newEntry(!0),f=!f):l.value===","&&!f?this.newEntry():this.record(l.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};p(e,"ArrayParser");var t=e;function n(s){return s}p(n,"identity")}),Ea=se((r,e)=>{Z();var t=xa();e.exports={create:p(function(n,s){return{parse:p(function(){return t.parse(n,s)},"parse")}},"create")}}),tf=se((r,e)=>{"use strict";Z();var t=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,n=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,s=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,i=/^-?infinity$/;e.exports=p(function(h){if(i.test(h))return Number(h.replace("i","I"));var b=t.exec(h);if(!b)return l(h)||null;var g=!!b[8],v=parseInt(b[1],10);g&&(v=f(v));var m=parseInt(b[2],10)-1,c=b[3],y=parseInt(b[4],10),S=parseInt(b[5],10),C=parseInt(b[6],10),N=b[7];N=N?1e3*parseFloat(N):0;var R,O=a(h);return O!=null?(R=new Date(Date.UTC(v,m,c,y,S,C,N)),w(v)&&R.setUTCFullYear(v),O!==0&&R.setTime(R.getTime()-O)):(R=new Date(v,m,c,y,S,C,N),w(v)&&R.setFullYear(v)),R},"parseDate");function l(h){var b=n.exec(h);if(b){var g=parseInt(b[1],10),v=!!b[4];v&&(g=f(g));var m=parseInt(b[2],10)-1,c=b[3],y=new Date(g,m,c);return w(g)&&y.setFullYear(g),y}}p(l,"getDate");function a(h){if(h.endsWith("+00"))return 0;var b=s.exec(h.split(" ")[1]);if(b){var g=b[1];if(g==="Z")return 0;var v=g==="-"?-1:1,m=parseInt(b[2],10)*3600+parseInt(b[3]||0,10)*60+parseInt(b[4]||0,10);return m*v*1e3}}p(a,"timeZoneOffset");function f(h){return-(h-1)}p(f,"bcYearToNegativeYear");function w(h){return h>=0&&h<100}p(w,"is0To99")}),rf=se((r,e)=>{Z(),e.exports=n;var t=Object.prototype.hasOwnProperty;function n(s){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var a in l)t.call(l,a)&&(s[a]=l[a])}return s}p(n,"extend")}),nf=se((r,e)=>{"use strict";Z();var t=rf();e.exports=n;function n(C){if(!(this instanceof n))return new n(C);t(this,S(C))}p(n,"PostgresInterval");var s=["seconds","minutes","hours","days","months","years"];n.prototype.toPostgres=function(){var C=s.filter(this.hasOwnProperty,this);return this.milliseconds&&C.indexOf("seconds")<0&&C.push("seconds"),C.length===0?"0":C.map(function(N){var R=this[N]||0;return N==="seconds"&&this.milliseconds&&(R=(R+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),R+" "+N},this).join(" ")};var i={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},l=["years","months","days"],a=["hours","minutes","seconds"];n.prototype.toISOString=n.prototype.toISO=function(){var C=l.map(R,this).join(""),N=a.map(R,this).join("");return"P"+C+"T"+N;function R(O){var x=this[O]||0;return O==="seconds"&&this.milliseconds&&(x=(x+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),x+i[O]}};var f="([+-]?\\d+)",w=f+"\\s+years?",h=f+"\\s+mons?",b=f+"\\s+days?",g="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",v=new RegExp([w,h,b,g].map(function(C){return"("+C+")?"}).join("\\s*")),m={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},c=["hours","minutes","seconds","milliseconds"];function y(C){var N=C+"000000".slice(C.length);return parseInt(N,10)/1e3}p(y,"parseMilliseconds");function S(C){if(!C)return{};var N=v.exec(C),R=N[8]==="-";return Object.keys(m).reduce(function(O,x){var L=m[x],E=N[L];return!E||(E=x==="milliseconds"?y(E):parseInt(E,10),!E)||(R&&~c.indexOf(x)&&(E*=-1),O[x]=E),O},{})}p(S,"parse")}),sf=se((r,e)=>{"use strict";Z(),e.exports=p(function(t){if(/^\\x/.test(t))return new te(t.substr(2),"hex");for(var n="",s=0;s<t.length;)if(t[s]!=="\\")n+=t[s],++s;else if(/[0-7]{3}/.test(t.substr(s+1,3)))n+=String.fromCharCode(parseInt(t.substr(s+1,3),8)),s+=4;else{for(var i=1;s+i<t.length&&t[s+i]==="\\";)i++;for(var l=0;l<Math.floor(i/2);++l)n+="\\";s+=Math.floor(i/2)*2}return new te(n,"binary")},"parseBytea")}),of=se((r,e)=>{Z();var t=xa(),n=Ea(),s=tf(),i=nf(),l=sf();function a(T){return p(function(q){return q===null?q:T(q)},"nullAllowed")}p(a,"allowNull");function f(T){return T===null?T:T==="TRUE"||T==="t"||T==="true"||T==="y"||T==="yes"||T==="on"||T==="1"}p(f,"parseBool");function w(T){return T?t.parse(T,f):null}p(w,"parseBoolArray");function h(T){return parseInt(T,10)}p(h,"parseBaseTenInt");function b(T){return T?t.parse(T,a(h)):null}p(b,"parseIntegerArray");function g(T){return T?t.parse(T,a(function(q){return R(q).trim()})):null}p(g,"parseBigIntegerArray");var v=p(function(T){if(!T)return null;var q=n.create(T,function($){return $!==null&&($=x($)),$});return q.parse()},"parsePointArray"),m=p(function(T){if(!T)return null;var q=n.create(T,function($){return $!==null&&($=parseFloat($)),$});return q.parse()},"parseFloatArray"),c=p(function(T){if(!T)return null;var q=n.create(T);return q.parse()},"parseStringArray"),y=p(function(T){if(!T)return null;var q=n.create(T,function($){return $!==null&&($=s($)),$});return q.parse()},"parseDateArray"),S=p(function(T){if(!T)return null;var q=n.create(T,function($){return $!==null&&($=i($)),$});return q.parse()},"parseIntervalArray"),C=p(function(T){return T?t.parse(T,a(l)):null},"parseByteAArray"),N=p(function(T){return parseInt(T,10)},"parseInteger"),R=p(function(T){var q=String(T);return/^\d+$/.test(q)?q:T},"parseBigInteger"),O=p(function(T){return T?t.parse(T,a(JSON.parse)):null},"parseJsonArray"),x=p(function(T){return T[0]!=="("?null:(T=T.substring(1,T.length-1).split(","),{x:parseFloat(T[0]),y:parseFloat(T[1])})},"parsePoint"),L=p(function(T){if(T[0]!=="<"&&T[1]!=="(")return null;for(var q="(",$="",V=!1,G=2;G<T.length-1;G++){if(V||(q+=T[G]),T[G]===")"){V=!0;continue}else if(!V)continue;T[G]!==","&&($+=T[G])}var M=x(q);return M.radius=parseFloat($),M},"parseCircle"),E=p(function(T){T(20,R),T(21,N),T(23,N),T(26,N),T(700,parseFloat),T(701,parseFloat),T(16,f),T(1082,s),T(1114,s),T(1184,s),T(600,x),T(651,c),T(718,L),T(1e3,w),T(1001,C),T(1005,b),T(1007,b),T(1028,b),T(1016,g),T(1017,v),T(1021,m),T(1022,m),T(1231,m),T(1014,c),T(1015,c),T(1008,c),T(1009,c),T(1040,c),T(1041,c),T(1115,y),T(1182,y),T(1185,y),T(1186,i),T(1187,S),T(17,l),T(114,JSON.parse.bind(JSON)),T(3802,JSON.parse.bind(JSON)),T(199,O),T(3807,O),T(3907,c),T(2951,c),T(791,c),T(1183,c),T(1270,c)},"init");e.exports={init:E}}),af=se((r,e)=>{"use strict";Z();var t=1e6;function n(s){var i=s.readInt32BE(0),l=s.readUInt32BE(4),a="";i<0&&(i=~i+(l===0),l=~l+1>>>0,a="-");var f="",w,h,b,g,v,m;{if(w=i%t,i=i/t>>>0,h=4294967296*w+l,l=h/t>>>0,b=""+(h-t*l),l===0&&i===0)return a+b+f;for(g="",v=6-b.length,m=0;m<v;m++)g+="0";f=g+b+f}{if(w=i%t,i=i/t>>>0,h=4294967296*w+l,l=h/t>>>0,b=""+(h-t*l),l===0&&i===0)return a+b+f;for(g="",v=6-b.length,m=0;m<v;m++)g+="0";f=g+b+f}{if(w=i%t,i=i/t>>>0,h=4294967296*w+l,l=h/t>>>0,b=""+(h-t*l),l===0&&i===0)return a+b+f;for(g="",v=6-b.length,m=0;m<v;m++)g+="0";f=g+b+f}return w=i%t,h=4294967296*w+l,b=""+h%t,a+b+f}p(n,"readInt8"),e.exports=n}),lf=se((r,e)=>{Z();var t=af(),n=p(function(c,y,S,C,N){S=S||0,C=C||!1,N=N||function(V,G,M){return V*Math.pow(2,M)+G};var R=S>>3,O=p(function(V){return C?~V&255:V},"inv"),x=255,L=8-S%8;y<L&&(x=255<<8-y&255,L=y),S&&(x=x>>S%8);var E=0;S%8+y>=8&&(E=N(0,O(c[R])&x,L));for(var T=y+S>>3,q=R+1;q<T;q++)E=N(E,O(c[q]),8);var $=(y+S)%8;return $>0&&(E=N(E,O(c[T])>>8-$,$)),E},"parseBits"),s=p(function(c,y,S){var C=Math.pow(2,S-1)-1,N=n(c,1),R=n(c,S,1);if(R===0)return 0;var O=1,x=p(function(E,T,q){E===0&&(E=1);for(var $=1;$<=q;$++)O/=2,(T&1<<q-$)>0&&(E+=O);return E},"parsePrecisionBits"),L=n(c,y,S+1,!1,x);return R==Math.pow(2,S+1)-1?L===0?N===0?1/0:-1/0:NaN:(N===0?1:-1)*Math.pow(2,R-C)*L},"parseFloatFromBits"),i=p(function(c){return n(c,1)==1?-1*(n(c,15,1,!0)+1):n(c,15,1)},"parseInt16"),l=p(function(c){return n(c,1)==1?-1*(n(c,31,1,!0)+1):n(c,31,1)},"parseInt32"),a=p(function(c){return s(c,23,8)},"parseFloat32"),f=p(function(c){return s(c,52,11)},"parseFloat64"),w=p(function(c){var y=n(c,16,32);if(y==49152)return NaN;for(var S=Math.pow(1e4,n(c,16,16)),C=0,N=[],R=n(c,16),O=0;O<R;O++)C+=n(c,16,64+16*O)*S,S/=1e4;var x=Math.pow(10,n(c,16,48));return(y===0?1:-1)*Math.round(C*x)/x},"parseNumeric"),h=p(function(c,y){var S=n(y,1),C=n(y,63,1),N=new Date((S===0?1:-1)*C/1e3+9466848e5);return c||N.setTime(N.getTime()+N.getTimezoneOffset()*6e4),N.usec=C%1e3,N.getMicroSeconds=function(){return this.usec},N.setMicroSeconds=function(R){this.usec=R},N.getUTCMicroSeconds=function(){return this.usec},N},"parseDate"),b=p(function(c){for(var y=n(c,32),S=n(c,32,32),C=n(c,32,64),N=96,R=[],O=0;O<y;O++)R[O]=n(c,32,N),N+=32,N+=32;var x=p(function(E){var T=n(c,32,N);if(N+=32,T==4294967295)return null;var q;if(E==23||E==20)return q=n(c,T*8,N),N+=T*8,q;if(E==25)return q=c.toString(this.encoding,N>>3,(N+=T<<3)>>3),q;console.log("ERROR: ElementType not implemented: "+E)},"parseElement"),L=p(function(E,T){var q=[],$;if(E.length>1){var V=E.shift();for($=0;$<V;$++)q[$]=L(E,T);E.unshift(V)}else for($=0;$<E[0];$++)q[$]=x(T);return q},"parse");return L(R,C)},"parseArray"),g=p(function(c){return c.toString("utf8")},"parseText"),v=p(function(c){return c===null?null:n(c,8)>0},"parseBool"),m=p(function(c){c(20,t),c(21,i),c(23,l),c(26,l),c(1700,w),c(700,a),c(701,f),c(16,v),c(1114,h.bind(null,!1)),c(1184,h.bind(null,!0)),c(1e3,b),c(1007,b),c(1016,b),c(1008,b),c(1009,b),c(25,g)},"init");e.exports={init:m}}),cf=se((r,e)=>{Z(),e.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}}),Ns=se(r=>{Z();var e=of(),t=lf(),n=Ea(),s=cf();r.getTypeParser=a,r.setTypeParser=f,r.arrayParser=n,r.builtins=s;var i={text:{},binary:{}};function l(w){return String(w)}p(l,"noParse");function a(w,h){return h=h||"text",i[h]&&i[h][w]||l}p(a,"getTypeParser");function f(w,h,b){typeof h=="function"&&(b=h,h="text"),i[h][w]=b}p(f,"setTypeParser"),e.init(function(w,h){i.text[w]=h}),t.init(function(w,h){i.binary[w]=h})}),vi=se((r,e)=>{"use strict";Z();var t=Ns();function n(s){this._types=s||t,this.text={},this.binary={}}p(n,"TypeOverrides"),n.prototype.getOverrides=function(s){switch(s){case"text":return this.text;case"binary":return this.binary;default:return{}}},n.prototype.setTypeParser=function(s,i,l){typeof i=="function"&&(l=i,i="text"),this.getOverrides(i)[s]=l},n.prototype.getTypeParser=function(s,i){return i=i||"text",this.getOverrides(i)[s]||this._types.getTypeParser(s,i)},e.exports=n});function _r(r){let e=1779033703,t=3144134277,n=1013904242,s=2773480762,i=1359893119,l=2600822924,a=528734635,f=1541459225,w=0,h=0,b=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],g=p((C,N)=>C>>>N|C<<32-N,"rrot"),v=new Uint32Array(64),m=new Uint8Array(64),c=p(()=>{for(let q=0,$=0;q<16;q++,$+=4)v[q]=m[$]<<24|m[$+1]<<16|m[$+2]<<8|m[$+3];for(let q=16;q<64;q++){let $=g(v[q-15],7)^g(v[q-15],18)^v[q-15]>>>3,V=g(v[q-2],17)^g(v[q-2],19)^v[q-2]>>>10;v[q]=v[q-16]+$+v[q-7]+V|0}let C=e,N=t,R=n,O=s,x=i,L=l,E=a,T=f;for(let q=0;q<64;q++){let $=g(x,6)^g(x,11)^g(x,25),V=x&L^~x&E,G=T+$+V+b[q]+v[q]|0,M=g(C,2)^g(C,13)^g(C,22),B=C&N^C&R^N&R,H=M+B|0;T=E,E=L,L=x,x=O+G|0,O=R,R=N,N=C,C=G+H|0}e=e+C|0,t=t+N|0,n=n+R|0,s=s+O|0,i=i+x|0,l=l+L|0,a=a+E|0,f=f+T|0,h=0},"process"),y=p(C=>{typeof C=="string"&&(C=new TextEncoder().encode(C));for(let N=0;N<C.length;N++)m[h++]=C[N],h===64&&c();w+=C.length},"add"),S=p(()=>{if(m[h++]=128,h==64&&c(),h+8>64){for(;h<64;)m[h++]=0;c()}for(;h<58;)m[h++]=0;let C=w*8;m[h++]=C/1099511627776&255,m[h++]=C/4294967296&255,m[h++]=C>>>24,m[h++]=C>>>16&255,m[h++]=C>>>8&255,m[h++]=C&255,c();let N=new Uint8Array(32);return N[0]=e>>>24,N[1]=e>>>16&255,N[2]=e>>>8&255,N[3]=e&255,N[4]=t>>>24,N[5]=t>>>16&255,N[6]=t>>>8&255,N[7]=t&255,N[8]=n>>>24,N[9]=n>>>16&255,N[10]=n>>>8&255,N[11]=n&255,N[12]=s>>>24,N[13]=s>>>16&255,N[14]=s>>>8&255,N[15]=s&255,N[16]=i>>>24,N[17]=i>>>16&255,N[18]=i>>>8&255,N[19]=i&255,N[20]=l>>>24,N[21]=l>>>16&255,N[22]=l>>>8&255,N[23]=l&255,N[24]=a>>>24,N[25]=a>>>16&255,N[26]=a>>>8&255,N[27]=a&255,N[28]=f>>>24,N[29]=f>>>16&255,N[30]=f>>>8&255,N[31]=f&255,N},"digest");return r===void 0?{add:y,digest:S}:(y(r),S())}var uf=qe(()=>{"use strict";Z(),p(_r,"sha256")}),et,mi,hf=qe(()=>{"use strict";Z(),et=class Be{constructor(){re(this,"_dataLength",0),re(this,"_bufferLength",0),re(this,"_state",new Int32Array(4)),re(this,"_buffer",new ArrayBuffer(68)),re(this,"_buffer8"),re(this,"_buffer32"),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashByteArray(e,t=!1){return this.onePassHasher.start().appendByteArray(e).end(t)}static hashStr(e,t=!1){return this.onePassHasher.start().appendStr(e).end(t)}static hashAsciiStr(e,t=!1){return this.onePassHasher.start().appendAsciiStr(e).end(t)}static _hex(e){let t=Be.hexChars,n=Be.hexOut,s,i,l,a;for(a=0;a<4;a+=1)for(i=a*8,s=e[a],l=0;l<8;l+=2)n[i+1+l]=t.charAt(s&15),s>>>=4,n[i+0+l]=t.charAt(s&15),s>>>=4;return n.join("")}static _md5cycle(e,t){let n=e[0],s=e[1],i=e[2],l=e[3];n+=(s&i|~s&l)+t[0]-680876936|0,n=(n<<7|n>>>25)+s|0,l+=(n&s|~n&i)+t[1]-389564586|0,l=(l<<12|l>>>20)+n|0,i+=(l&n|~l&s)+t[2]+606105819|0,i=(i<<17|i>>>15)+l|0,s+=(i&l|~i&n)+t[3]-1044525330|0,s=(s<<22|s>>>10)+i|0,n+=(s&i|~s&l)+t[4]-176418897|0,n=(n<<7|n>>>25)+s|0,l+=(n&s|~n&i)+t[5]+1200080426|0,l=(l<<12|l>>>20)+n|0,i+=(l&n|~l&s)+t[6]-1473231341|0,i=(i<<17|i>>>15)+l|0,s+=(i&l|~i&n)+t[7]-45705983|0,s=(s<<22|s>>>10)+i|0,n+=(s&i|~s&l)+t[8]+1770035416|0,n=(n<<7|n>>>25)+s|0,l+=(n&s|~n&i)+t[9]-1958414417|0,l=(l<<12|l>>>20)+n|0,i+=(l&n|~l&s)+t[10]-42063|0,i=(i<<17|i>>>15)+l|0,s+=(i&l|~i&n)+t[11]-1990404162|0,s=(s<<22|s>>>10)+i|0,n+=(s&i|~s&l)+t[12]+1804603682|0,n=(n<<7|n>>>25)+s|0,l+=(n&s|~n&i)+t[13]-40341101|0,l=(l<<12|l>>>20)+n|0,i+=(l&n|~l&s)+t[14]-1502002290|0,i=(i<<17|i>>>15)+l|0,s+=(i&l|~i&n)+t[15]+1236535329|0,s=(s<<22|s>>>10)+i|0,n+=(s&l|i&~l)+t[1]-165796510|0,n=(n<<5|n>>>27)+s|0,l+=(n&i|s&~i)+t[6]-1069501632|0,l=(l<<9|l>>>23)+n|0,i+=(l&s|n&~s)+t[11]+643717713|0,i=(i<<14|i>>>18)+l|0,s+=(i&n|l&~n)+t[0]-373897302|0,s=(s<<20|s>>>12)+i|0,n+=(s&l|i&~l)+t[5]-701558691|0,n=(n<<5|n>>>27)+s|0,l+=(n&i|s&~i)+t[10]+38016083|0,l=(l<<9|l>>>23)+n|0,i+=(l&s|n&~s)+t[15]-660478335|0,i=(i<<14|i>>>18)+l|0,s+=(i&n|l&~n)+t[4]-405537848|0,s=(s<<20|s>>>12)+i|0,n+=(s&l|i&~l)+t[9]+568446438|0,n=(n<<5|n>>>27)+s|0,l+=(n&i|s&~i)+t[14]-1019803690|0,l=(l<<9|l>>>23)+n|0,i+=(l&s|n&~s)+t[3]-187363961|0,i=(i<<14|i>>>18)+l|0,s+=(i&n|l&~n)+t[8]+1163531501|0,s=(s<<20|s>>>12)+i|0,n+=(s&l|i&~l)+t[13]-1444681467|0,n=(n<<5|n>>>27)+s|0,l+=(n&i|s&~i)+t[2]-51403784|0,l=(l<<9|l>>>23)+n|0,i+=(l&s|n&~s)+t[7]+1735328473|0,i=(i<<14|i>>>18)+l|0,s+=(i&n|l&~n)+t[12]-1926607734|0,s=(s<<20|s>>>12)+i|0,n+=(s^i^l)+t[5]-378558|0,n=(n<<4|n>>>28)+s|0,l+=(n^s^i)+t[8]-2022574463|0,l=(l<<11|l>>>21)+n|0,i+=(l^n^s)+t[11]+1839030562|0,i=(i<<16|i>>>16)+l|0,s+=(i^l^n)+t[14]-35309556|0,s=(s<<23|s>>>9)+i|0,n+=(s^i^l)+t[1]-1530992060|0,n=(n<<4|n>>>28)+s|0,l+=(n^s^i)+t[4]+1272893353|0,l=(l<<11|l>>>21)+n|0,i+=(l^n^s)+t[7]-155497632|0,i=(i<<16|i>>>16)+l|0,s+=(i^l^n)+t[10]-1094730640|0,s=(s<<23|s>>>9)+i|0,n+=(s^i^l)+t[13]+681279174|0,n=(n<<4|n>>>28)+s|0,l+=(n^s^i)+t[0]-358537222|0,l=(l<<11|l>>>21)+n|0,i+=(l^n^s)+t[3]-722521979|0,i=(i<<16|i>>>16)+l|0,s+=(i^l^n)+t[6]+76029189|0,s=(s<<23|s>>>9)+i|0,n+=(s^i^l)+t[9]-640364487|0,n=(n<<4|n>>>28)+s|0,l+=(n^s^i)+t[12]-421815835|0,l=(l<<11|l>>>21)+n|0,i+=(l^n^s)+t[15]+530742520|0,i=(i<<16|i>>>16)+l|0,s+=(i^l^n)+t[2]-995338651|0,s=(s<<23|s>>>9)+i|0,n+=(i^(s|~l))+t[0]-198630844|0,n=(n<<6|n>>>26)+s|0,l+=(s^(n|~i))+t[7]+1126891415|0,l=(l<<10|l>>>22)+n|0,i+=(n^(l|~s))+t[14]-1416354905|0,i=(i<<15|i>>>17)+l|0,s+=(l^(i|~n))+t[5]-57434055|0,s=(s<<21|s>>>11)+i|0,n+=(i^(s|~l))+t[12]+1700485571|0,n=(n<<6|n>>>26)+s|0,l+=(s^(n|~i))+t[3]-1894986606|0,l=(l<<10|l>>>22)+n|0,i+=(n^(l|~s))+t[10]-1051523|0,i=(i<<15|i>>>17)+l|0,s+=(l^(i|~n))+t[1]-2054922799|0,s=(s<<21|s>>>11)+i|0,n+=(i^(s|~l))+t[8]+1873313359|0,n=(n<<6|n>>>26)+s|0,l+=(s^(n|~i))+t[15]-30611744|0,l=(l<<10|l>>>22)+n|0,i+=(n^(l|~s))+t[6]-1560198380|0,i=(i<<15|i>>>17)+l|0,s+=(l^(i|~n))+t[13]+1309151649|0,s=(s<<21|s>>>11)+i|0,n+=(i^(s|~l))+t[4]-145523070|0,n=(n<<6|n>>>26)+s|0,l+=(s^(n|~i))+t[11]-1120210379|0,l=(l<<10|l>>>22)+n|0,i+=(n^(l|~s))+t[2]+718787259|0,i=(i<<15|i>>>17)+l|0,s+=(l^(i|~n))+t[9]-343485551|0,s=(s<<21|s>>>11)+i|0,e[0]=n+e[0]|0,e[1]=s+e[1]|0,e[2]=i+e[2]|0,e[3]=l+e[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(Be.stateIdentity),this}appendStr(e){let t=this._buffer8,n=this._buffer32,s=this._bufferLength,i,l;for(l=0;l<e.length;l+=1){if(i=e.charCodeAt(l),i<128)t[s++]=i;else if(i<2048)t[s++]=(i>>>6)+192,t[s++]=i&63|128;else if(i<55296||i>56319)t[s++]=(i>>>12)+224,t[s++]=i>>>6&63|128,t[s++]=i&63|128;else{if(i=(i-55296)*1024+(e.charCodeAt(++l)-56320)+65536,i>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");t[s++]=(i>>>18)+240,t[s++]=i>>>12&63|128,t[s++]=i>>>6&63|128,t[s++]=i&63|128}s>=64&&(this._dataLength+=64,Be._md5cycle(this._state,n),s-=64,n[0]=n[16])}return this._bufferLength=s,this}appendAsciiStr(e){let t=this._buffer8,n=this._buffer32,s=this._bufferLength,i,l=0;for(;;){for(i=Math.min(e.length-l,64-s);i--;)t[s++]=e.charCodeAt(l++);if(s<64)break;this._dataLength+=64,Be._md5cycle(this._state,n),s=0}return this._bufferLength=s,this}appendByteArray(e){let t=this._buffer8,n=this._buffer32,s=this._bufferLength,i,l=0;for(;;){for(i=Math.min(e.length-l,64-s);i--;)t[s++]=e[l++];if(s<64)break;this._dataLength+=64,Be._md5cycle(this._state,n),s=0}return this._bufferLength=s,this}getState(){let e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(e){let t=e.buffer,n=e.state,s=this._state,i;for(this._dataLength=e.length,this._bufferLength=e.buflen,s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],i=0;i<t.length;i+=1)this._buffer8[i]=t.charCodeAt(i)}end(e=!1){let t=this._bufferLength,n=this._buffer8,s=this._buffer32,i=(t>>2)+1;this._dataLength+=t;let l=this._dataLength*8;if(n[t]=128,n[t+1]=n[t+2]=n[t+3]=0,s.set(Be.buffer32Identity.subarray(i),i),t>55&&(Be._md5cycle(this._state,s),s.set(Be.buffer32Identity)),l<=4294967295)s[14]=l;else{let a=l.toString(16).match(/(.*?)(.{0,8})$/);if(a===null)return;let f=parseInt(a[2],16),w=parseInt(a[1],16)||0;s[14]=f,s[15]=w}return Be._md5cycle(this._state,s),e?this._state:Be._hex(this._state)}},p(et,"Md5"),re(et,"stateIdentity",new Int32Array([1732584193,-271733879,-1732584194,271733878])),re(et,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),re(et,"hexChars","0123456789abcdef"),re(et,"hexOut",[]),re(et,"onePassHasher",new et),mi=et}),Si={};ze(Si,{createHash:()=>Aa,createHmac:()=>Ta,randomBytes:()=>_a});function _a(r){return crypto.getRandomValues(te.alloc(r))}function Aa(r){if(r==="sha256")return{update:p(function(e){return{digest:p(function(){return te.from(_r(e))},"digest")}},"update")};if(r==="md5")return{update:p(function(e){return{digest:p(function(){return typeof e=="string"?mi.hashStr(e):mi.hashByteArray(e)},"digest")}},"update")};throw new Error(`Hash type '${r}' not supported`)}function Ta(r,e){if(r!=="sha256")throw new Error(`Only sha256 is supported (requested: '${r}')`);return{update:p(function(t){return{digest:p(function(){typeof e=="string"&&(e=new TextEncoder().encode(e)),typeof t=="string"&&(t=new TextEncoder().encode(t));let n=e.length;if(n>64)e=_r(e);else if(n<64){let f=new Uint8Array(64);f.set(e),e=f}let s=new Uint8Array(64),i=new Uint8Array(64);for(let f=0;f<64;f++)s[f]=54^e[f],i[f]=92^e[f];let l=new Uint8Array(t.length+64);l.set(s,0),l.set(t,64);let a=new Uint8Array(96);return a.set(i,0),a.set(_r(l),64),te.from(_r(a))},"digest")}},"update")}}var Na=qe(()=>{"use strict";Z(),uf(),hf(),p(_a,"randomBytes"),p(Aa,"createHash"),p(Ta,"createHmac")}),ks=se((r,e)=>{"use strict";Z(),e.exports={host:"localhost",user:ne.platform==="win32"?ne.env.USERNAME:ne.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var t=Ns(),n=t.getTypeParser(20,"text"),s=t.getTypeParser(1016,"text");e.exports.__defineSetter__("parseInt8",function(i){t.setTypeParser(20,"text",i?t.getTypeParser(23,"text"):n),t.setTypeParser(1016,"text",i?t.getTypeParser(1007,"text"):s)})}),Ps=se((r,e)=>{"use strict";Z();var t=(Na(),Ne(Si)),n=ks();function s(m){var c=m.replace(/\\/g,"\\\\").replace(/"/g,'\\"');return'"'+c+'"'}p(s,"escapeElement");function i(m){for(var c="{",y=0;y<m.length;y++)y>0&&(c=c+","),m[y]===null||typeof m[y]>"u"?c=c+"NULL":Array.isArray(m[y])?c=c+i(m[y]):m[y]instanceof te?c+="\\\\x"+m[y].toString("hex"):c+=s(l(m[y]));return c=c+"}",c}p(i,"arrayString");var l=p(function(m,c){if(m==null)return null;if(m instanceof te)return m;if(ArrayBuffer.isView(m)){var y=te.from(m.buffer,m.byteOffset,m.byteLength);return y.length===m.byteLength?y:y.slice(m.byteOffset,m.byteOffset+m.byteLength)}return m instanceof Date?n.parseInputDatesAsUTC?h(m):w(m):Array.isArray(m)?i(m):typeof m=="object"?a(m,c):m.toString()},"prepareValue");function a(m,c){if(m&&typeof m.toPostgres=="function"){if(c=c||[],c.indexOf(m)!==-1)throw new Error('circular reference detected while preparing "'+m+'" for query');return c.push(m),l(m.toPostgres(l),c)}return JSON.stringify(m)}p(a,"prepareObject");function f(m,c){for(m=""+m;m.length<c;)m="0"+m;return m}p(f,"pad");function w(m){var c=-m.getTimezoneOffset(),y=m.getFullYear(),S=y<1;S&&(y=Math.abs(y)+1);var C=f(y,4)+"-"+f(m.getMonth()+1,2)+"-"+f(m.getDate(),2)+"T"+f(m.getHours(),2)+":"+f(m.getMinutes(),2)+":"+f(m.getSeconds(),2)+"."+f(m.getMilliseconds(),3);return c<0?(C+="-",c*=-1):C+="+",C+=f(Math.floor(c/60),2)+":"+f(c%60,2),S&&(C+=" BC"),C}p(w,"dateToString");function h(m){var c=m.getUTCFullYear(),y=c<1;y&&(c=Math.abs(c)+1);var S=f(c,4)+"-"+f(m.getUTCMonth()+1,2)+"-"+f(m.getUTCDate(),2)+"T"+f(m.getUTCHours(),2)+":"+f(m.getUTCMinutes(),2)+":"+f(m.getUTCSeconds(),2)+"."+f(m.getUTCMilliseconds(),3);return S+="+00:00",y&&(S+=" BC"),S}p(h,"dateToStringUTC");function b(m,c,y){return m=typeof m=="string"?{text:m}:m,c&&(typeof c=="function"?m.callback=c:m.values=c),y&&(m.callback=y),m}p(b,"normalizeQueryConfig");var g=p(function(m){return t.createHash("md5").update(m,"utf-8").digest("hex")},"md5"),v=p(function(m,c,y){var S=g(c+m),C=g(te.concat([te.from(S),y]));return"md5"+C},"postgresMd5PasswordHash");e.exports={prepareValue:p(function(m){return l(m)},"prepareValueWrapper"),normalizeQueryConfig:b,postgresMd5PasswordHash:v,md5:g}}),Ar={};ze(Ar,{default:()=>ka});var ka,Ls=qe(()=>{"use strict";Z(),ka={}}),ff=se((r,e)=>{"use strict";Z();var t=(Na(),Ne(Si));function n(c){if(c.indexOf("SCRAM-SHA-256")===-1)throw new Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let y=t.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:y,response:"n,,n=*,r="+y,message:"SASLInitialResponse"}}p(n,"startSession");function s(c,y,S){if(c.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof y!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(typeof S!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let C=w(S);if(C.nonce.startsWith(c.clientNonce)){if(C.nonce.length===c.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var N=te.from(C.salt,"base64"),R=m(y,N,C.iteration),O=v(R,"Client Key"),x=g(O),L="n=*,r="+c.clientNonce,E="r="+C.nonce+",s="+C.salt+",i="+C.iteration,T="c=biws,r="+C.nonce,q=L+","+E+","+T,$=v(x,q),V=b(O,$),G=V.toString("base64"),M=v(R,"Server Key"),B=v(M,q);c.message="SASLResponse",c.serverSignature=B.toString("base64"),c.response=T+",p="+G}p(s,"continueSession");function i(c,y){if(c.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof y!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:S}=h(y);if(S!==c.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}p(i,"finalizeSession");function l(c){if(typeof c!="string")throw new TypeError("SASL: text must be a string");return c.split("").map((y,S)=>c.charCodeAt(S)).every(y=>y>=33&&y<=43||y>=45&&y<=126)}p(l,"isPrintableChars");function a(c){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(c)}p(a,"isBase64");function f(c){if(typeof c!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(c.split(",").map(y=>{if(!/^.=/.test(y))throw new Error("SASL: Invalid attribute pair entry");let S=y[0],C=y.substring(2);return[S,C]}))}p(f,"parseAttributePairs");function w(c){let y=f(c),S=y.get("r");if(S){if(!l(S))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let C=y.get("s");if(C){if(!a(C))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let N=y.get("i");if(N){if(!/^[1-9][0-9]*$/.test(N))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let R=parseInt(N,10);return{nonce:S,salt:C,iteration:R}}p(w,"parseServerFirstMessage");function h(c){let y=f(c).get("v");if(y){if(!a(y))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:y}}p(h,"parseServerFinalMessage");function b(c,y){if(!te.isBuffer(c))throw new TypeError("first argument must be a Buffer");if(!te.isBuffer(y))throw new TypeError("second argument must be a Buffer");if(c.length!==y.length)throw new Error("Buffer lengths must match");if(c.length===0)throw new Error("Buffers cannot be empty");return te.from(c.map((S,C)=>c[C]^y[C]))}p(b,"xorBuffers");function g(c){return t.createHash("sha256").update(c).digest()}p(g,"sha256");function v(c,y){return t.createHmac("sha256",c).update(y).digest()}p(v,"hmacSha256");function m(c,y,S){for(var C=v(c,te.concat([y,te.from([0,0,0,1])])),N=C,R=0;R<S-1;R++)C=v(c,C),N=b(N,C);return N}p(m,"Hi"),e.exports={startSession:n,continueSession:s,finalizeSession:i}}),xi={};ze(xi,{join:()=>Pa});function Pa(...r){return r.join("/")}var La=qe(()=>{"use strict";Z(),p(Pa,"join")}),Ci={};ze(Ci,{stat:()=>Ia});function Ia(r,e){e(new Error("No filesystem"))}var Ra=qe(()=>{"use strict";Z(),p(Ia,"stat")}),Ei={};ze(Ei,{default:()=>Ma});var Ma,Oa=qe(()=>{"use strict";Z(),Ma={}}),$a={};ze($a,{StringDecoder:()=>qa});var pi,qa,df=qe(()=>{"use strict";Z(),pi=class{constructor(e){re(this,"td"),this.td=new TextDecoder(e)}write(e){return this.td.decode(e,{stream:!0})}end(e){return this.td.decode(e)}},p(pi,"StringDecoder"),qa=pi}),pf=se((r,e)=>{"use strict";Z();var{Transform:t}=(Oa(),Ne(Ei)),{StringDecoder:n}=(df(),Ne($a)),s=Symbol("last"),i=Symbol("decoder");function l(b,g,v){let m;if(this.overflow){if(m=this[i].write(b).split(this.matcher),m.length===1)return v();m.shift(),this.overflow=!1}else this[s]+=this[i].write(b),m=this[s].split(this.matcher);this[s]=m.pop();for(let c=0;c<m.length;c++)try{f(this,this.mapper(m[c]))}catch(y){return v(y)}if(this.overflow=this[s].length>this.maxLength,this.overflow&&!this.skipOverflow){v(new Error("maximum buffer reached"));return}v()}p(l,"transform");function a(b){if(this[s]+=this[i].end(),this[s])try{f(this,this.mapper(this[s]))}catch(g){return b(g)}b()}p(a,"flush");function f(b,g){g!==void 0&&b.push(g)}p(f,"push");function w(b){return b}p(w,"noop");function h(b,g,v){switch(b=b||/\r?\n/,g=g||w,v=v||{},arguments.length){case 1:typeof b=="function"?(g=b,b=/\r?\n/):typeof b=="object"&&!(b instanceof RegExp)&&!b[Symbol.split]&&(v=b,b=/\r?\n/);break;case 2:typeof b=="function"?(v=g,g=b,b=/\r?\n/):typeof g=="object"&&(v=g,g=w)}v=Object.assign({},v),v.autoDestroy=!0,v.transform=l,v.flush=a,v.readableObjectMode=!0;let m=new t(v);return m[s]="",m[i]=new n("utf8"),m.matcher=b,m.mapper=g,m.maxLength=v.maxLength,m.skipOverflow=v.skipOverflow||!1,m.overflow=!1,m._destroy=function(c,y){this._writableState.errorEmitted=!1,y(c)},m}p(h,"split"),e.exports=h}),mf=se((r,e)=>{"use strict";Z();var t=(La(),Ne(xi)),n=(Oa(),Ne(Ei)).Stream,s=pf(),i=(Ls(),Ne(Ar)),l=5432,a=ne.platform==="win32",f=ne.stderr,w=56,h=7,b=61440,g=32768;function v(O){return(O&b)==g}p(v,"isRegFile");var m=["host","port","database","user","password"],c=m.length,y=m[c-1];function S(){var O=f instanceof n&&f.writable===!0;if(O){var x=Array.prototype.slice.call(arguments).concat(`
`);f.write(i.format.apply(i,x))}}p(S,"warn"),Object.defineProperty(e.exports,"isWin",{get:p(function(){return a},"get"),set:p(function(O){a=O},"set")}),e.exports.warnTo=function(O){var x=f;return f=O,x},e.exports.getFileName=function(O){var x=O||ne.env,L=x.PGPASSFILE||(a?t.join(x.APPDATA||"./","postgresql","pgpass.conf"):t.join(x.HOME||"./",".pgpass"));return L},e.exports.usePgPass=function(O,x){return Object.prototype.hasOwnProperty.call(ne.env,"PGPASSWORD")?!1:a?!0:(x=x||"<unkn>",v(O.mode)?O.mode&(w|h)?(S('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',x),!1):!0:(S('WARNING: password file "%s" is not a plain file',x),!1))};var C=e.exports.match=function(O,x){return m.slice(0,-1).reduce(function(L,E,T){return T==1&&Number(O[E]||l)===Number(x[E])?L&&!0:L&&(x[E]==="*"||x[E]===O[E])},!0)};e.exports.getPassword=function(O,x,L){var E,T=x.pipe(s());function q(G){var M=N(G);M&&R(M)&&C(O,M)&&(E=M[y],T.end())}p(q,"onLine");var $=p(function(){x.destroy(),L(E)},"onEnd"),V=p(function(G){x.destroy(),S("WARNING: error on reading file: %s",G),L(void 0)},"onErr");x.on("error",V),T.on("data",q).on("end",$).on("error",V)};var N=e.exports.parseLine=function(O){if(O.length<11||O.match(/^\s+#/))return null;for(var x="",L="",E=0,T=0,q=0,$={},V=!1,G=p(function(B,H,X){var F=O.substring(H,X);Object.hasOwnProperty.call(ne.env,"PGPASS_NO_DEESCAPE")||(F=F.replace(/\\([:\\])/g,"$1")),$[m[B]]=F},"addToObj"),M=0;M<O.length-1;M+=1){if(x=O.charAt(M+1),L=O.charAt(M),V=E==c-1,V){G(E,T);break}M>=0&&x==":"&&L!=="\\"&&(G(E,T,M+1),T=M+2,E+=1)}return $=Object.keys($).length===c?$:null,$},R=e.exports.isValidEntry=function(O){for(var x={0:function($){return $.length>0},1:function($){return $==="*"?!0:($=Number($),isFinite($)&&$>0&&$<9007199254740992&&Math.floor($)===$)},2:function($){return $.length>0},3:function($){return $.length>0},4:function($){return $.length>0}},L=0;L<m.length;L+=1){var E=x[L],T=O[m[L]]||"",q=E(T);if(!q)return!1}return!0}}),gf=se((r,e)=>{"use strict";Z();var t=(La(),Ne(xi)),n=(Ra(),Ne(Ci)),s=mf();e.exports=function(i,l){var a=s.getFileName();n.stat(a,function(f,w){if(f||!s.usePgPass(w,a))return l(void 0);var h=n.createReadStream(a);s.getPassword(i,h,l)})},e.exports.warnTo=s.warnTo}),Qa={};ze(Qa,{default:()=>Da});var Da,yf=qe(()=>{"use strict";Z(),Da={}}),bf=se((r,e)=>{"use strict";Z();var t=(Sa(),Ne(va)),n=(Ra(),Ne(Ci));function s(i){if(i.charAt(0)==="/"){var a=i.split(" ");return{host:a[0],database:a[1]}}var l=t.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(i)?encodeURI(i).replace(/\%25(\d\d)/g,"%$1"):i,!0),a=l.query;for(var f in a)Array.isArray(a[f])&&(a[f]=a[f][a[f].length-1]);var w=(l.auth||":").split(":");if(a.user=w[0],a.password=w.splice(1).join(":"),a.port=l.port,l.protocol=="socket:")return a.host=decodeURI(l.pathname),a.database=l.query.db,a.client_encoding=l.query.encoding,a;a.host||(a.host=l.hostname);var h=l.pathname;if(!a.host&&h&&/^%2f/i.test(h)){var b=h.split("/");a.host=decodeURIComponent(b[0]),h=b.splice(1).join("/")}switch(h&&h.charAt(0)==="/"&&(h=h.slice(1)||null),a.database=h&&decodeURI(h),(a.ssl==="true"||a.ssl==="1")&&(a.ssl=!0),a.ssl==="0"&&(a.ssl=!1),(a.sslcert||a.sslkey||a.sslrootcert||a.sslmode)&&(a.ssl={}),a.sslcert&&(a.ssl.cert=n.readFileSync(a.sslcert).toString()),a.sslkey&&(a.ssl.key=n.readFileSync(a.sslkey).toString()),a.sslrootcert&&(a.ssl.ca=n.readFileSync(a.sslrootcert).toString()),a.sslmode){case"disable":{a.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{a.ssl.rejectUnauthorized=!1;break}}return a}p(s,"parse"),e.exports=s,s.parse=s}),_i=se((r,e)=>{"use strict";Z();var t=(yf(),Ne(Qa)),n=ks(),s=bf().parse,i=p(function(b,g,v){return v===void 0?v=ne.env["PG"+b.toUpperCase()]:v===!1||(v=ne.env[v]),g[b]||v||n[b]},"val"),l=p(function(){switch(ne.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return n.ssl},"readSSLConfigFromEnvironment"),a=p(function(b){return"'"+(""+b).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},"quoteParamValue"),f=p(function(b,g,v){var m=g[v];m!=null&&b.push(v+"="+a(m))},"add"),w=class{constructor(g){g=typeof g=="string"?s(g):g||{},g.connectionString&&(g=Object.assign({},g,s(g.connectionString))),this.user=i("user",g),this.database=i("database",g),this.database===void 0&&(this.database=this.user),this.port=parseInt(i("port",g),10),this.host=i("host",g),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:i("password",g)}),this.binary=i("binary",g),this.options=i("options",g),this.ssl=typeof g.ssl>"u"?l():g.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=i("client_encoding",g),this.replication=i("replication",g),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=i("application_name",g,"PGAPPNAME"),this.fallback_application_name=i("fallback_application_name",g,!1),this.statement_timeout=i("statement_timeout",g,!1),this.lock_timeout=i("lock_timeout",g,!1),this.idle_in_transaction_session_timeout=i("idle_in_transaction_session_timeout",g,!1),this.query_timeout=i("query_timeout",g,!1),g.connectionTimeoutMillis===void 0?this.connect_timeout=ne.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(g.connectionTimeoutMillis/1e3),g.keepAlive===!1?this.keepalives=0:g.keepAlive===!0&&(this.keepalives=1),typeof g.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(g.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(g){var v=[];f(v,this,"user"),f(v,this,"password"),f(v,this,"port"),f(v,this,"application_name"),f(v,this,"fallback_application_name"),f(v,this,"connect_timeout"),f(v,this,"options");var m=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(f(v,m,"sslmode"),f(v,m,"sslca"),f(v,m,"sslkey"),f(v,m,"sslcert"),f(v,m,"sslrootcert"),this.database&&v.push("dbname="+a(this.database)),this.replication&&v.push("replication="+a(this.replication)),this.host&&v.push("host="+a(this.host)),this.isDomainSocket)return g(null,v.join(" "));this.client_encoding&&v.push("client_encoding="+a(this.client_encoding)),t.lookup(this.host,function(c,y){return c?g(c,null):(v.push("hostaddr="+a(y)),g(null,v.join(" ")))})}};p(w,"ConnectionParameters");var h=w;e.exports=h}),wf=se((r,e)=>{"use strict";Z();var t=Ns(),n=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,s=class{constructor(a,f){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=f,this.RowCtor=null,this.rowAsArray=a==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(a){var f;a.text?f=n.exec(a.text):f=n.exec(a.command),f&&(this.command=f[1],f[3]?(this.oid=parseInt(f[2],10),this.rowCount=parseInt(f[3],10)):f[2]&&(this.rowCount=parseInt(f[2],10)))}_parseRowAsArray(a){for(var f=new Array(a.length),w=0,h=a.length;w<h;w++){var b=a[w];b!==null?f[w]=this._parsers[w](b):f[w]=null}return f}parseRow(a){for(var f={},w=0,h=a.length;w<h;w++){var b=a[w],g=this.fields[w].name;b!==null?f[g]=this._parsers[w](b):f[g]=null}return f}addRow(a){this.rows.push(a)}addFields(a){this.fields=a,this.fields.length&&(this._parsers=new Array(a.length));for(var f=0;f<a.length;f++){var w=a[f];this._types?this._parsers[f]=this._types.getTypeParser(w.dataTypeID,w.format||"text"):this._parsers[f]=t.getTypeParser(w.dataTypeID,w.format||"text")}}};p(s,"Result");var i=s;e.exports=i}),vf=se((r,e)=>{"use strict";Z();var{EventEmitter:t}=St(),n=wf(),s=Ps(),i=class extends t{constructor(f,w,h){super(),f=s.normalizeQueryConfig(f,w,h),this.text=f.text,this.values=f.values,this.rows=f.rows,this.types=f.types,this.name=f.name,this.binary=f.binary,this.portal=f.portal||"",this.callback=f.callback,this._rowMode=f.rowMode,ne.domain&&f.callback&&(this.callback=ne.domain.bind(f.callback)),this._result=new n(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new n(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(f){this._checkForMultirow(),this._result.addFields(f.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(f){let w;if(!this._canceledDueToError){try{w=this._result.parseRow(f.fields)}catch(h){this._canceledDueToError=h;return}this.emit("row",w,this._result),this._accumulateRows&&this._result.addRow(w)}}handleCommandComplete(f,w){this._checkForMultirow(),this._result.addCommandComplete(f),this.rows&&w.sync()}handleEmptyQuery(f){this.rows&&f.sync()}handleError(f,w){if(this._canceledDueToError&&(f=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(f);this.emit("error",f)}handleReadyForQuery(f){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,f);if(this.callback)try{this.callback(null,this._results)}catch(w){ne.nextTick(()=>{throw w})}this.emit("end",this._results)}submit(f){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let w=f.parsedStatements[this.name];return this.text&&w&&this.text!==w?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(f):f.query(this.text),null)}hasBeenParsed(f){return this.name&&f.parsedStatements[this.name]}handlePortalSuspended(f){this._getRows(f,this.rows)}_getRows(f,w){f.execute({portal:this.portal,rows:w}),w?f.flush():f.sync()}prepare(f){this.isPreparedStatement=!0,this.hasBeenParsed(f)||f.parse({text:this.text,name:this.name,types:this.types});try{f.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:s.prepareValue})}catch(w){this.handleError(w,f);return}f.describe({type:"P",name:this.portal||""}),this._getRows(f,this.rows)}handleCopyInResponse(f){f.sendCopyFail("No source stream defined")}handleCopyData(f,w){}};p(i,"Query");var l=i;e.exports=l}),Ba=se(r=>{"use strict";Z(),Object.defineProperty(r,"__esModule",{value:!0}),r.NoticeMessage=r.DataRowMessage=r.CommandCompleteMessage=r.ReadyForQueryMessage=r.NotificationResponseMessage=r.BackendKeyDataMessage=r.AuthenticationMD5Password=r.ParameterStatusMessage=r.ParameterDescriptionMessage=r.RowDescriptionMessage=r.Field=r.CopyResponse=r.CopyDataMessage=r.DatabaseError=r.copyDone=r.emptyQuery=r.replicationStart=r.portalSuspended=r.noData=r.closeComplete=r.bindComplete=r.parseComplete=void 0,r.parseComplete={name:"parseComplete",length:5},r.bindComplete={name:"bindComplete",length:5},r.closeComplete={name:"closeComplete",length:5},r.noData={name:"noData",length:5},r.portalSuspended={name:"portalSuspended",length:5},r.replicationStart={name:"replicationStart",length:4},r.emptyQuery={name:"emptyQuery",length:4},r.copyDone={name:"copyDone",length:4};var e=class extends Error{constructor(M,B,H){super(M),this.length=B,this.name=H}};p(e,"DatabaseError");var t=e;r.DatabaseError=t;var n=class{constructor(M,B){this.length=M,this.chunk=B,this.name="copyData"}};p(n,"CopyDataMessage");var s=n;r.CopyDataMessage=s;var i=class{constructor(M,B,H,X){this.length=M,this.name=B,this.binary=H,this.columnTypes=new Array(X)}};p(i,"CopyResponse");var l=i;r.CopyResponse=l;var a=class{constructor(M,B,H,X,F,oe,Ie){this.name=M,this.tableID=B,this.columnID=H,this.dataTypeID=X,this.dataTypeSize=F,this.dataTypeModifier=oe,this.format=Ie}};p(a,"Field");var f=a;r.Field=f;var w=class{constructor(M,B){this.length=M,this.fieldCount=B,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};p(w,"RowDescriptionMessage");var h=w;r.RowDescriptionMessage=h;var b=class{constructor(M,B){this.length=M,this.parameterCount=B,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};p(b,"ParameterDescriptionMessage");var g=b;r.ParameterDescriptionMessage=g;var v=class{constructor(M,B,H){this.length=M,this.parameterName=B,this.parameterValue=H,this.name="parameterStatus"}};p(v,"ParameterStatusMessage");var m=v;r.ParameterStatusMessage=m;var c=class{constructor(M,B){this.length=M,this.salt=B,this.name="authenticationMD5Password"}};p(c,"AuthenticationMD5Password");var y=c;r.AuthenticationMD5Password=y;var S=class{constructor(M,B,H){this.length=M,this.processID=B,this.secretKey=H,this.name="backendKeyData"}};p(S,"BackendKeyDataMessage");var C=S;r.BackendKeyDataMessage=C;var N=class{constructor(M,B,H,X){this.length=M,this.processId=B,this.channel=H,this.payload=X,this.name="notification"}};p(N,"NotificationResponseMessage");var R=N;r.NotificationResponseMessage=R;var O=class{constructor(M,B){this.length=M,this.status=B,this.name="readyForQuery"}};p(O,"ReadyForQueryMessage");var x=O;r.ReadyForQueryMessage=x;var L=class{constructor(M,B){this.length=M,this.text=B,this.name="commandComplete"}};p(L,"CommandCompleteMessage");var E=L;r.CommandCompleteMessage=E;var T=class{constructor(M,B){this.length=M,this.fields=B,this.name="dataRow",this.fieldCount=B.length}};p(T,"DataRowMessage");var q=T;r.DataRowMessage=q;var $=class{constructor(M,B){this.length=M,this.message=B,this.name="notice"}};p($,"NoticeMessage");var V=$;r.NoticeMessage=V}),Sf=se(r=>{"use strict";Z(),Object.defineProperty(r,"__esModule",{value:!0}),r.Writer=void 0;var e=class{constructor(s=256){this.size=s,this.offset=5,this.headerPosition=0,this.buffer=te.allocUnsafe(s)}ensure(s){var i=this.buffer.length-this.offset;if(i<s){var l=this.buffer,a=l.length+(l.length>>1)+s;this.buffer=te.allocUnsafe(a),l.copy(this.buffer)}}addInt32(s){return this.ensure(4),this.buffer[this.offset++]=s>>>24&255,this.buffer[this.offset++]=s>>>16&255,this.buffer[this.offset++]=s>>>8&255,this.buffer[this.offset++]=s>>>0&255,this}addInt16(s){return this.ensure(2),this.buffer[this.offset++]=s>>>8&255,this.buffer[this.offset++]=s>>>0&255,this}addCString(s){if(!s)this.ensure(1);else{var i=te.byteLength(s);this.ensure(i+1),this.buffer.write(s,this.offset,"utf-8"),this.offset+=i}return this.buffer[this.offset++]=0,this}addString(s=""){var i=te.byteLength(s);return this.ensure(i),this.buffer.write(s,this.offset),this.offset+=i,this}add(s){return this.ensure(s.length),s.copy(this.buffer,this.offset),this.offset+=s.length,this}join(s){if(s){this.buffer[this.headerPosition]=s;let i=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(i,this.headerPosition+1)}return this.buffer.slice(s?0:5,this.offset)}flush(s){var i=this.join(s);return this.offset=5,this.headerPosition=0,this.buffer=te.allocUnsafe(this.size),i}};p(e,"Writer");var t=e;r.Writer=t}),xf=se(r=>{"use strict";Z(),Object.defineProperty(r,"__esModule",{value:!0}),r.serialize=void 0;var e=Sf(),t=new e.Writer,n=p(M=>{t.addInt16(3).addInt16(0);for(let X of Object.keys(M))t.addCString(X).addCString(M[X]);t.addCString("client_encoding").addCString("UTF8");var B=t.addCString("").flush(),H=B.length+4;return new e.Writer().addInt32(H).add(B).flush()},"startup"),s=p(()=>{let M=te.allocUnsafe(8);return M.writeInt32BE(8,0),M.writeInt32BE(80877103,4),M},"requestSsl"),i=p(M=>t.addCString(M).flush(112),"password"),l=p(function(M,B){return t.addCString(M).addInt32(te.byteLength(B)).addString(B),t.flush(112)},"sendSASLInitialResponseMessage"),a=p(function(M){return t.addString(M).flush(112)},"sendSCRAMClientFinalMessage"),f=p(M=>t.addCString(M).flush(81),"query"),w=[],h=p(M=>{let B=M.name||"";B.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",B,B.length),console.error("This can cause conflicts and silent errors executing queries"));let H=M.types||w;for(var X=H.length,F=t.addCString(B).addCString(M.text).addInt16(X),oe=0;oe<X;oe++)F.addInt32(H[oe]);return t.flush(80)},"parse"),b=new e.Writer,g=p(function(M,B){for(let H=0;H<M.length;H++){let X=B?B(M[H],H):M[H];X==null?(t.addInt16(0),b.addInt32(-1)):X instanceof te?(t.addInt16(1),b.addInt32(X.length),b.add(X)):(t.addInt16(0),b.addInt32(te.byteLength(X)),b.addString(X))}},"writeValues"),v=p((M={})=>{let B=M.portal||"",H=M.statement||"",X=M.binary||!1,F=M.values||w,oe=F.length;return t.addCString(B).addCString(H),t.addInt16(oe),g(F,M.valueMapper),t.addInt16(oe),t.add(b.flush()),t.addInt16(X?1:0),t.flush(66)},"bind"),m=te.from([69,0,0,0,9,0,0,0,0,0]),c=p(M=>{if(!M||!M.portal&&!M.rows)return m;let B=M.portal||"",H=M.rows||0,X=te.byteLength(B),F=4+X+1+4,oe=te.allocUnsafe(1+F);return oe[0]=69,oe.writeInt32BE(F,1),oe.write(B,5,"utf-8"),oe[X+5]=0,oe.writeUInt32BE(H,oe.length-4),oe},"execute"),y=p((M,B)=>{let H=te.allocUnsafe(16);return H.writeInt32BE(16,0),H.writeInt16BE(1234,4),H.writeInt16BE(5678,6),H.writeInt32BE(M,8),H.writeInt32BE(B,12),H},"cancel"),S=p((M,B)=>{let H=4+te.byteLength(B)+1,X=te.allocUnsafe(1+H);return X[0]=M,X.writeInt32BE(H,1),X.write(B,5,"utf-8"),X[H]=0,X},"cstringMessage"),C=t.addCString("P").flush(68),N=t.addCString("S").flush(68),R=p(M=>M.name?S(68,`${M.type}${M.name||""}`):M.type==="P"?C:N,"describe"),O=p(M=>{let B=`${M.type}${M.name||""}`;return S(67,B)},"close"),x=p(M=>t.add(M).flush(100),"copyData"),L=p(M=>S(102,M),"copyFail"),E=p(M=>te.from([M,0,0,0,4]),"codeOnlyBuffer"),T=E(72),q=E(83),$=E(88),V=E(99),G={startup:n,password:i,requestSsl:s,sendSASLInitialResponseMessage:l,sendSCRAMClientFinalMessage:a,query:f,parse:h,bind:v,execute:c,describe:R,close:O,flush:p(()=>T,"flush"),sync:p(()=>q,"sync"),end:p(()=>$,"end"),copyData:x,copyDone:p(()=>V,"copyDone"),copyFail:L,cancel:y};r.serialize=G}),Cf=se(r=>{"use strict";Z(),Object.defineProperty(r,"__esModule",{value:!0}),r.BufferReader=void 0;var e=te.allocUnsafe(0),t=class{constructor(i=0){this.offset=i,this.buffer=e,this.encoding="utf-8"}setBuffer(i,l){this.offset=i,this.buffer=l}int16(){let i=this.buffer.readInt16BE(this.offset);return this.offset+=2,i}byte(){let i=this.buffer[this.offset];return this.offset++,i}int32(){let i=this.buffer.readInt32BE(this.offset);return this.offset+=4,i}uint32(){let i=this.buffer.readUInt32BE(this.offset);return this.offset+=4,i}string(i){let l=this.buffer.toString(this.encoding,this.offset,this.offset+i);return this.offset+=i,l}cstring(){let i=this.offset,l=i;for(;this.buffer[l++]!==0;);return this.offset=l,this.buffer.toString(this.encoding,i,l-1)}bytes(i){let l=this.buffer.slice(this.offset,this.offset+i);return this.offset+=i,l}};p(t,"BufferReader");var n=t;r.BufferReader=n}),Ef=se(r=>{"use strict";Z(),Object.defineProperty(r,"__esModule",{value:!0}),r.Parser=void 0;var e=Ba(),t=Cf(),n=1,s=4,i=n+s,l=te.allocUnsafe(0),a=class{constructor(h){if(this.buffer=l,this.bufferLength=0,this.bufferOffset=0,this.reader=new t.BufferReader,h?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=h?.mode||"text"}parse(h,b){this.mergeBuffer(h);let g=this.bufferOffset+this.bufferLength,v=this.bufferOffset;for(;v+i<=g;){let m=this.buffer[v],c=this.buffer.readUInt32BE(v+n),y=n+c;if(y+v<=g){let S=this.handlePacket(v+i,m,c,this.buffer);b(S),v+=y}else break}v===g?(this.buffer=l,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=g-v,this.bufferOffset=v)}mergeBuffer(h){if(this.bufferLength>0){let b=this.bufferLength+h.byteLength;if(b+this.bufferOffset>this.buffer.byteLength){let g;if(b<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)g=this.buffer;else{let v=this.buffer.byteLength*2;for(;b>=v;)v*=2;g=te.allocUnsafe(v)}this.buffer.copy(g,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=g,this.bufferOffset=0}h.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=b}else this.buffer=h,this.bufferOffset=0,this.bufferLength=h.byteLength}handlePacket(h,b,g,v){switch(b){case 50:return e.bindComplete;case 49:return e.parseComplete;case 51:return e.closeComplete;case 110:return e.noData;case 115:return e.portalSuspended;case 99:return e.copyDone;case 87:return e.replicationStart;case 73:return e.emptyQuery;case 68:return this.parseDataRowMessage(h,g,v);case 67:return this.parseCommandCompleteMessage(h,g,v);case 90:return this.parseReadyForQueryMessage(h,g,v);case 65:return this.parseNotificationMessage(h,g,v);case 82:return this.parseAuthenticationResponse(h,g,v);case 83:return this.parseParameterStatusMessage(h,g,v);case 75:return this.parseBackendKeyData(h,g,v);case 69:return this.parseErrorMessage(h,g,v,"error");case 78:return this.parseErrorMessage(h,g,v,"notice");case 84:return this.parseRowDescriptionMessage(h,g,v);case 116:return this.parseParameterDescriptionMessage(h,g,v);case 71:return this.parseCopyInMessage(h,g,v);case 72:return this.parseCopyOutMessage(h,g,v);case 100:return this.parseCopyData(h,g,v);default:return new e.DatabaseError("received invalid response: "+b.toString(16),g,"error")}}parseReadyForQueryMessage(h,b,g){this.reader.setBuffer(h,g);let v=this.reader.string(1);return new e.ReadyForQueryMessage(b,v)}parseCommandCompleteMessage(h,b,g){this.reader.setBuffer(h,g);let v=this.reader.cstring();return new e.CommandCompleteMessage(b,v)}parseCopyData(h,b,g){let v=g.slice(h,h+(b-4));return new e.CopyDataMessage(b,v)}parseCopyInMessage(h,b,g){return this.parseCopyMessage(h,b,g,"copyInResponse")}parseCopyOutMessage(h,b,g){return this.parseCopyMessage(h,b,g,"copyOutResponse")}parseCopyMessage(h,b,g,v){this.reader.setBuffer(h,g);let m=this.reader.byte()!==0,c=this.reader.int16(),y=new e.CopyResponse(b,v,m,c);for(let S=0;S<c;S++)y.columnTypes[S]=this.reader.int16();return y}parseNotificationMessage(h,b,g){this.reader.setBuffer(h,g);let v=this.reader.int32(),m=this.reader.cstring(),c=this.reader.cstring();return new e.NotificationResponseMessage(b,v,m,c)}parseRowDescriptionMessage(h,b,g){this.reader.setBuffer(h,g);let v=this.reader.int16(),m=new e.RowDescriptionMessage(b,v);for(let c=0;c<v;c++)m.fields[c]=this.parseField();return m}parseField(){let h=this.reader.cstring(),b=this.reader.uint32(),g=this.reader.int16(),v=this.reader.uint32(),m=this.reader.int16(),c=this.reader.int32(),y=this.reader.int16()===0?"text":"binary";return new e.Field(h,b,g,v,m,c,y)}parseParameterDescriptionMessage(h,b,g){this.reader.setBuffer(h,g);let v=this.reader.int16(),m=new e.ParameterDescriptionMessage(b,v);for(let c=0;c<v;c++)m.dataTypeIDs[c]=this.reader.int32();return m}parseDataRowMessage(h,b,g){this.reader.setBuffer(h,g);let v=this.reader.int16(),m=new Array(v);for(let c=0;c<v;c++){let y=this.reader.int32();m[c]=y===-1?null:this.reader.string(y)}return new e.DataRowMessage(b,m)}parseParameterStatusMessage(h,b,g){this.reader.setBuffer(h,g);let v=this.reader.cstring(),m=this.reader.cstring();return new e.ParameterStatusMessage(b,v,m)}parseBackendKeyData(h,b,g){this.reader.setBuffer(h,g);let v=this.reader.int32(),m=this.reader.int32();return new e.BackendKeyDataMessage(b,v,m)}parseAuthenticationResponse(h,b,g){this.reader.setBuffer(h,g);let v=this.reader.int32(),m={name:"authenticationOk",length:b};switch(v){case 0:break;case 3:m.length===8&&(m.name="authenticationCleartextPassword");break;case 5:if(m.length===12){m.name="authenticationMD5Password";let y=this.reader.bytes(4);return new e.AuthenticationMD5Password(b,y)}break;case 10:m.name="authenticationSASL",m.mechanisms=[];let c;do c=this.reader.cstring(),c&&m.mechanisms.push(c);while(c);break;case 11:m.name="authenticationSASLContinue",m.data=this.reader.string(b-8);break;case 12:m.name="authenticationSASLFinal",m.data=this.reader.string(b-8);break;default:throw new Error("Unknown authenticationOk message type "+v)}return m}parseErrorMessage(h,b,g,v){this.reader.setBuffer(h,g);let m={},c=this.reader.string(1);for(;c!=="\0";)m[c]=this.reader.cstring(),c=this.reader.string(1);let y=m.M,S=v==="notice"?new e.NoticeMessage(b,y):new e.DatabaseError(y,b,v);return S.severity=m.S,S.code=m.C,S.detail=m.D,S.hint=m.H,S.position=m.P,S.internalPosition=m.p,S.internalQuery=m.q,S.where=m.W,S.schema=m.s,S.table=m.t,S.column=m.c,S.dataType=m.d,S.constraint=m.n,S.file=m.F,S.line=m.L,S.routine=m.R,S}};p(a,"Parser");var f=a;r.Parser=f}),Fa=se(r=>{"use strict";Z(),Object.defineProperty(r,"__esModule",{value:!0}),r.DatabaseError=r.serialize=r.parse=void 0;var e=Ba();Object.defineProperty(r,"DatabaseError",{enumerable:!0,get:p(function(){return e.DatabaseError},"get")});var t=xf();Object.defineProperty(r,"serialize",{enumerable:!0,get:p(function(){return t.serialize},"get")});var n=Ef();function s(i,l){let a=new n.Parser;return i.on("data",f=>a.parse(f,l)),new Promise(f=>i.on("end",()=>f()))}p(s,"parse"),r.parse=s}),ja={};ze(ja,{connect:()=>Ua});function Ua({socket:r,servername:e}){return r.startTls(e),r}var _f=qe(()=>{"use strict";Z(),p(Ua,"connect")}),za=se((r,e)=>{"use strict";Z();var t=(Ts(),Ne(ba)),n=St().EventEmitter,{parse:s,serialize:i}=Fa(),l=i.flush(),a=i.sync(),f=i.end(),w=class extends n{constructor(g){super(),g=g||{},this.stream=g.stream||new t.Socket,this._keepAlive=g.keepAlive,this._keepAliveInitialDelayMillis=g.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=g.ssl||!1,this._ending=!1,this._emitMessage=!1;var v=this;this.on("newListener",function(m){m==="message"&&(v._emitMessage=!0)})}connect(g,v){var m=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(g,v),this.stream.once("connect",function(){m._keepAlive&&m.stream.setKeepAlive(!0,m._keepAliveInitialDelayMillis),m.emit("connect")});let c=p(function(y){m._ending&&(y.code==="ECONNRESET"||y.code==="EPIPE")||m.emit("error",y)},"reportStreamError");if(this.stream.on("error",c),this.stream.on("close",function(){m.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(y){var S=y.toString("utf8");switch(S){case"S":break;case"N":return m.stream.end(),m.emit("error",new Error("The server does not support SSL connections"));default:return m.stream.end(),m.emit("error",new Error("There was an error establishing an SSL connection"))}var C=(_f(),Ne(ja));let N={socket:m.stream};m.ssl!==!0&&(Object.assign(N,m.ssl),"key"in m.ssl&&(N.key=m.ssl.key)),t.isIP(v)===0&&(N.servername=v);try{m.stream=C.connect(N)}catch(R){return m.emit("error",R)}m.attachListeners(m.stream),m.stream.on("error",c),m.emit("sslconnect")})}attachListeners(g){g.on("end",()=>{this.emit("end")}),s(g,v=>{var m=v.name==="error"?"errorMessage":v.name;this._emitMessage&&this.emit("message",v),this.emit(m,v)})}requestSsl(){this.stream.write(i.requestSsl())}startup(g){this.stream.write(i.startup(g))}cancel(g,v){this._send(i.cancel(g,v))}password(g){this._send(i.password(g))}sendSASLInitialResponseMessage(g,v){this._send(i.sendSASLInitialResponseMessage(g,v))}sendSCRAMClientFinalMessage(g){this._send(i.sendSCRAMClientFinalMessage(g))}_send(g){return this.stream.writable?this.stream.write(g):!1}query(g){this._send(i.query(g))}parse(g){this._send(i.parse(g))}bind(g){this._send(i.bind(g))}execute(g){this._send(i.execute(g))}flush(){this.stream.writable&&this.stream.write(l)}sync(){this._ending=!0,this._send(l),this._send(a)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(f,()=>{this.stream.end()})}close(g){this._send(i.close(g))}describe(g){this._send(i.describe(g))}sendCopyFromChunk(g){this._send(i.copyData(g))}endCopyFrom(){this._send(i.copyDone())}sendCopyFail(g){this._send(i.copyFail(g))}};p(w,"Connection");var h=w;e.exports=h}),Af=se((r,e)=>{"use strict";Z();var t=St().EventEmitter,n=(Ls(),Ne(Ar)),s=Ps(),i=ff(),l=gf(),a=vi(),f=_i(),w=vf(),h=ks(),b=za(),g=class extends t{constructor(c){super(),this.connectionParameters=new f(c),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var y=c||{};this._Promise=y.Promise||_s.Promise,this._types=new a(y.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=y.connection||new b({stream:y.stream,ssl:this.connectionParameters.ssl,keepAlive:y.keepAlive||!1,keepAliveInitialDelayMillis:y.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=y.binary||h.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=y.connectionTimeoutMillis||0}_errorAllQueries(c){let y=p(S=>{ne.nextTick(()=>{S.handleError(c,this.connection)})},"enqueueError");this.activeQuery&&(y(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(y),this.queryQueue.length=0}_connect(c){var y=this,S=this.connection;if(this._connectionCallback=c,this._connecting||this._connected){let C=new Error("Client has already been connected. You cannot reuse a client.");ne.nextTick(()=>{c(C)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{S._ending=!0,S.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&this.host.indexOf("/")===0?S.connect(this.host+"/.s.PGSQL."+this.port):S.connect(this.port,this.host),S.on("connect",function(){y.ssl?S.requestSsl():S.startup(y.getStartupConf())}),S.on("sslconnect",function(){S.startup(y.getStartupConf())}),this._attachListeners(S),S.once("end",()=>{let C=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(C),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(C):this._handleErrorEvent(C):this._connectionError||this._handleErrorEvent(C)),ne.nextTick(()=>{this.emit("end")})})}connect(c){if(c){this._connect(c);return}return new this._Promise((y,S)=>{this._connect(C=>{C?S(C):y()})})}_attachListeners(c){c.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),c.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),c.on("authenticationSASL",this._handleAuthSASL.bind(this)),c.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),c.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),c.on("backendKeyData",this._handleBackendKeyData.bind(this)),c.on("error",this._handleErrorEvent.bind(this)),c.on("errorMessage",this._handleErrorMessage.bind(this)),c.on("readyForQuery",this._handleReadyForQuery.bind(this)),c.on("notice",this._handleNotice.bind(this)),c.on("rowDescription",this._handleRowDescription.bind(this)),c.on("dataRow",this._handleDataRow.bind(this)),c.on("portalSuspended",this._handlePortalSuspended.bind(this)),c.on("emptyQuery",this._handleEmptyQuery.bind(this)),c.on("commandComplete",this._handleCommandComplete.bind(this)),c.on("parseComplete",this._handleParseComplete.bind(this)),c.on("copyInResponse",this._handleCopyInResponse.bind(this)),c.on("copyData",this._handleCopyData.bind(this)),c.on("notification",this._handleNotification.bind(this))}_checkPgPass(c){let y=this.connection;typeof this.password=="function"?this._Promise.resolve().then(()=>this.password()).then(S=>{if(S!==void 0){if(typeof S!="string"){y.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=S}else this.connectionParameters.password=this.password=null;c()}).catch(S=>{y.emit("error",S)}):this.password!==null?c():l(this.connectionParameters,S=>{S!==void 0&&(this.connectionParameters.password=this.password=S),c()})}_handleAuthCleartextPassword(c){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(c){this._checkPgPass(()=>{let y=s.postgresMd5PasswordHash(this.user,this.password,c.salt);this.connection.password(y)})}_handleAuthSASL(c){this._checkPgPass(()=>{this.saslSession=i.startSession(c.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(c){i.continueSession(this.saslSession,this.password,c.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(c){i.finalizeSession(this.saslSession,c.data),this.saslSession=null}_handleBackendKeyData(c){this.processID=c.processID,this.secretKey=c.secretKey}_handleReadyForQuery(c){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:y}=this;this.activeQuery=null,this.readyForQuery=!0,y&&y.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(c){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(c);this.emit("error",c)}}_handleErrorEvent(c){if(this._connecting)return this._handleErrorWhileConnecting(c);this._queryable=!1,this._errorAllQueries(c),this.emit("error",c)}_handleErrorMessage(c){if(this._connecting)return this._handleErrorWhileConnecting(c);let y=this.activeQuery;if(!y){this._handleErrorEvent(c);return}this.activeQuery=null,y.handleError(c,this.connection)}_handleRowDescription(c){this.activeQuery.handleRowDescription(c)}_handleDataRow(c){this.activeQuery.handleDataRow(c)}_handlePortalSuspended(c){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(c){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(c){this.activeQuery.handleCommandComplete(c,this.connection)}_handleParseComplete(c){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(c){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(c){this.activeQuery.handleCopyData(c,this.connection)}_handleNotification(c){this.emit("notification",c)}_handleNotice(c){this.emit("notice",c)}getStartupConf(){var c=this.connectionParameters,y={user:c.user,database:c.database},S=c.application_name||c.fallback_application_name;return S&&(y.application_name=S),c.replication&&(y.replication=""+c.replication),c.statement_timeout&&(y.statement_timeout=String(parseInt(c.statement_timeout,10))),c.lock_timeout&&(y.lock_timeout=String(parseInt(c.lock_timeout,10))),c.idle_in_transaction_session_timeout&&(y.idle_in_transaction_session_timeout=String(parseInt(c.idle_in_transaction_session_timeout,10))),c.options&&(y.options=c.options),y}cancel(c,y){if(c.activeQuery===y){var S=this.connection;this.host&&this.host.indexOf("/")===0?S.connect(this.host+"/.s.PGSQL."+this.port):S.connect(this.port,this.host),S.on("connect",function(){S.cancel(c.processID,c.secretKey)})}else c.queryQueue.indexOf(y)!==-1&&c.queryQueue.splice(c.queryQueue.indexOf(y),1)}setTypeParser(c,y,S){return this._types.setTypeParser(c,y,S)}getTypeParser(c,y){return this._types.getTypeParser(c,y)}escapeIdentifier(c){return'"'+c.replace(/"/g,'""')+'"'}escapeLiteral(c){for(var y=!1,S="'",C=0;C<c.length;C++){var N=c[C];N==="'"?S+=N+N:N==="\\"?(S+=N+N,y=!0):S+=N}return S+="'",y===!0&&(S=" E"+S),S}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let c=this.activeQuery.submit(this.connection);c&&ne.nextTick(()=>{this.activeQuery.handleError(c,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(c,y,S){var C,N,R,O,x;if(c==null)throw new TypeError("Client was passed a null or undefined query");return typeof c.submit=="function"?(R=c.query_timeout||this.connectionParameters.query_timeout,N=C=c,typeof y=="function"&&(C.callback=C.callback||y)):(R=this.connectionParameters.query_timeout,C=new w(c,y,S),C.callback||(N=new this._Promise((L,E)=>{C.callback=(T,q)=>T?E(T):L(q)}))),R&&(x=C.callback,O=setTimeout(()=>{var L=new Error("Query read timeout");ne.nextTick(()=>{C.handleError(L,this.connection)}),x(L),C.callback=()=>{};var E=this.queryQueue.indexOf(C);E>-1&&this.queryQueue.splice(E,1),this._pulseQueryQueue()},R),C.callback=(L,E)=>{clearTimeout(O),x(L,E)}),this.binary&&!C.binary&&(C.binary=!0),C._result&&!C._result._types&&(C._result._types=this._types),this._queryable?this._ending?(ne.nextTick(()=>{C.handleError(new Error("Client was closed and is not queryable"),this.connection)}),N):(this.queryQueue.push(C),this._pulseQueryQueue(),N):(ne.nextTick(()=>{C.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),N)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(c){if(this._ending=!0,!this.connection._connecting)if(c)c();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),c)this.connection.once("end",c);else return new this._Promise(y=>{this.connection.once("end",y)})}};p(g,"Client");var v=g;v.Query=w,e.exports=v}),Tf=se((r,e)=>{"use strict";Z();var t=St().EventEmitter,n=p(function(){},"NOOP"),s=p((m,c)=>{let y=m.findIndex(c);return y===-1?void 0:m.splice(y,1)[0]},"removeWhere"),i=class{constructor(c,y,S){this.client=c,this.idleListener=y,this.timeoutId=S}};p(i,"IdleItem");var l=i,a=class{constructor(c){this.callback=c}};p(a,"PendingItem");var f=a;function w(){throw new Error("Release called on client which has already been released to the pool.")}p(w,"throwOnDoubleRelease");function h(m,c){if(c)return{callback:c,result:void 0};let y,S,C=p(function(R,O){R?y(R):S(O)},"cb"),N=new m(function(R,O){S=R,y=O}).catch(R=>{throw Error.captureStackTrace(R),R});return{callback:C,result:N}}p(h,"promisify");function b(m,c){return p(function y(S){S.client=c,c.removeListener("error",y),c.on("error",()=>{m.log("additional client error after disconnection due to error",S)}),m._remove(c),m.emit("error",S,c)},"idleListener")}p(b,"makeIdleListener");var g=class extends t{constructor(c,y){super(),this.options=Object.assign({},c),c!=null&&"password"in c&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:c.password}),c!=null&&c.ssl&&c.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||y||Is().Client,this.Promise=this.options.Promise||_s.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(y=>{this._remove(y.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let c=this._pendingQueue.shift();if(this._idle.length){let y=this._idle.pop();clearTimeout(y.timeoutId);let S=y.client;S.ref&&S.ref();let C=y.idleListener;return this._acquireClient(S,c,C,!1)}if(!this._isFull())return this.newClient(c);throw new Error("unexpected condition")}_remove(c){let y=s(this._idle,S=>S.client===c);y!==void 0&&clearTimeout(y.timeoutId),this._clients=this._clients.filter(S=>S!==c),c.end(),this.emit("remove",c)}connect(c){if(this.ending){let C=new Error("Cannot use a pool after calling end on the pool");return c?c(C):this.Promise.reject(C)}let y=h(this.Promise,c),S=y.result;if(this._isFull()||this._idle.length){if(this._idle.length&&ne.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new f(y.callback)),S;let C=p((O,x,L)=>{clearTimeout(R),y.callback(O,x,L)},"queueCallback"),N=new f(C),R=setTimeout(()=>{s(this._pendingQueue,O=>O.callback===C),N.timedOut=!0,y.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return R.unref&&R.unref(),this._pendingQueue.push(N),S}return this.newClient(new f(y.callback)),S}newClient(c){let y=new this.Client(this.options);this._clients.push(y);let S=b(this,y);this.log("checking client timeout");let C,N=!1;this.options.connectionTimeoutMillis&&(C=setTimeout(()=>{this.log("ending client due to timeout"),N=!0,y.connection?y.connection.stream.destroy():y.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),y.connect(R=>{if(C&&clearTimeout(C),y.on("error",S),R)this.log("client failed to connect",R),this._clients=this._clients.filter(O=>O!==y),N&&(R=new Error("Connection terminated due to connection timeout",{cause:R})),this._pulseQueue(),c.timedOut||c.callback(R,void 0,n);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let O=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(y),this._idle.findIndex(x=>x.client===y)!==-1&&this._acquireClient(y,new f((x,L,E)=>E()),S,!1)},this.options.maxLifetimeSeconds*1e3);O.unref(),y.once("end",()=>clearTimeout(O))}return this._acquireClient(y,c,S,!0)}})}_acquireClient(c,y,S,C){C&&this.emit("connect",c),this.emit("acquire",c),c.release=this._releaseOnce(c,S),c.removeListener("error",S),y.timedOut?C&&this.options.verify?this.options.verify(c,c.release):c.release():C&&this.options.verify?this.options.verify(c,N=>{if(N)return c.release(N),y.callback(N,void 0,n);y.callback(void 0,c,c.release)}):y.callback(void 0,c,c.release)}_releaseOnce(c,y){let S=!1;return C=>{S&&w(),S=!0,this._release(c,y,C)}}_release(c,y,S){if(c.on("error",y),c._poolUseCount=(c._poolUseCount||0)+1,this.emit("release",S,c),S||this.ending||!c._queryable||c._ending||c._poolUseCount>=this.options.maxUses){c._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(c),this._pulseQueue();return}if(this._expired.has(c)){this.log("remove expired client"),this._expired.delete(c),this._remove(c),this._pulseQueue();return}let C;this.options.idleTimeoutMillis&&(C=setTimeout(()=>{this.log("remove idle client"),this._remove(c)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&C.unref()),this.options.allowExitOnIdle&&c.unref(),this._idle.push(new l(c,y,C)),this._pulseQueue()}query(c,y,S){if(typeof c=="function"){let N=h(this.Promise,c);return bi(function(){return N.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),N.result}typeof y=="function"&&(S=y,y=void 0);let C=h(this.Promise,S);return S=C.callback,this.connect((N,R)=>{if(N)return S(N);let O=!1,x=p(L=>{O||(O=!0,R.release(L),S(L))},"onError");R.once("error",x),this.log("dispatching query");try{R.query(c,y,(L,E)=>{if(this.log("query dispatched"),R.removeListener("error",x),!O)return O=!0,R.release(L),L?S(L):S(void 0,E)})}catch(L){return R.release(L),S(L)}}),C.result}end(c){if(this.log("ending"),this.ending){let S=new Error("Called end on pool more than once");return c?c(S):this.Promise.reject(S)}this.ending=!0;let y=h(this.Promise,c);return this._endCallback=y.callback,this._pulseQueue(),y.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((c,y)=>c+(this._expired.has(y)?1:0),0)}get totalCount(){return this._clients.length}};p(g,"Pool");var v=g;e.exports=v}),Va={};ze(Va,{default:()=>Ka});var Ka,Nf=qe(()=>{"use strict";Z(),Ka={}}),kf=se((r,e)=>{e.exports={name:"pg",version:"8.8.0",description:"PostgreSQL client - pure javascript & libpq with the same API",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],homepage:"https://github.com/brianc/node-postgres",repository:{type:"git",url:"git://github.com/brianc/node-postgres.git",directory:"packages/pg"},author:"Brian Carlson <brian.m.carlson@gmail.com>",main:"./lib",dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.2","pg-protocol":"^1.5.0","pg-types":"^2.1.0",pgpass:"1.x"},devDependencies:{async:"2.6.4",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},peerDependencies:{"pg-native":">=3.0.1"},peerDependenciesMeta:{"pg-native":{optional:!0}},scripts:{test:"make test-all"},files:["lib","SPONSORS.md"],license:"MIT",engines:{node:">= 8.0.0"},gitHead:"c99fb2c127ddf8d712500db2c7b9a5491a178655"}}),Pf=se((r,e)=>{"use strict";Z();var t=St().EventEmitter,n=(Ls(),Ne(Ar)),s=Ps(),i=e.exports=function(a,f,w){t.call(this),a=s.normalizeQueryConfig(a,f,w),this.text=a.text,this.values=a.values,this.name=a.name,this.callback=a.callback,this.state="new",this._arrayMode=a.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(h){h==="row"&&(this._emitRowEvents=!0)}.bind(this))};n.inherits(i,t);var l={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};i.prototype.handleError=function(a){var f=this.native.pq.resultErrorFields();if(f)for(var w in f){var h=l[w]||w;a[h]=f[w]}this.callback?this.callback(a):this.emit("error",a),this.state="error"},i.prototype.then=function(a,f){return this._getPromise().then(a,f)},i.prototype.catch=function(a){return this._getPromise().catch(a)},i.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(a,f){this._once("end",a),this._once("error",f)}.bind(this)),this._promise)},i.prototype.submit=function(a){this.state="running";var f=this;this.native=a.native,a.native.arrayMode=this._arrayMode;var w=p(function(g,v,m){if(a.native.arrayMode=!1,bi(function(){f.emit("_done")}),g)return f.handleError(g);f._emitRowEvents&&(m.length>1?v.forEach((c,y)=>{c.forEach(S=>{f.emit("row",S,m[y])})}):v.forEach(function(c){f.emit("row",c,m)})),f.state="end",f.emit("end",m),f.callback&&f.callback(null,m)},"after");if(ne.domain&&(w=ne.domain.bind(w)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var h=(this.values||[]).map(s.prepareValue);if(a.namedQueries[this.name]){if(this.text&&a.namedQueries[this.name]!==this.text){let g=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return w(g)}return a.native.execute(this.name,h,w)}return a.native.prepare(this.name,this.text,h.length,function(g){return g?w(g):(a.namedQueries[f.name]=f.text,f.native.execute(f.name,h,w))})}else if(this.values){if(!Array.isArray(this.values)){let g=new Error("Query values must be an array");return w(g)}var b=this.values.map(s.prepareValue);a.native.query(this.text,b,w)}else a.native.query(this.text,w)}}),Lf=se((r,e)=>{"use strict";Z();var t=(Nf(),Ne(Va)),n=vi(),s=kf(),i=St().EventEmitter,l=(Ls(),Ne(Ar)),a=_i(),f=Pf(),w=e.exports=function(h){i.call(this),h=h||{},this._Promise=h.Promise||_s.Promise,this._types=new n(h.types),this.native=new t({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var b=this.connectionParameters=new a(h);this.user=b.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:b.password}),this.database=b.database,this.host=b.host,this.port=b.port,this.namedQueries={}};w.Query=f,l.inherits(w,i),w.prototype._errorAllQueries=function(h){let b=p(g=>{ne.nextTick(()=>{g.native=this.native,g.handleError(h)})},"enqueueError");this._hasActiveQuery()&&(b(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(b),this._queryQueue.length=0},w.prototype._connect=function(h){var b=this;if(this._connecting){ne.nextTick(()=>h(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(g,v){if(g)return h(g);b.native.connect(v,function(m){if(m)return b.native.end(),h(m);b._connected=!0,b.native.on("error",function(c){b._queryable=!1,b._errorAllQueries(c),b.emit("error",c)}),b.native.on("notification",function(c){b.emit("notification",{channel:c.relname,payload:c.extra})}),b.emit("connect"),b._pulseQueryQueue(!0),h()})})},w.prototype.connect=function(h){if(h){this._connect(h);return}return new this._Promise((b,g)=>{this._connect(v=>{v?g(v):b()})})},w.prototype.query=function(h,b,g){var v,m,c,y,S;if(h==null)throw new TypeError("Client was passed a null or undefined query");if(typeof h.submit=="function")c=h.query_timeout||this.connectionParameters.query_timeout,m=v=h,typeof b=="function"&&(h.callback=b);else if(c=this.connectionParameters.query_timeout,v=new f(h,b,g),!v.callback){let C,N;m=new this._Promise((R,O)=>{C=R,N=O}),v.callback=(R,O)=>R?N(R):C(O)}return c&&(S=v.callback,y=setTimeout(()=>{var C=new Error("Query read timeout");ne.nextTick(()=>{v.handleError(C,this.connection)}),S(C),v.callback=()=>{};var N=this._queryQueue.indexOf(v);N>-1&&this._queryQueue.splice(N,1),this._pulseQueryQueue()},c),v.callback=(C,N)=>{clearTimeout(y),S(C,N)}),this._queryable?this._ending?(v.native=this.native,ne.nextTick(()=>{v.handleError(new Error("Client was closed and is not queryable"))}),m):(this._queryQueue.push(v),this._pulseQueryQueue(),m):(v.native=this.native,ne.nextTick(()=>{v.handleError(new Error("Client has encountered a connection error and is not queryable"))}),m)},w.prototype.end=function(h){var b=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,h));var g;return h||(g=new this._Promise(function(v,m){h=p(c=>c?m(c):v(),"cb")})),this.native.end(function(){b._errorAllQueries(new Error("Connection terminated")),ne.nextTick(()=>{b.emit("end"),h&&h()})}),g},w.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"},w.prototype._pulseQueryQueue=function(h){if(this._connected&&!this._hasActiveQuery()){var b=this._queryQueue.shift();if(!b){h||this.emit("drain");return}this._activeQuery=b,b.submit(this);var g=this;b.once("_done",function(){g._pulseQueryQueue()})}},w.prototype.cancel=function(h){this._activeQuery===h?this.native.cancel(function(){}):this._queryQueue.indexOf(h)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(h),1)},w.prototype.ref=function(){},w.prototype.unref=function(){},w.prototype.setTypeParser=function(h,b,g){return this._types.setTypeParser(h,b,g)},w.prototype.getTypeParser=function(h,b){return this._types.getTypeParser(h,b)}}),fa=se((r,e)=>{"use strict";Z(),e.exports=Lf()}),Is=se((r,e)=>{"use strict";Z();var t=Af(),n=ks(),s=za(),i=Tf(),{DatabaseError:l}=Fa(),a=p(w=>{var h;return h=class extends i{constructor(b){super(b,w)}},p(h,"BoundPool"),h},"poolFactory"),f=p(function(w){this.defaults=n,this.Client=w,this.Query=this.Client.Query,this.Pool=a(this.Client),this._pools=[],this.Connection=s,this.types=Ns(),this.DatabaseError=l},"PG");typeof ne.env.NODE_PG_FORCE_NATIVE<"u"?e.exports=new f(fa()):(e.exports=new f(t),Object.defineProperty(e.exports,"native",{configurable:!0,enumerable:!1,get(){var w=null;try{w=new f(fa())}catch(h){if(h.code!=="MODULE_NOT_FOUND")throw h}return Object.defineProperty(e.exports,"native",{value:w}),w}}))});Z();Z();Ts();Sa();Z();var If=Object.defineProperty,Rf=Object.defineProperties,Mf=Object.getOwnPropertyDescriptors,da=Object.getOwnPropertySymbols,Of=Object.prototype.hasOwnProperty,$f=Object.prototype.propertyIsEnumerable,pa=p((r,e,t)=>e in r?If(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,"__defNormalProp"),qf=p((r,e)=>{for(var t in e||(e={}))Of.call(e,t)&&pa(r,t,e[t]);if(da)for(var t of da(e))$f.call(e,t)&&pa(r,t,e[t]);return r},"__spreadValues"),Qf=p((r,e)=>Rf(r,Mf(e)),"__spreadProps"),Df=1008e3,ma=new Uint8Array(new Uint16Array([258]).buffer)[0]===2,Bf=new TextDecoder,Ai=new TextEncoder,Ss=Ai.encode("0123456789abcdef"),xs=Ai.encode("0123456789ABCDEF"),Ff=Ai.encode("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Wa=Ff.slice();Wa[62]=45;Wa[63]=95;var Er,Cs;function Ga(r,{alphabet:e,scratchArr:t}={}){if(!Er)if(Er=new Uint16Array(256),Cs=new Uint16Array(256),ma)for(let v=0;v<256;v++)Er[v]=Ss[v&15]<<8|Ss[v>>>4],Cs[v]=xs[v&15]<<8|xs[v>>>4];else for(let v=0;v<256;v++)Er[v]=Ss[v&15]|Ss[v>>>4]<<8,Cs[v]=xs[v&15]|xs[v>>>4]<<8;r.byteOffset%4!==0&&(r=new Uint8Array(r));let n=r.length,s=n>>>1,i=n>>>2,l=t||new Uint16Array(n),a=new Uint32Array(r.buffer,r.byteOffset,i),f=new Uint32Array(l.buffer,l.byteOffset,s),w=e==="upper"?Cs:Er,h=0,b=0,g;if(ma)for(;h<i;)g=a[h++],f[b++]=w[g>>>8&255]<<16|w[g&255],f[b++]=w[g>>>24]<<16|w[g>>>16&255];else for(;h<i;)g=a[h++],f[b++]=w[g>>>24]<<16|w[g>>>16&255],f[b++]=w[g>>>8&255]<<16|w[g&255];for(h<<=2;h<n;)l[h]=w[r[h++]];return Bf.decode(l.subarray(0,n))}p(Ga,"_toHex");function Ha(r,e={}){let t="",n=r.length,s=Df>>>1,i=Math.ceil(n/s),l=new Uint16Array(i>1?s:n);for(let a=0;a<i;a++){let f=a*s,w=f+s;t+=Ga(r.subarray(f,w),Qf(qf({},e),{scratchArr:l}))}return t}p(Ha,"_toHexChunked");function Ja(r,e={}){return e.alphabet!=="upper"&&typeof r.toHex=="function"?r.toHex():Ha(r,e)}p(Ja,"toHex");Z();var Ya=class Za{constructor(e,t){this.strings=e,this.values=t}toParameterizedQuery(e={query:"",params:[]}){let{strings:t,values:n}=this;for(let s=0,i=t.length;s<i;s++)if(e.query+=t[s],s<n.length){let l=n[s];if(l instanceof tl)e.query+=l.sql;else if(l instanceof Es)if(l.queryData instanceof Za)l.queryData.toParameterizedQuery(e);else{if(l.queryData.params?.length)throw new Error("This query is not composable");e.query+=l.queryData.query}else{let{params:a}=e;a.push(l),e.query+="$"+a.length,(l instanceof te||ArrayBuffer.isView(l))&&(e.query+="::bytea")}}return e}};p(Ya,"SqlTemplate");var Xa=Ya,el=class{constructor(e){this.sql=e}};p(el,"UnsafeRawSql");var tl=el,jf=vt(vi()),Uf=vt(Ps()),rl=class nl extends Error{constructor(e){super(e),re(this,"name","NeonDbError"),re(this,"severity"),re(this,"code"),re(this,"detail"),re(this,"hint"),re(this,"position"),re(this,"internalPosition"),re(this,"internalQuery"),re(this,"where"),re(this,"schema"),re(this,"table"),re(this,"column"),re(this,"dataType"),re(this,"constraint"),re(this,"file"),re(this,"line"),re(this,"routine"),re(this,"sourceError"),"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,nl)}};p(rl,"NeonDbError");var Kt=rl,ga="transaction() expects an array of queries, or a function returning an array of queries",zf=["severity","code","detail","hint","position","internalPosition","internalQuery","where","schema","table","column","dataType","constraint","file","line","routine"];function sl(r){return r instanceof te?"\\x"+Ja(r):r}p(sl,"encodeBuffersAsBytea");function gi(r){let{query:e,params:t}=r instanceof Xa?r.toParameterizedQuery():r;return{query:e,params:t.map(n=>sl((0,Uf.prepareValue)(n)))}}p(gi,"prepareQuery");function lt(r,{arrayMode:e,fullResults:t,fetchOptions:n,isolationLevel:s,readOnly:i,deferrable:l,authToken:a}={}){if(!r)throw new Error("No database connection string was provided to `neon()`. Perhaps an environment variable has not been set?");let f;try{f=wi(r)}catch{throw new Error("Database connection string provided to `neon()` is not a valid URL. Connection string: "+String(r))}let{protocol:w,username:h,hostname:b,port:g,pathname:v}=f;if(w!=="postgres:"&&w!=="postgresql:"||!h||!b||!v)throw new Error("Database connection string format for `neon()` should be: postgresql://user:password@host.tld/dbname?option=value");function m(y,...S){if(!(Array.isArray(y)&&Array.isArray(y.raw)&&Array.isArray(S)))throw new Error('This function can now be called only as a tagged-template function: sql`SELECT ${value}`, not sql("SELECT $1", [value], options). For a conventional function call with value placeholders ($1, $2, etc.), use sql.query("SELECT $1", [value], options).');return new Es(c,new Xa(y,S))}p(m,"templateFn"),m.query=(y,S,C)=>new Es(c,{query:y,params:S??[]},C),m.unsafe=y=>new tl(y),m.transaction=async(y,S)=>{if(typeof y=="function"&&(y=y(m)),!Array.isArray(y))throw new Error(ga);y.forEach(R=>{if(!(R instanceof Es))throw new Error(ga)});let C=y.map(R=>R.queryData),N=y.map(R=>R.opts??{});return c(C,N,S)};async function c(y,S,C){let{fetchEndpoint:N,fetchFunction:R}=As,O=Array.isArray(y)?{queries:y.map(X=>gi(X))}:gi(y),x=n??{},L=e??!1,E=t??!1,T=s,q=i,$=l;C!==void 0&&(C.fetchOptions!==void 0&&(x={...x,...C.fetchOptions}),C.arrayMode!==void 0&&(L=C.arrayMode),C.fullResults!==void 0&&(E=C.fullResults),C.isolationLevel!==void 0&&(T=C.isolationLevel),C.readOnly!==void 0&&(q=C.readOnly),C.deferrable!==void 0&&($=C.deferrable)),S!==void 0&&!Array.isArray(S)&&S.fetchOptions!==void 0&&(x={...x,...S.fetchOptions});let V=a;!Array.isArray(S)&&S?.authToken!==void 0&&(V=S.authToken);let G=typeof N=="function"?N(b,g,{jwtAuth:V!==void 0}):N,M={"Neon-Connection-String":r,"Neon-Raw-Text-Output":"true","Neon-Array-Mode":"true"},B=await ol(V);B&&(M.Authorization=`Bearer ${B}`),Array.isArray(y)&&(T!==void 0&&(M["Neon-Batch-Isolation-Level"]=T),q!==void 0&&(M["Neon-Batch-Read-Only"]=String(q)),$!==void 0&&(M["Neon-Batch-Deferrable"]=String($)));let H;try{H=await(R??fetch)(G,{method:"POST",body:JSON.stringify(O),headers:M,...x})}catch(X){let F=new Kt(`Error connecting to database: ${X}`);throw F.sourceError=X,F}if(H.ok){let X=await H.json();if(Array.isArray(y)){let F=X.results;if(!Array.isArray(F))throw new Kt("Neon internal error: unexpected result format");return F.map((oe,Ie)=>{let ue=S[Ie]??{},ye=ue.arrayMode??L,be=ue.fullResults??E;return yi(oe,{arrayMode:ye,fullResults:be,types:ue.types})})}else{let F=S??{},oe=F.arrayMode??L,Ie=F.fullResults??E;return yi(X,{arrayMode:oe,fullResults:Ie,types:F.types})}}else{let{status:X}=H;if(X===400){let F=await H.json(),oe=new Kt(F.message);for(let Ie of zf)oe[Ie]=F[Ie]??void 0;throw oe}else{let F=await H.text();throw new Kt(`Server error (HTTP status ${X}): ${F}`)}}}return p(c,"execute"),m}p(lt,"neon");var il=class{constructor(e,t,n){this.execute=e,this.queryData=t,this.opts=n}then(e,t){return this.execute(this.queryData,this.opts).then(e,t)}catch(e){return this.execute(this.queryData,this.opts).catch(e)}finally(e){return this.execute(this.queryData,this.opts).finally(e)}};p(il,"NeonQueryPromise");var Es=il;function yi(r,{arrayMode:e,fullResults:t,types:n}){let s=new jf.default(n),i=r.fields.map(f=>f.name),l=r.fields.map(f=>s.getTypeParser(f.dataTypeID)),a=e===!0?r.rows.map(f=>f.map((w,h)=>w===null?null:l[h](w))):r.rows.map(f=>Object.fromEntries(f.map((w,h)=>[i[h],w===null?null:l[h](w)])));return t?(r.viaNeonFetch=!0,r.rowAsArray=e,r.rows=a,r._parsers=l,r._types=s,r):a}p(yi,"processQueryResult");async function ol(r){if(typeof r=="string")return r;if(typeof r=="function")try{return await Promise.resolve(r())}catch(e){let t=new Kt("Error getting auth token.");throw e instanceof Error&&(t=new Kt(`Error getting auth token: ${e.message}`)),t}}p(ol,"getAuthToken");Z();var Vf=vt(Is());Z();var Kf=vt(Is()),al=class extends Kf.Client{constructor(e){super(e),this.config=e}get neonConfig(){return this.connection.stream}connect(e){let{neonConfig:t}=this;t.forceDisablePgSSL&&(this.ssl=this.connection.ssl=!1),this.ssl&&t.useSecureWebSocket&&console.warn("SSL is enabled for both Postgres (e.g. ?sslmode=require in the connection string + forceDisablePgSSL = false) and the WebSocket tunnel (useSecureWebSocket = true). Double encryption will increase latency and CPU usage. It may be appropriate to disable SSL in the Postgres connection parameters or set forceDisablePgSSL = true.");let n=typeof this.config!="string"&&this.config?.host!==void 0||typeof this.config!="string"&&this.config?.connectionString!==void 0||ne.env.PGHOST!==void 0,s=ne.env.USER??ne.env.USERNAME;if(!n&&this.host==="localhost"&&this.user===s&&this.database===s&&this.password===null)throw new Error(`No database host or connection string was set, and key parameters have default values (host: localhost, user: ${s}, db: ${s}, password: null). Is an environment variable missing? Alternatively, if you intended to connect with these parameters, please set the host to 'localhost' explicitly.`);let i=super.connect(e),l=t.pipelineTLS&&this.ssl,a=t.pipelineConnect==="password";if(!l&&!t.pipelineConnect)return i;let f=this.connection;if(l&&f.on("connect",()=>f.stream.emit("data","S")),a){f.removeAllListeners("authenticationCleartextPassword"),f.removeAllListeners("readyForQuery"),f.once("readyForQuery",()=>f.on("readyForQuery",this._handleReadyForQuery.bind(this)));let w=this.ssl?"sslconnect":"connect";f.on(w,()=>{this._handleAuthCleartextPassword(),this._handleReadyForQuery()})}return i}async _handleAuthSASLContinue(e){if(typeof crypto>"u"||crypto.subtle===void 0||crypto.subtle.importKey===void 0)throw new Error("Cannot use SASL auth when `crypto.subtle` is not defined");let t=crypto.subtle,n=this.saslSession,s=this.password,i=e.data;if(n.message!=="SASLInitialResponse"||typeof s!="string"||typeof i!="string")throw new Error("SASL: protocol error");let l=Object.fromEntries(i.split(",").map(F=>{if(!/^.=/.test(F))throw new Error("SASL: Invalid attribute pair entry");let oe=F[0],Ie=F.substring(2);return[oe,Ie]})),a=l.r,f=l.s,w=l.i;if(!a||!/^[!-+--~]+$/.test(a))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing/unprintable");if(!f||!/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(f))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing/not base64");if(!w||!/^[1-9][0-9]*$/.test(w))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: missing/invalid iteration count");if(!a.startsWith(n.clientNonce))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(a.length===n.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let h=parseInt(w,10),b=te.from(f,"base64"),g=new TextEncoder,v=g.encode(s),m=await t.importKey("raw",v,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),c=new Uint8Array(await t.sign("HMAC",m,te.concat([b,te.from([0,0,0,1])]))),y=c;for(var S=0;S<h-1;S++)c=new Uint8Array(await t.sign("HMAC",m,c)),y=te.from(y.map((F,oe)=>y[oe]^c[oe]));let C=y,N=await t.importKey("raw",C,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),R=new Uint8Array(await t.sign("HMAC",N,g.encode("Client Key"))),O=await t.digest("SHA-256",R),x="n=*,r="+n.clientNonce,L="r="+a+",s="+f+",i="+h,E="c=biws,r="+a,T=x+","+L+","+E,q=await t.importKey("raw",O,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var $=new Uint8Array(await t.sign("HMAC",q,g.encode(T))),V=te.from(R.map((F,oe)=>R[oe]^$[oe])),G=V.toString("base64");let M=await t.importKey("raw",C,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),B=await t.sign("HMAC",M,g.encode("Server Key")),H=await t.importKey("raw",B,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var X=te.from(await t.sign("HMAC",H,g.encode(T)));n.message="SASLResponse",n.serverSignature=X.toString("base64"),n.response=E+",p="+G,this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}};p(al,"NeonClient");var Wf=al;Ts();var Gf=vt(_i());function ll(r,e){if(e)return{callback:e,result:void 0};let t,n,s=p(function(l,a){l?t(l):n(a)},"cb"),i=new r(function(l,a){n=l,t=a});return{callback:s,result:i}}p(ll,"promisify");var Hf=class extends Vf.Pool{constructor(){super(...arguments),re(this,"Client",Wf),re(this,"hasFetchUnsupportedListeners",!1),re(this,"addListener",this.on)}on(e,t){return e!=="error"&&(this.hasFetchUnsupportedListeners=!0),super.on(e,t)}query(e,t,n){if(!As.poolQueryViaFetch||this.hasFetchUnsupportedListeners||typeof e=="function")return super.query(e,t,n);typeof t=="function"&&(n=t,t=void 0);let s=ll(this.Promise,n);n=s.callback;try{let i=new Gf.default(this.options),l=encodeURIComponent,a=encodeURI,f=`postgresql://${l(i.user)}:${l(i.password)}@${l(i.host)}/${a(i.database)}`,w=typeof e=="string"?e:e.text,h=t??e.values??[];lt(f,{fullResults:!0,arrayMode:e.rowMode==="array"}).query(w,h,{types:e.types??this.options?.types}).then(b=>n(void 0,b)).catch(b=>n(b))}catch(i){n(i)}return s.result}};p(Hf,"NeonPool");Ts();var Ti=vt(Is());var y1=Ti.DatabaseError,b1=Ti.defaults,Qe=Ti.types;var Jf,Rs=class{write(e){console.log(e)}};Jf=_,A(Rs,Jf,"ConsoleLogWriter");var Yf,Tr=class{writer;constructor(e){this.writer=e?.writer??new Rs}logQuery(e,t){let n=t.map(i=>{try{return JSON.stringify(i)}catch{return String(i)}}),s=n.length?` -- params: [${n.join(", ")}]`:"";this.writer.write(`Query: ${e}${s}`)}};Yf=_,A(Tr,Yf,"DefaultLogger");var Zf,Nr=class{logQuery(){}};Zf=_,A(Nr,Zf,"NoopLogger");var Ms={arrayMode:!1,fullResults:!0},ki={arrayMode:!0,fullResults:!0},Xf,Os=class extends vr{constructor(e,t,n,s,i,l){super(t),this.client=e,this.logger=n,this.fields=s,this._isResponseInArrayMode=i,this.customResultMapper=l,this.clientQuery=e.query??e}clientQuery;async execute(e={},t=this.authToken){let n=zr(this.query.params,e);this.logger.logQuery(this.query.sql,n);let{fields:s,clientQuery:i,query:l,customResultMapper:a}=this;if(!s&&!a)return i(l.sql,n,t===void 0?Ms:{...Ms,authToken:t});let f=await i(l.sql,n,t===void 0?ki:{...ki,authToken:t});return this.mapResult(f)}mapResult(e){if(!this.fields&&!this.customResultMapper)return e;let t=e.rows;return this.customResultMapper?this.customResultMapper(t):t.map(n=>So(this.fields,n,this.joinsNotNullableMap))}all(e={}){let t=zr(this.query.params,e);return this.logger.logQuery(this.query.sql,t),this.clientQuery(this.query.sql,t,this.authToken===void 0?Ms:{...Ms,authToken:this.authToken}).then(n=>n.rows)}values(e={},t){let n=zr(this.query.params,e);return this.logger.logQuery(this.query.sql,n),this.clientQuery(this.query.sql,n,{arrayMode:!0,fullResults:!0,authToken:t}).then(s=>s.rows)}isResponseInArrayMode(){return this._isResponseInArrayMode}};Xf=_,A(Os,Xf,"NeonHttpPreparedQuery");var ed,kr=class extends Sr{constructor(e,t,n,s={}){super(t),this.client=e,this.schema=n,this.options=s,this.clientQuery=e.query??e,this.logger=s.logger??new Nr}clientQuery;logger;prepareQuery(e,t,n,s,i){return new Os(this.client,e,this.logger,t,s,i)}async batch(e){let t=[],n=[];for(let i of e){let l=i._prepare(),a=l.getQuery();t.push(l),n.push(this.clientQuery(a.sql,a.params,{fullResults:!0,arrayMode:l.isResponseInArrayMode()}))}return(await this.client.transaction(n,ki)).map((i,l)=>t[l].mapResult(i,!0))}async query(e,t){return this.logger.logQuery(e,t),await this.clientQuery(e,t,{arrayMode:!0,fullResults:!0})}async queryObjects(e,t){return this.clientQuery(e,t,{arrayMode:!1,fullResults:!0})}async count(e,t){let n=await this.execute(e,t);return Number(n.rows[0].count)}async transaction(e,t={}){throw new Error("No transactions support in neon-http driver")}};ed=_,A(kr,ed,"NeonHttpSession");var td,Ni=class extends xr{async transaction(e){throw new Error("No transactions support in neon-http driver")}};td=_,A(Ni,td,"NeonHttpTransaction");var rd,$s=class{constructor(e,t,n={}){this.client=e,this.dialect=t,this.options=n,this.initMappers()}createSession(e){return new kr(this.client,this.dialect,e,{logger:this.options.logger})}initMappers(){Qe.setTypeParser(Qe.builtins.TIMESTAMPTZ,e=>e),Qe.setTypeParser(Qe.builtins.TIMESTAMP,e=>e),Qe.setTypeParser(Qe.builtins.DATE,e=>e),Qe.setTypeParser(Qe.builtins.INTERVAL,e=>e),Qe.setTypeParser(1231,e=>e),Qe.setTypeParser(1115,e=>e),Qe.setTypeParser(1185,e=>e),Qe.setTypeParser(1187,e=>e),Qe.setTypeParser(1182,e=>e)}};rd=_,A($s,rd,"NeonHttpDriver");function Qs(r,e,t,n){return new Proxy(r,{get(s,i){let l=s[i];return typeof l!="function"&&(typeof l!="object"||l===null)?l:n?Qs(l,e,t):i==="query"?Qs(l,e,t,!0):new Proxy(l,{apply(a,f,w){let h=a.call(f,...w);return typeof h=="object"&&h!==null&&"setToken"in h&&typeof h.setToken=="function"&&h.setToken(e),t(a,i,h)}})}})}var nd,qs=class extends bt{$withAuth(e){return this.authToken=e,Qs(this,e,(t,n,s)=>n==="with"?Qs(s,e,(i,l,a)=>a):s)}async batch(e){return this.session.batch(e)}};nd=_,A(qs,nd,"NeonHttpDatabase");function Gt(r,e={}){let t=new Xe({casing:e.casing}),n;e.logger===!0?n=new Tr:e.logger!==!1&&(n=e.logger);let s;if(e.schema){let f=na(e.schema,ia);s={fullSchema:e.schema,schema:f.tables,tableNamesMap:f.tableNamesMap}}let l=new $s(r,t,{logger:n}).createSession(s),a=new qs(t,l,s);return a.$client=r,a}function Ds(...r){if(typeof r[0]=="string"){let e=lt(r[0]);return Gt(e,r[1])}if(Eo(r[0])){let{connection:e,client:t,...n}=r[0];if(t)return Gt(t,n);if(typeof e=="object"){let{connectionString:i,...l}=e,a=lt(i,l);return Gt(a,n)}let s=lt(e);return Gt(s,n)}return Gt(r[0],r[1])}(r=>{function e(t){return Gt({},t)}r.mock=e})(Ds||(Ds={}));var sd=process.env.DATABASE_URL,id=lt(sd),V1=Ds(id,{schema:fi});var Ee=ht(Bi(),1);var ul=ht(Bi(),1);function cl(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function od(...r){return e=>{let t=!1,n=r.map(s=>{let i=cl(s,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let s=0;s<n.length;s++){let i=n[s];typeof i=="function"?i():cl(r[s],null)}}}}function hl(...r){return ul.useCallback(od(...r),r)}var Bs=ht(Xt(),1);function ad(r){let e=ld(r),t=Ee.forwardRef((n,s)=>{let{children:i,...l}=n,a=Ee.Children.toArray(i),f=a.find(ud);if(f){let w=f.props.children,h=a.map(b=>b===f?Ee.Children.count(w)>1?Ee.Children.only(null):Ee.isValidElement(w)?w.props.children:null:b);return(0,Bs.jsx)(e,{...l,ref:s,children:Ee.isValidElement(w)?Ee.cloneElement(w,void 0,h):null})}return(0,Bs.jsx)(e,{...l,ref:s,children:i})});return t.displayName=`${r}.Slot`,t}var fl=ad("Slot");function ld(r){let e=Ee.forwardRef((t,n)=>{let{children:s,...i}=t,l=Ee.isValidElement(s)?fd(s):void 0,a=hl(l,n);if(Ee.isValidElement(s)){let f=hd(i,s.props);return s.type!==Ee.Fragment&&(f.ref=a),Ee.cloneElement(s,f)}return Ee.Children.count(s)>1?Ee.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var cd=Symbol("radix.slottable");function ud(r){return Ee.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===cd}function hd(r,e){let t={...e};for(let n in e){let s=r[n],i=e[n];/^on[A-Z]/.test(n)?s&&i?t[n]=(...a)=>{let f=i(...a);return s(...a),f}:s&&(t[n]=s):n==="style"?t[n]={...s,...i}:n==="className"&&(t[n]=[s,i].filter(Boolean).join(" "))}return{...r,...t}}function fd(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}function dl(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(e=0;e<s;e++)r[e]&&(t=dl(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function Fs(){for(var r,e,t=0,n="",s=arguments.length;t<s;t++)(r=arguments[t])&&(e=dl(r))&&(n&&(n+=" "),n+=e);return n}var pl=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,ml=Fs,gl=(r,e)=>t=>{var n;if(e?.variants==null)return ml(r,t?.class,t?.className);let{variants:s,defaultVariants:i}=e,l=Object.keys(s).map(w=>{let h=t?.[w],b=i?.[w];if(h===null)return null;let g=pl(h)||pl(b);return s[w][g]}),a=t&&Object.entries(t).reduce((w,h)=>{let[b,g]=h;return g===void 0||(w[b]=g),w},{}),f=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((w,h)=>{let{class:b,className:g,...v}=h;return Object.entries(v).every(m=>{let[c,y]=m;return Array.isArray(y)?y.includes({...i,...a}[c]):{...i,...a}[c]===y})?[...w,b,g]:w},[]);return ml(r,l,f,t?.class,t?.className)};var Oi="-",dd=r=>{let e=md(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=r;return{getClassGroupId:l=>{let a=l.split(Oi);return a[0]===""&&a.length!==1&&a.shift(),Sl(a,e)||pd(l)},getConflictingClassGroupIds:(l,a)=>{let f=t[l]||[];return a&&n[l]?[...f,...n[l]]:f}}},Sl=(r,e)=>{if(r.length===0)return e.classGroupId;let t=r[0],n=e.nextPart.get(t),s=n?Sl(r.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;let i=r.join(Oi);return e.validators.find(({validator:l})=>l(i))?.classGroupId},yl=/^\[(.+)\]$/,pd=r=>{if(yl.test(r)){let e=yl.exec(r)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},md=r=>{let{theme:e,classGroups:t}=r,n={nextPart:new Map,validators:[]};for(let s in t)Ii(t[s],n,s,e);return n},Ii=(r,e,t,n)=>{r.forEach(s=>{if(typeof s=="string"){let i=s===""?e:bl(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(gd(s)){Ii(s(n),e,t,n);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([i,l])=>{Ii(l,bl(e,i),t,n)})})},bl=(r,e)=>{let t=r;return e.split(Oi).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},gd=r=>r.isThemeGetter,yd=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map,s=(i,l)=>{t.set(i,l),e++,e>r&&(e=0,n=t,t=new Map)};return{get(i){let l=t.get(i);if(l!==void 0)return l;if((l=n.get(i))!==void 0)return s(i,l),l},set(i,l){t.has(i)?t.set(i,l):s(i,l)}}},Ri="!",Mi=":",bd=Mi.length,wd=r=>{let{prefix:e,experimentalParseClassName:t}=r,n=s=>{let i=[],l=0,a=0,f=0,w;for(let m=0;m<s.length;m++){let c=s[m];if(l===0&&a===0){if(c===Mi){i.push(s.slice(f,m)),f=m+bd;continue}if(c==="/"){w=m;continue}}c==="["?l++:c==="]"?l--:c==="("?a++:c===")"&&a--}let h=i.length===0?s:s.substring(f),b=vd(h),g=b!==h,v=w&&w>f?w-f:void 0;return{modifiers:i,hasImportantModifier:g,baseClassName:b,maybePostfixModifierPosition:v}};if(e){let s=e+Mi,i=n;n=l=>l.startsWith(s)?i(l.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(t){let s=n;n=i=>t({className:i,parseClassName:s})}return n},vd=r=>r.endsWith(Ri)?r.substring(0,r.length-1):r.startsWith(Ri)?r.substring(1):r,Sd=r=>{let e=Object.fromEntries(r.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;let s=[],i=[];return n.forEach(l=>{l[0]==="["||e[l]?(s.push(...i.sort(),l),i=[]):i.push(l)}),s.push(...i.sort()),s}},xd=r=>({cache:yd(r.cacheSize),parseClassName:wd(r),sortModifiers:Sd(r),...dd(r)}),Cd=/\s+/,Ed=(r,e)=>{let{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:s,sortModifiers:i}=e,l=[],a=r.trim().split(Cd),f="";for(let w=a.length-1;w>=0;w-=1){let h=a[w],{isExternal:b,modifiers:g,hasImportantModifier:v,baseClassName:m,maybePostfixModifierPosition:c}=t(h);if(b){f=h+(f.length>0?" "+f:f);continue}let y=!!c,S=n(y?m.substring(0,c):m);if(!S){if(!y){f=h+(f.length>0?" "+f:f);continue}if(S=n(m),!S){f=h+(f.length>0?" "+f:f);continue}y=!1}let C=i(g).join(":"),N=v?C+Ri:C,R=N+S;if(l.includes(R))continue;l.push(R);let O=s(S,y);for(let x=0;x<O.length;++x){let L=O[x];l.push(N+L)}f=h+(f.length>0?" "+f:f)}return f};function _d(){let r=0,e,t,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=xl(e))&&(n&&(n+=" "),n+=t);return n}var xl=r=>{if(typeof r=="string")return r;let e,t="";for(let n=0;n<r.length;n++)r[n]&&(e=xl(r[n]))&&(t&&(t+=" "),t+=e);return t};function Ad(r,...e){let t,n,s,i=l;function l(f){let w=e.reduce((h,b)=>b(h),r());return t=xd(w),n=t.cache.get,s=t.cache.set,i=a,a(f)}function a(f){let w=n(f);if(w)return w;let h=Ed(f,t);return s(f,h),h}return function(){return i(_d.apply(null,arguments))}}var _e=r=>{let e=t=>t[r]||[];return e.isThemeGetter=!0,e},Cl=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,El=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Td=/^\d+\/\d+$/,Nd=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,kd=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Pd=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Ld=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Id=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ht=r=>Td.test(r),ie=r=>!!r&&!Number.isNaN(Number(r)),ct=r=>!!r&&Number.isInteger(Number(r)),Pi=r=>r.endsWith("%")&&ie(r.slice(0,-1)),tt=r=>Nd.test(r),Rd=()=>!0,Md=r=>kd.test(r)&&!Pd.test(r),_l=()=>!1,Od=r=>Ld.test(r),$d=r=>Id.test(r),qd=r=>!J(r)&&!Y(r),Qd=r=>Jt(r,Nl,_l),J=r=>Cl.test(r),xt=r=>Jt(r,kl,Md),Li=r=>Jt(r,Ud,ie),wl=r=>Jt(r,Al,_l),Dd=r=>Jt(r,Tl,$d),js=r=>Jt(r,Pl,Od),Y=r=>El.test(r),Pr=r=>Yt(r,kl),Bd=r=>Yt(r,zd),vl=r=>Yt(r,Al),Fd=r=>Yt(r,Nl),jd=r=>Yt(r,Tl),Us=r=>Yt(r,Pl,!0),Jt=(r,e,t)=>{let n=Cl.exec(r);return n?n[1]?e(n[1]):t(n[2]):!1},Yt=(r,e,t=!1)=>{let n=El.exec(r);return n?n[1]?e(n[1]):t:!1},Al=r=>r==="position"||r==="percentage",Tl=r=>r==="image"||r==="url",Nl=r=>r==="length"||r==="size"||r==="bg-size",kl=r=>r==="length",Ud=r=>r==="number",zd=r=>r==="family-name",Pl=r=>r==="shadow";var Vd=()=>{let r=_e("color"),e=_e("font"),t=_e("text"),n=_e("font-weight"),s=_e("tracking"),i=_e("leading"),l=_e("breakpoint"),a=_e("container"),f=_e("spacing"),w=_e("radius"),h=_e("shadow"),b=_e("inset-shadow"),g=_e("text-shadow"),v=_e("drop-shadow"),m=_e("blur"),c=_e("perspective"),y=_e("aspect"),S=_e("ease"),C=_e("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],R=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],O=()=>[...R(),Y,J],x=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto","contain","none"],E=()=>[Y,J,f],T=()=>[Ht,"full","auto",...E()],q=()=>[ct,"none","subgrid",Y,J],$=()=>["auto",{span:["full",ct,Y,J]},ct,Y,J],V=()=>[ct,"auto",Y,J],G=()=>["auto","min","max","fr",Y,J],M=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],B=()=>["start","end","center","stretch","center-safe","end-safe"],H=()=>["auto",...E()],X=()=>[Ht,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...E()],F=()=>[r,Y,J],oe=()=>[...R(),vl,wl,{position:[Y,J]}],Ie=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ue=()=>["auto","cover","contain",Fd,Qd,{size:[Y,J]}],ye=()=>[Pi,Pr,xt],be=()=>["","none","full",w,Y,J],ke=()=>["",ie,Pr,xt],rt=()=>["solid","dashed","dotted","double"],Ct=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ge=()=>[ie,Pi,vl,wl],Ge=()=>["","none",m,Y,J],He=()=>["none",ie,Y,J],nt=()=>["none",ie,Y,J],Et=()=>[ie,Y,J],st=()=>[Ht,"full",...E()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[tt],breakpoint:[tt],color:[Rd],container:[tt],"drop-shadow":[tt],ease:["in","out","in-out"],font:[qd],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[tt],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[tt],shadow:[tt],spacing:["px",ie],text:[tt],"text-shadow":[tt],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ht,J,Y,y]}],container:["container"],columns:[{columns:[ie,J,Y,a]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:O()}],overflow:[{overflow:x()}],"overflow-x":[{"overflow-x":x()}],"overflow-y":[{"overflow-y":x()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:T()}],"inset-x":[{"inset-x":T()}],"inset-y":[{"inset-y":T()}],start:[{start:T()}],end:[{end:T()}],top:[{top:T()}],right:[{right:T()}],bottom:[{bottom:T()}],left:[{left:T()}],visibility:["visible","invisible","collapse"],z:[{z:[ct,"auto",Y,J]}],basis:[{basis:[Ht,"full","auto",a,...E()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ie,Ht,"auto","initial","none",J]}],grow:[{grow:["",ie,Y,J]}],shrink:[{shrink:["",ie,Y,J]}],order:[{order:[ct,"first","last","none",Y,J]}],"grid-cols":[{"grid-cols":q()}],"col-start-end":[{col:$()}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":q()}],"row-start-end":[{row:$()}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":G()}],"auto-rows":[{"auto-rows":G()}],gap:[{gap:E()}],"gap-x":[{"gap-x":E()}],"gap-y":[{"gap-y":E()}],"justify-content":[{justify:[...M(),"normal"]}],"justify-items":[{"justify-items":[...B(),"normal"]}],"justify-self":[{"justify-self":["auto",...B()]}],"align-content":[{content:["normal",...M()]}],"align-items":[{items:[...B(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...B(),{baseline:["","last"]}]}],"place-content":[{"place-content":M()}],"place-items":[{"place-items":[...B(),"baseline"]}],"place-self":[{"place-self":["auto",...B()]}],p:[{p:E()}],px:[{px:E()}],py:[{py:E()}],ps:[{ps:E()}],pe:[{pe:E()}],pt:[{pt:E()}],pr:[{pr:E()}],pb:[{pb:E()}],pl:[{pl:E()}],m:[{m:H()}],mx:[{mx:H()}],my:[{my:H()}],ms:[{ms:H()}],me:[{me:H()}],mt:[{mt:H()}],mr:[{mr:H()}],mb:[{mb:H()}],ml:[{ml:H()}],"space-x":[{"space-x":E()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":E()}],"space-y-reverse":["space-y-reverse"],size:[{size:X()}],w:[{w:[a,"screen",...X()]}],"min-w":[{"min-w":[a,"screen","none",...X()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[l]},...X()]}],h:[{h:["screen","lh",...X()]}],"min-h":[{"min-h":["screen","lh","none",...X()]}],"max-h":[{"max-h":["screen","lh",...X()]}],"font-size":[{text:["base",t,Pr,xt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Y,Li]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Pi,J]}],"font-family":[{font:[Bd,J,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Y,J]}],"line-clamp":[{"line-clamp":[ie,"none",Y,Li]}],leading:[{leading:[i,...E()]}],"list-image":[{"list-image":["none",Y,J]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Y,J]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:F()}],"text-color":[{text:F()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...rt(),"wavy"]}],"text-decoration-thickness":[{decoration:[ie,"from-font","auto",Y,xt]}],"text-decoration-color":[{decoration:F()}],"underline-offset":[{"underline-offset":[ie,"auto",Y,J]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Y,J]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Y,J]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:oe()}],"bg-repeat":[{bg:Ie()}],"bg-size":[{bg:ue()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ct,Y,J],radial:["",Y,J],conic:[ct,Y,J]},jd,Dd]}],"bg-color":[{bg:F()}],"gradient-from-pos":[{from:ye()}],"gradient-via-pos":[{via:ye()}],"gradient-to-pos":[{to:ye()}],"gradient-from":[{from:F()}],"gradient-via":[{via:F()}],"gradient-to":[{to:F()}],rounded:[{rounded:be()}],"rounded-s":[{"rounded-s":be()}],"rounded-e":[{"rounded-e":be()}],"rounded-t":[{"rounded-t":be()}],"rounded-r":[{"rounded-r":be()}],"rounded-b":[{"rounded-b":be()}],"rounded-l":[{"rounded-l":be()}],"rounded-ss":[{"rounded-ss":be()}],"rounded-se":[{"rounded-se":be()}],"rounded-ee":[{"rounded-ee":be()}],"rounded-es":[{"rounded-es":be()}],"rounded-tl":[{"rounded-tl":be()}],"rounded-tr":[{"rounded-tr":be()}],"rounded-br":[{"rounded-br":be()}],"rounded-bl":[{"rounded-bl":be()}],"border-w":[{border:ke()}],"border-w-x":[{"border-x":ke()}],"border-w-y":[{"border-y":ke()}],"border-w-s":[{"border-s":ke()}],"border-w-e":[{"border-e":ke()}],"border-w-t":[{"border-t":ke()}],"border-w-r":[{"border-r":ke()}],"border-w-b":[{"border-b":ke()}],"border-w-l":[{"border-l":ke()}],"divide-x":[{"divide-x":ke()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ke()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...rt(),"hidden","none"]}],"divide-style":[{divide:[...rt(),"hidden","none"]}],"border-color":[{border:F()}],"border-color-x":[{"border-x":F()}],"border-color-y":[{"border-y":F()}],"border-color-s":[{"border-s":F()}],"border-color-e":[{"border-e":F()}],"border-color-t":[{"border-t":F()}],"border-color-r":[{"border-r":F()}],"border-color-b":[{"border-b":F()}],"border-color-l":[{"border-l":F()}],"divide-color":[{divide:F()}],"outline-style":[{outline:[...rt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ie,Y,J]}],"outline-w":[{outline:["",ie,Pr,xt]}],"outline-color":[{outline:F()}],shadow:[{shadow:["","none",h,Us,js]}],"shadow-color":[{shadow:F()}],"inset-shadow":[{"inset-shadow":["none",b,Us,js]}],"inset-shadow-color":[{"inset-shadow":F()}],"ring-w":[{ring:ke()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:F()}],"ring-offset-w":[{"ring-offset":[ie,xt]}],"ring-offset-color":[{"ring-offset":F()}],"inset-ring-w":[{"inset-ring":ke()}],"inset-ring-color":[{"inset-ring":F()}],"text-shadow":[{"text-shadow":["none",g,Us,js]}],"text-shadow-color":[{"text-shadow":F()}],opacity:[{opacity:[ie,Y,J]}],"mix-blend":[{"mix-blend":[...Ct(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ct()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ie]}],"mask-image-linear-from-pos":[{"mask-linear-from":ge()}],"mask-image-linear-to-pos":[{"mask-linear-to":ge()}],"mask-image-linear-from-color":[{"mask-linear-from":F()}],"mask-image-linear-to-color":[{"mask-linear-to":F()}],"mask-image-t-from-pos":[{"mask-t-from":ge()}],"mask-image-t-to-pos":[{"mask-t-to":ge()}],"mask-image-t-from-color":[{"mask-t-from":F()}],"mask-image-t-to-color":[{"mask-t-to":F()}],"mask-image-r-from-pos":[{"mask-r-from":ge()}],"mask-image-r-to-pos":[{"mask-r-to":ge()}],"mask-image-r-from-color":[{"mask-r-from":F()}],"mask-image-r-to-color":[{"mask-r-to":F()}],"mask-image-b-from-pos":[{"mask-b-from":ge()}],"mask-image-b-to-pos":[{"mask-b-to":ge()}],"mask-image-b-from-color":[{"mask-b-from":F()}],"mask-image-b-to-color":[{"mask-b-to":F()}],"mask-image-l-from-pos":[{"mask-l-from":ge()}],"mask-image-l-to-pos":[{"mask-l-to":ge()}],"mask-image-l-from-color":[{"mask-l-from":F()}],"mask-image-l-to-color":[{"mask-l-to":F()}],"mask-image-x-from-pos":[{"mask-x-from":ge()}],"mask-image-x-to-pos":[{"mask-x-to":ge()}],"mask-image-x-from-color":[{"mask-x-from":F()}],"mask-image-x-to-color":[{"mask-x-to":F()}],"mask-image-y-from-pos":[{"mask-y-from":ge()}],"mask-image-y-to-pos":[{"mask-y-to":ge()}],"mask-image-y-from-color":[{"mask-y-from":F()}],"mask-image-y-to-color":[{"mask-y-to":F()}],"mask-image-radial":[{"mask-radial":[Y,J]}],"mask-image-radial-from-pos":[{"mask-radial-from":ge()}],"mask-image-radial-to-pos":[{"mask-radial-to":ge()}],"mask-image-radial-from-color":[{"mask-radial-from":F()}],"mask-image-radial-to-color":[{"mask-radial-to":F()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":R()}],"mask-image-conic-pos":[{"mask-conic":[ie]}],"mask-image-conic-from-pos":[{"mask-conic-from":ge()}],"mask-image-conic-to-pos":[{"mask-conic-to":ge()}],"mask-image-conic-from-color":[{"mask-conic-from":F()}],"mask-image-conic-to-color":[{"mask-conic-to":F()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:oe()}],"mask-repeat":[{mask:Ie()}],"mask-size":[{mask:ue()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Y,J]}],filter:[{filter:["","none",Y,J]}],blur:[{blur:Ge()}],brightness:[{brightness:[ie,Y,J]}],contrast:[{contrast:[ie,Y,J]}],"drop-shadow":[{"drop-shadow":["","none",v,Us,js]}],"drop-shadow-color":[{"drop-shadow":F()}],grayscale:[{grayscale:["",ie,Y,J]}],"hue-rotate":[{"hue-rotate":[ie,Y,J]}],invert:[{invert:["",ie,Y,J]}],saturate:[{saturate:[ie,Y,J]}],sepia:[{sepia:["",ie,Y,J]}],"backdrop-filter":[{"backdrop-filter":["","none",Y,J]}],"backdrop-blur":[{"backdrop-blur":Ge()}],"backdrop-brightness":[{"backdrop-brightness":[ie,Y,J]}],"backdrop-contrast":[{"backdrop-contrast":[ie,Y,J]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ie,Y,J]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ie,Y,J]}],"backdrop-invert":[{"backdrop-invert":["",ie,Y,J]}],"backdrop-opacity":[{"backdrop-opacity":[ie,Y,J]}],"backdrop-saturate":[{"backdrop-saturate":[ie,Y,J]}],"backdrop-sepia":[{"backdrop-sepia":["",ie,Y,J]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":E()}],"border-spacing-x":[{"border-spacing-x":E()}],"border-spacing-y":[{"border-spacing-y":E()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Y,J]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ie,"initial",Y,J]}],ease:[{ease:["linear","initial",S,Y,J]}],delay:[{delay:[ie,Y,J]}],animate:[{animate:["none",C,Y,J]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[c,Y,J]}],"perspective-origin":[{"perspective-origin":O()}],rotate:[{rotate:He()}],"rotate-x":[{"rotate-x":He()}],"rotate-y":[{"rotate-y":He()}],"rotate-z":[{"rotate-z":He()}],scale:[{scale:nt()}],"scale-x":[{"scale-x":nt()}],"scale-y":[{"scale-y":nt()}],"scale-z":[{"scale-z":nt()}],"scale-3d":["scale-3d"],skew:[{skew:Et()}],"skew-x":[{"skew-x":Et()}],"skew-y":[{"skew-y":Et()}],transform:[{transform:[Y,J,"","none","gpu","cpu"]}],"transform-origin":[{origin:O()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:st()}],"translate-x":[{"translate-x":st()}],"translate-y":[{"translate-y":st()}],"translate-z":[{"translate-z":st()}],"translate-none":["translate-none"],accent:[{accent:F()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:F()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Y,J]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Y,J]}],fill:[{fill:["none",...F()]}],"stroke-w":[{stroke:[ie,Pr,xt,Li]}],stroke:[{stroke:["none",...F()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}};var Ll=Ad(Vd);function zs(...r){return Ll(Fs(r))}var Il=ht(Xt(),1),Kd=gl("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function oS({className:r,variant:e,size:t,asChild:n=!1,...s}){return(0,Il.jsx)(n?fl:"button",{"data-slot":"button",className:zs(Kd({variant:e,size:t,className:r})),...s})}var Rl=ht(Xt(),1);function cS({className:r,type:e,...t}){return(0,Rl.jsx)("input",{type:e,"data-slot":"input",className:zs("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...t})}export{Ql as a,hl as b,ad as c,zs as d,oS as e,cS as f};
/*! Bundled license information:

@neondatabase/serverless/index.mjs:
  (*! Bundled license information:
  
  ieee754/index.js:
    (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  
  buffer/index.js:
    (*!
     * The buffer module from node.js, for the browser.
     *
     * @author   Feross Aboukhadijeh <https://feross.org>
     * @license  MIT
     *)
  *)
*/
